class I{withFields(Z){let Q=Object.keys(this).map((K)=>(K in Z)?Z[K]:this[K]);return new this.constructor(...Q)}}class MZ{static fromArray(Z,Q){let K=Q||new O;for(let J=Z.length-1;J>=0;--J)K=new gZ(Z[J],K);return K}[Symbol.iterator](){return new KJ(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof O}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function N(Z,Q){return new gZ(Z,Q)}function F(Z,Q){return MZ.fromArray(Z,Q)}class KJ{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof O)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class O extends MZ{}class gZ extends MZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class E0{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,K){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=K??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return w0(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let K=this.bitSize%8;if(K){let J=8-K;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=w0(this.rawBuffer,this.bitOffset,J),V=w0(Z.rawBuffer,Z.bitOffset,J);if(X!==V)return!1}let K=this.bitSize%8;if(K){let J=w0(this.rawBuffer,this.bitOffset,Q),X=w0(Z.rawBuffer,Z.bitOffset,Q),V=8-K;if(J>>V!==X>>V)return!1}}return!0}get buffer(){if(ZJ("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ZJ("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function w0(Z,Q,K){if(Q===0)return Z[K]??0;else{let J=Z[K]<<Q&255,X=Z[K+1]>>8-Q;return J|X}}class vK{constructor(Z){this.value=Z}}var e9={};function ZJ(Z,Q){if(e9[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),e9[Z]=!0}class H0 extends I{static isResult(Z){return Z instanceof H0}}class R extends H0{constructor(Z){super();this[0]=Z}isOk(){return!0}}class L extends H0{constructor(Z){super();this[0]=Z}isOk(){return!1}}function l(Z,Q){let K=[Z,Q];while(K.length){let J=K.pop(),X=K.pop();if(J===X)continue;if(!QJ(J)||!QJ(X))return!1;if(!_7(J,X)||y7(J,X)||g7(J,X)||b7(J,X)||f7(J,X)||v7(J,X)||h7(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[W,Y]=k7(J),M=W(J),H=W(X);if(M.length!==H.length)return!1;for(let U of M)K.push(Y(J,U),Y(X,U))}return!0}function k7(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,K)=>Q.get(K)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(K)=>[...Q,...Object.keys(K)],(K,J)=>K[J]]}}function y7(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function g7(Z,Q){return!(Z instanceof E0)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((K,J)=>K===Q[J]))}function b7(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function f7(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function v7(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((K)=>!Q.has(K)))}function h7(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function QJ(Z){return typeof Z==="object"&&Z!==null}function _7(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function F0(Z,Q,K,J,X,V,G){let W=new globalThis.Error(V);W.gleam_error=Z,W.file=Q,W.module=K,W.line=J,W.function=X,W.fn=X;for(let Y in G)W[Y]=G[Y];return W}class XZ extends I{}class VZ extends I{}class YQ extends I{}class j extends I{constructor(Z){super();this[0]=Z}}class q extends I{}function hK(Z,Q){if(Z instanceof j){let K=Z[0];return new R(K)}else return new L(Q)}function bZ(Z){if(Z instanceof R){let Q=Z[0];return new j(Q)}else return new q}function ZQ(Z,Q){if(Z instanceof j)return Z[0];else return Q}function JJ(Z,Q){if(Z instanceof j)return Z[0];else return Q()}function SZ(Z,Q){if(Z instanceof j){let K=Z[0];return new j(Q(K))}else return Z}function _K(Z){if(Z instanceof j)return Z[0];else return Z}function x0(Z,Q){if(Z instanceof j){let K=Z[0];return Q(K)}else return Z}var XJ=new WeakMap,mK=new DataView(new ArrayBuffer(8)),$K=0;function uK(Z){let Q=XJ.get(Z);if(Q!==void 0)return Q;let K=$K++;if($K===2147483647)$K=0;return XJ.set(Z,K),K}function cK(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function dK(Z){let Q=0,K=Z.length;for(let J=0;J<K;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function GJ(Z){mK.setFloat64(0,Z);let Q=mK.getInt32(0),K=mK.getInt32(4);return Math.imul(73244475,Q>>16^Q)^K}function m7(Z){return dK(Z.toString())}function $7(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return uK(Z);if(Z instanceof Date)return GJ(Z.getTime());let K=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)K=Math.imul(31,K)+fZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{K=K+fZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{K=K+cK(fZ(J),fZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let V=J[X],G=Z[V];K=K+cK(fZ(G),dK(V))|0}}return K}function fZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return GJ(Z);case"string":return dK(Z);case"bigint":return m7(Z);case"object":return $7(Z);case"symbol":return uK(Z);case"function":return uK(Z);default:return 0}}var KQ=5,sK=Math.pow(2,KQ),u7=sK-1,c7=sK/2,p7=sK/4,TZ=0,QQ=1,wZ=2,mQ=3,nK={type:wZ,bitmap:0,array:[]};function k0(Z,Q){return Z>>>Q&u7}function q8(Z,Q){return 1<<k0(Z,Q)}function d7(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function iK(Z,Q){return d7(Z&Q-1)}function vZ(Z,Q,K){let J=Z.length,X=Array(J);for(let V=0;V<J;++V)X[V]=Z[V];return X[Q]=K,X}function s7(Z,Q,K){let J=Z.length,X=Array(J+1),V=0,G=0;while(V<Q)X[G++]=Z[V++];X[G++]=K;while(V<J)X[G++]=Z[V++];return X}function pK(Z,Q){let K=Z.length,J=Array(K-1),X=0,V=0;while(X<Q)J[V++]=Z[X++];++X;while(X<K)J[V++]=Z[X++];return J}function WJ(Z,Q,K,J,X,V){let G=fZ(Q);if(G===J)return{type:mQ,hash:G,array:[{type:TZ,k:Q,v:K},{type:TZ,k:X,v:V}]};let W={val:!1};return y0(lK(nK,Z,G,Q,K,W),Z,J,X,V,W)}function y0(Z,Q,K,J,X,V){switch(Z.type){case QQ:return n7(Z,Q,K,J,X,V);case wZ:return lK(Z,Q,K,J,X,V);case mQ:return i7(Z,Q,K,J,X,V)}}function n7(Z,Q,K,J,X,V){let G=k0(K,Q),W=Z.array[G];if(W===void 0)return V.val=!0,{type:QQ,size:Z.size+1,array:vZ(Z.array,G,{type:TZ,k:J,v:X})};if(W.type===TZ){if(l(J,W.k)){if(X===W.v)return Z;return{type:QQ,size:Z.size,array:vZ(Z.array,G,{type:TZ,k:J,v:X})}}return V.val=!0,{type:QQ,size:Z.size,array:vZ(Z.array,G,WJ(Q+KQ,W.k,W.v,K,J,X))}}let Y=y0(W,Q+KQ,K,J,X,V);if(Y===W)return Z;return{type:QQ,size:Z.size,array:vZ(Z.array,G,Y)}}function lK(Z,Q,K,J,X,V){let G=q8(K,Q),W=iK(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[W];if(Y.type!==TZ){let H=y0(Y,Q+KQ,K,J,X,V);if(H===Y)return Z;return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,H)}}let M=Y.k;if(l(J,M)){if(X===Y.v)return Z;return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,{type:TZ,k:J,v:X})}}return V.val=!0,{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,WJ(Q+KQ,M,Y.v,K,J,X))}}else{let Y=Z.array.length;if(Y>=c7){let M=Array(32),H=k0(K,Q);M[H]=lK(nK,Q+KQ,K,J,X,V);let U=0,z=Z.bitmap;for(let B=0;B<32;B++){if((z&1)!==0){let P=Z.array[U++];M[B]=P}z=z>>>1}return{type:QQ,size:Y+1,array:M}}else{let M=s7(Z.array,W,{type:TZ,k:J,v:X});return V.val=!0,{type:wZ,bitmap:Z.bitmap|G,array:M}}}}function i7(Z,Q,K,J,X,V){if(K===Z.hash){let G=rK(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:mQ,hash:K,array:vZ(Z.array,G,{type:TZ,k:J,v:X})}}let W=Z.array.length;return V.val=!0,{type:mQ,hash:K,array:vZ(Z.array,W,{type:TZ,k:J,v:X})}}return y0({type:wZ,bitmap:q8(Z.hash,Q),array:[Z]},Q,K,J,X,V)}function rK(Z,Q){let K=Z.array.length;for(let J=0;J<K;J++)if(l(Q,Z.array[J].k))return J;return-1}function S8(Z,Q,K,J){switch(Z.type){case QQ:return l7(Z,Q,K,J);case wZ:return r7(Z,Q,K,J);case mQ:return a7(Z,J)}}function l7(Z,Q,K,J){let X=k0(K,Q),V=Z.array[X];if(V===void 0)return;if(V.type!==TZ)return S8(V,Q+KQ,K,J);if(l(J,V.k))return V;return}function r7(Z,Q,K,J){let X=q8(K,Q);if((Z.bitmap&X)===0)return;let V=iK(Z.bitmap,X),G=Z.array[V];if(G.type!==TZ)return S8(G,Q+KQ,K,J);if(l(J,G.k))return G;return}function a7(Z,Q){let K=rK(Z,Q);if(K<0)return;return Z.array[K]}function aK(Z,Q,K,J){switch(Z.type){case QQ:return o7(Z,Q,K,J);case wZ:return t7(Z,Q,K,J);case mQ:return e7(Z,J)}}function o7(Z,Q,K,J){let X=k0(K,Q),V=Z.array[X];if(V===void 0)return Z;let G=void 0;if(V.type===TZ){if(!l(V.k,J))return Z}else if(G=aK(V,Q+KQ,K,J),G===V)return Z;if(G===void 0){if(Z.size<=p7){let W=Z.array,Y=Array(Z.size-1),M=0,H=0,U=0;while(M<X){let z=W[M];if(z!==void 0)Y[H]=z,U|=1<<M,++H;++M}++M;while(M<W.length){let z=W[M];if(z!==void 0)Y[H]=z,U|=1<<M,++H;++M}return{type:wZ,bitmap:U,array:Y}}return{type:QQ,size:Z.size-1,array:vZ(Z.array,X,G)}}return{type:QQ,size:Z.size,array:vZ(Z.array,X,G)}}function t7(Z,Q,K,J){let X=q8(K,Q);if((Z.bitmap&X)===0)return Z;let V=iK(Z.bitmap,X),G=Z.array[V];if(G.type!==TZ){let W=aK(G,Q+KQ,K,J);if(W===G)return Z;if(W!==void 0)return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,V,W)};if(Z.bitmap===X)return;return{type:wZ,bitmap:Z.bitmap^X,array:pK(Z.array,V)}}if(l(J,G.k)){if(Z.bitmap===X)return;return{type:wZ,bitmap:Z.bitmap^X,array:pK(Z.array,V)}}return Z}function e7(Z,Q){let K=rK(Z,Q);if(K<0)return Z;if(Z.array.length===1)return;return{type:mQ,hash:Z.hash,array:pK(Z.array,K)}}function YJ(Z,Q){if(Z===void 0)return;let K=Z.array,J=K.length;for(let X=0;X<J;X++){let V=K[X];if(V===void 0)continue;if(V.type===TZ){Q(V.v,V.k);continue}YJ(V,Q)}}class LZ{static fromObject(Z){let Q=Object.keys(Z),K=LZ.new();for(let J=0;J<Q.length;J++){let X=Q[J];K=K.set(X,Z[X])}return K}static fromMap(Z){let Q=LZ.new();return Z.forEach((K,J)=>{Q=Q.set(J,K)}),Q}static new(){return new LZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let K=S8(this.root,0,fZ(Z),Z);if(K===void 0)return Q;return K.v}set(Z,Q){let K={val:!1},J=this.root===void 0?nK:this.root,X=y0(J,0,fZ(Z),Z,Q,K);if(X===this.root)return this;return new LZ(X,K.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=aK(this.root,0,fZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return LZ.new();return new LZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return S8(this.root,0,fZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,K)=>Z.push([K,Q])),Z}forEach(Z){YJ(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,K)=>{Z=Z+cK(fZ(Q),fZ(K))|0}),Z}equals(Z){if(!(Z instanceof LZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,K)=>{if(!l(Z.get(K,!Q),Q))throw VJ}),!0}catch(Q){if(Q===VJ)return!1;throw Q}}}var VJ=Symbol();function g0(Z,Q,K){return FJ(Q,K,Z)}function ZG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=N(X,J)}}}function QG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return ZG(J,F([]));else{let X=K.tail,V=K.head[0];Z=X,Q=N(V,J)}}}function b0(Z){return QG(HJ(Z),F([]))}class FZ extends I{}class I0 extends I{}function f0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=N(X,J)}}}function u(Z){return f0(Z,F([]))}function XG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.head;Z=J.tail,Q=X,K=N(X(G),V)}}}function JQ(Z,Q){return XG(Z,Q,F([]))}function VG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=N(X,J)}}}function uQ(Z,Q){return VG(u(Z),Q)}function U0(Z,Q){return N(Q,Z)}function IZ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return X;else{let G=J.head;Z=J.tail,Q=V(X,G),K=V}}}function v0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return new L(void 0);else{let{head:X,tail:V}=K;if(J(X))return new R(X);else Z=V,Q=J}}}function h0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return new L(void 0);else{let{head:X,tail:V}=K,G=J(X);if(G instanceof R)return G;else Z=V,Q=J}}}function GG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.head;Z=J.tail,Q=X,K=N(G,N(X,V))}}}function oK(Z,Q){if(Z instanceof O)return Z;else{let K=Z.tail;if(K instanceof O)return Z;else{let J=Z.head;return GG(K,Q,F([J]))}}}function WG(Z,Q,K,J,X,V){while(!0){let G=Z,W=Q,Y=K,M=J,H=X,U=V,z=N(H,Y);if(G instanceof O)if(M instanceof FZ)return N(u(z),U);else return N(z,U);else{let{head:B,tail:P}=G,w=W(H,B);if(M instanceof FZ)if(w instanceof XZ)Z=P,Q=W,K=z,J=M,X=B,V=U;else if(w instanceof VZ)Z=P,Q=W,K=z,J=M,X=B,V=U;else{let T;if(M instanceof FZ)T=N(u(z),U);else T=N(z,U);let E=T;if(P instanceof O)return N(F([B]),E);else{let{head:A,tail:S}=P,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new I0;let C=y;Z=S,Q=W,K=F([B]),J=C,X=A,V=E}}else if(w instanceof XZ){let T;if(M instanceof FZ)T=N(u(z),U);else T=N(z,U);let E=T;if(P instanceof O)return N(F([B]),E);else{let{head:A,tail:S}=P,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new I0;let C=y;Z=S,Q=W,K=F([B]),J=C,X=A,V=E}}else if(w instanceof VZ){let T;if(M instanceof FZ)T=N(u(z),U);else T=N(z,U);let E=T;if(P instanceof O)return N(F([B]),E);else{let{head:A,tail:S}=P,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new I0;let C=y;Z=S,Q=W,K=F([B]),J=C,X=A,V=E}}else Z=P,Q=W,K=z,J=M,X=B,V=U}}}function YG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(X instanceof O)return f0(V,W);else if(V instanceof O)return f0(X,W);else{let{head:Y,tail:M}=X,H=V.head,U=V.tail,z=G(Y,H);if(z instanceof XZ)Z=M,Q=V,K=G,J=N(Y,W);else if(z instanceof VZ)Z=X,Q=U,K=G,J=N(H,W);else Z=X,Q=U,K=G,J=N(H,W)}}}function MG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.tail;if(G instanceof O){let W=J.head;return u(N(u(W),V))}else{let W=J.head,Y=G.head,M=G.tail,H=YG(W,Y,X,F([]));Z=M,Q=X,K=N(H,V)}}}}function HG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(X instanceof O)return f0(V,W);else if(V instanceof O)return f0(X,W);else{let{head:Y,tail:M}=X,H=V.head,U=V.tail,z=G(Y,H);if(z instanceof XZ)Z=X,Q=U,K=G,J=N(H,W);else if(z instanceof VZ)Z=M,Q=V,K=G,J=N(Y,W);else Z=M,Q=V,K=G,J=N(Y,W)}}}function FG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.tail;if(G instanceof O){let W=J.head;return u(N(u(W),V))}else{let W=J.head,Y=G.head,M=G.tail,H=HG(W,Y,X,F([]));Z=M,Q=X,K=N(H,V)}}}}function IG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return J;else if(X instanceof FZ)if(J.tail instanceof O)return J.head;else Z=MG(J,V,F([])),Q=new I0,K=V;else if(J.tail instanceof O){let W=J.head;return u(W)}else Z=FG(J,V,F([])),Q=new FZ,K=V}}function tK(Z,Q){if(Z instanceof O)return Z;else{let K=Z.tail;if(K instanceof O)return Z;else{let J=Z.head,X=K.head,V=K.tail,G,W=Q(J,X);if(W instanceof XZ)G=new FZ;else if(W instanceof VZ)G=new FZ;else G=new I0;let Y=G,M=WG(V,Q,F([J]),Y,X,F([]));return IG(M,new FZ,Q)}}}function eK(Z,Q){return h0(Z,(K)=>{let J,X;if(J=K[0],X=K[1],l(J,Q))return new R(X);else return new L(void 0)})}function IJ(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return;else{let{head:X,tail:V}=K;J(X),Z=V,Q=J}}}function AG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=J+X}}}function _0(Z){return AG(Z,"")}function pQ(Z){let K=zJ(Z);return Z6(K)}class sZ extends I{constructor(Z,Q,K){super();this.expected=Z,this.found=Q,this.path=K}}class FQ extends I{constructor(Z){super();this.function=Z}}function IQ(Z,Q){let K=Q.function(Z),J,X;if(J=K[0],X=K[1],X instanceof O)return new R(J);else return new L(X)}function PZ(Z){return new FQ((Q)=>{return[Z,F([])]})}function m0(Z,Q){return new FQ((K)=>{let J=Z.function(K),X,V;return X=J[0],V=J[1],[Q(X),V]})}function kG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(V instanceof O)return X;else{let{head:G,tail:W}=V,Y=G.function(J),M,H;if(M=Y,H=Y[1],H instanceof O)return M;else Z=J,Q=X,K=W}}}function PJ(Z,Q){return new FQ((K)=>{let J=Z.function(K),X,V;if(X=J,V=J[1],V instanceof O)return X;else return kG(K,X,Q)})}function yG(Z,Q){return F([new sZ(Z,dZ(Q),F([]))])}function AJ(Z,Q,K){let J=K(Z);if(J instanceof R)return[J[0],F([])];else return[J[0],F([new sZ(Q,dZ(Z),F([]))])]}function gG(Z){return AJ(Z,"Int",qJ)}function K6(Z,Q){return new FQ((K)=>{return[Z,yG(Q,K)]})}var qQ=new FQ(gG);function bG(Z){return AJ(Z,"String",CJ)}var nZ=new FQ(bG);function dQ(Z){return new FQ((Q)=>{return SJ(Q,Z.function,(K,J)=>{return C8(K,F([J]))},0,F([]))})}function C8(Z,Q){let K=PJ(nZ,F([(()=>{return m0(qQ,a)})()])),J=JQ(Q,(V)=>{let G=r(V),W=IQ(G,K);if(W instanceof R)return W[0];else return"<"+dZ(G)+">"}),X=JQ(Z[1],(V)=>{return new sZ(V.expected,V.found,uQ(J,V.path))});return[Z[0],X]}function fG(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(V instanceof O){let U=W(Y);return C8(U,u(G))}else{let{head:H,tail:U}=V,z=BJ(Y,H);if(z instanceof R){let B=z[0];if(B instanceof j){let P=B[0];Z=U,Q=N(H,G),K=W,J=P,X=M}else return M(Y,N(H,G))}else{let B=z[0],P=W(Y),w;w=P[0];let T=[w,F([new sZ(B,dZ(Y),F([]))])];return C8(T,u(G))}}}}function J6(Z,Q,K){return new FQ((J)=>{let X=fG(Z,F([]),Q.function,J,(H,U)=>{let z=Q.function(H),B;B=z[0];let P=[B,F([new sZ("Field","Nothing",F([]))])];return C8(P,u(U))}),V,G;V=X[0],G=X[1];let W=K(V).function(J),Y,M;return Y=W[0],M=W[1],[Y,uQ(G,M)]})}function AZ(Z,Q,K){return J6(F([Z]),Q,K)}var X6=void 0,wJ={};function r(Z){return Z}function w8(Z){if(/^[-+]?(\d+)$/.test(Z))return new R(parseInt(Z));else return new L(X6)}function a(Z){return Z.toString()}function sQ(Z){return[Z.charCodeAt(0)|0,Z.slice(1)]}function hZ(Z){return Z.toLowerCase()}function cQ(Z){let Q="";for(let K of Z)Q=Q+K;return Q}function NZ(Z,Q,K){return Z.slice(Q,Q+K)}function R0(Z,Q){return Z.startsWith(Q)}var kJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),hG=new RegExp(`^[${kJ}]*`),_G=new RegExp(`[${kJ}]*$`);function zJ(Z){return Z.replace(hG,"")}function Z6(Z){return Z.replace(_G,"")}function $Q(){return LZ.new()}function HJ(Z){return MZ.fromArray(Z.entries())}function HQ(Z,Q){let K=Z.get(Q,wJ);if(K===wJ)return new L(X6);return new R(K)}function FJ(Z,Q,K){return K.set(Z,Q)}function EJ(Z){return decodeURIComponent((Z||"").replace("+"," "))}function E8(Z){return encodeURIComponent(Z).replace("%2B","+")}function $0(Z){try{let Q=[];for(let K of Z.split("&")){let[J,X]=K.split("=");if(!J)continue;let V=EJ(J),G=EJ(X);Q.push([V,G])}return new R(MZ.fromArray(Q))}catch{return new L(X6)}}function dZ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof H0)return"Result";else if(Z instanceof MZ)return"List";else if(Z instanceof E0)return"BitArray";else if(Z instanceof LZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function yJ(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let K=Q.indexOf("e");if(K>=0)return Q.slice(0,K)+".0"+Q.slice(K);else return Q+".0"}}class mG{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#V(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return yJ(Z);if(Z instanceof vK)return this.#G(Z);if(Z instanceof E0)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let K;if(Array.isArray(Z))K=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof MZ)K=this.#Q(Z);else if(Z instanceof I)K=this.#J(Z);else if(Z instanceof LZ)K=this.#K(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else K=this.#X(Z);return this.#Z.delete(Z),K}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",K=[];for(let V of Object.keys(Z))K.push(`${this.inspect(V)}: ${this.inspect(Z[V])}`);let J=K.length?" "+K.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#K(Z){let Q="dict.from_list([",K=!0;return Z.forEach((J,X)=>{if(!K)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",K=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((K)=>{let J=this.inspect(Z[K]);return isNaN(parseInt(K))?`${K}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof O)return"[]";let Q='charlist.from_string("',K="[",J=Z;while(J instanceof gZ){let X=J.head;if(J=J.tail,K!=="[")K+=", ";if(K+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return K+"]"}#V(Z){let Q='"';for(let K=0;K<Z.length;K++){let J=Z[K];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let K=0;K<Z.byteSize-1;K++)Q+=Z.byteAt(K).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let K=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-K,Q+=`:size(${K})`}return Q+=">>",Q}}function BJ(Z,Q){if(Z instanceof LZ||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new R(new q);return new R(new j(X))}let K=Number.isInteger(Q);if(K&&Q>=0&&Q<8&&Z instanceof MZ){let J=0;for(let X of Z){if(J===Q)return new R(new j(X));J++}return new L("Indexable")}if(K&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new R(new j(Z[Q]));return new R(new q)}return new L(K?"Indexable":"Dict")}function SJ(Z,Q,K,J,X){if(!(Z instanceof MZ||Array.isArray(Z))){let G=new sZ("List",dZ(Z),X);return[X,MZ.fromArray([G])]}let V=[];for(let G of Z){let W=Q(G),[Y,M]=W;if(M instanceof gZ){let[H,U]=K(W,J.toString());return[X,U]}V.push(Y),J++}return[MZ.fromArray(V),X]}function qJ(Z){if(Number.isInteger(Z))return new R(Z);return new L(0)}function CJ(Z){if(typeof Z==="string")return new R(Z);return new L("")}function gJ(Z,Q){if(Z<Q)return Z;else return Q}function x8(Z,Q){if(Z>Q)return Z;else return Q}function V6(Z,Q,K){let X=gJ(Z,K);return x8(X,Q)}function UQ(Z,Q){if(Z instanceof R){let K=Z[0];return new R(Q(K))}else return Z}function D0(Z,Q){if(Z instanceof R)return Z;else{let K=Z[0];return new L(Q(K))}}function GZ(Z,Q){if(Z instanceof R){let K=Z[0];return Q(K)}else return Z}function u0(Z,Q){if(Z instanceof R)return Z[0];else return Q}function fJ(Z){if(Z instanceof R)return Z[0];else return Z[0]}function c0(Z,Q){if(Z instanceof R)return Z;else return new L(Q)}class v extends I{constructor(Z,Q,K,J,X,V,G){super();this.scheme=Z,this.userinfo=Q,this.host=K,this.port=J,this.path=X,this.query=V,this.fragment=G}}function uG(Z){return 48>=Z&&Z<=57||65>=Z&&Z<=90||97>=Z&&Z<=122||Z===58||Z===46}function iZ(Z,Q){return new R(new v(Q.scheme,Q.userinfo,Q.host,Q.port,Q.path,Q.query,new j(Z)))}function cG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return iZ(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,G.path,new j(M),G.fragment);return iZ(Y,H)}else if(V==="")return new R(new v(G.scheme,G.userinfo,G.host,G.port,G.path,new j(X),G.fragment));else{let Y=sQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function NQ(Z,Q){return cG(Z,Z,Q,0)}function pG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("?")){let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,M,G.query,G.fragment);return NQ(Y,H)}else if(V.startsWith("#")){let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,M,G.query,G.fragment);return iZ(Y,H)}else if(V==="")return new R(new v(G.scheme,G.userinfo,G.host,G.port,X,G.query,G.fragment));else{let Y=sQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function nQ(Z,Q){return pG(Z,Z,Q,0)}function XQ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J.startsWith("0"))Z=J.slice(1),Q=X,K=V*10;else if(J.startsWith("1"))Z=J.slice(1),Q=X,K=V*10+1;else if(J.startsWith("2"))Z=J.slice(1),Q=X,K=V*10+2;else if(J.startsWith("3"))Z=J.slice(1),Q=X,K=V*10+3;else if(J.startsWith("4"))Z=J.slice(1),Q=X,K=V*10+4;else if(J.startsWith("5"))Z=J.slice(1),Q=X,K=V*10+5;else if(J.startsWith("6"))Z=J.slice(1),Q=X,K=V*10+6;else if(J.startsWith("7"))Z=J.slice(1),Q=X,K=V*10+7;else if(J.startsWith("8"))Z=J.slice(1),Q=X,K=V*10+8;else if(J.startsWith("9"))Z=J.slice(1),Q=X,K=V*10+9;else if(J.startsWith("?")){let G=J.slice(1),W=new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment);return NQ(G,W)}else if(J.startsWith("#")){let G=J.slice(1),W=new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment);return iZ(G,W)}else if(J.startsWith("/")){let G=new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment);return nQ(J,G)}else if(J==="")return new R(new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment));else return new L(void 0)}}function k8(Z,Q){if(Z.startsWith(":0")){let K=Z.slice(2);return XQ(K,Q,0)}else if(Z.startsWith(":1")){let K=Z.slice(2);return XQ(K,Q,1)}else if(Z.startsWith(":2")){let K=Z.slice(2);return XQ(K,Q,2)}else if(Z.startsWith(":3")){let K=Z.slice(2);return XQ(K,Q,3)}else if(Z.startsWith(":4")){let K=Z.slice(2);return XQ(K,Q,4)}else if(Z.startsWith(":5")){let K=Z.slice(2);return XQ(K,Q,5)}else if(Z.startsWith(":6")){let K=Z.slice(2);return XQ(K,Q,6)}else if(Z.startsWith(":7")){let K=Z.slice(2);return XQ(K,Q,7)}else if(Z.startsWith(":8")){let K=Z.slice(2);return XQ(K,Q,8)}else if(Z.startsWith(":9")){let K=Z.slice(2);return XQ(K,Q,9)}else if(Z===":")return new R(Q);else if(Z==="")return new R(Q);else if(Z.startsWith("?")){let K=Z.slice(1);return NQ(K,Q)}else if(Z.startsWith(":?")){let K=Z.slice(2);return NQ(K,Q)}else if(Z.startsWith("#")){let K=Z.slice(1);return iZ(K,Q)}else if(Z.startsWith(":#")){let K=Z.slice(2);return iZ(K,Q)}else if(Z.startsWith("/"))return nQ(Z,Q);else if(Z.startsWith(":")){let K=Z.slice(1);if(K.startsWith("/"))return nQ(K,Q);else return new L(void 0)}else return new L(void 0)}function hJ(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V==="")return new R(new v(G.scheme,G.userinfo,new j(X),G.port,G.path,G.query,G.fragment));else if(V.startsWith(":")){let Y=NZ(X,0,W),M=new v(G.scheme,G.userinfo,new j(Y),G.port,G.path,G.query,G.fragment);return k8(V,M)}else if(V.startsWith("/")){let Y=NZ(X,0,W),M=new v(G.scheme,G.userinfo,new j(Y),G.port,G.path,G.query,G.fragment);return nQ(V,M)}else if(V.startsWith("?")){let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return NQ(Y,H)}else if(V.startsWith("#")){let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return iZ(Y,H)}else{let Y=sQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function dG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V==="")return new R(new v(G.scheme,G.userinfo,new j(V),G.port,G.path,G.query,G.fragment));else if(V.startsWith("]"))if(W===0){let Y=V.slice(1);return k8(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W+1),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return k8(Y,H)}else if(V.startsWith("/"))if(W===0)return nQ(V,G);else{let Y=NZ(X,0,W),M=new v(G.scheme,G.userinfo,new j(Y),G.port,G.path,G.query,G.fragment);return nQ(V,M)}else if(V.startsWith("?"))if(W===0){let Y=V.slice(1);return NQ(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return NQ(Y,H)}else if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return iZ(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return iZ(Y,H)}else{let Y=sQ(V),M,H;if(M=Y[0],H=Y[1],uG(M))Z=X,Q=H,K=G,J=W+1;else return hJ(X,X,G,0)}}}function sG(Z,Q){return dG(Z,Z,Q,0)}function nG(Z,Q){return hJ(Z,Z,Q,0)}function z0(Z,Q){if(Z.startsWith("["))return sG(Z,Q);else if(Z.startsWith(":")){let K=new v(Q.scheme,Q.userinfo,new j(""),Q.port,Q.path,Q.query,Q.fragment);return k8(Z,K)}else if(Z==="")return new R(new v(Q.scheme,Q.userinfo,new j(""),Q.port,Q.path,Q.query,Q.fragment));else return nG(Z,Q)}function iG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("@"))if(W===0){let Y=V.slice(1);return z0(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(G.scheme,new j(M),G.host,G.port,G.path,G.query,G.fragment);return z0(Y,H)}else if(V==="")return z0(X,G);else if(V.startsWith("/"))return z0(X,G);else if(V.startsWith("?"))return z0(X,G);else if(V.startsWith("#"))return z0(X,G);else{let Y=sQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function lG(Z,Q){return iG(Z,Z,Q,0)}function G6(Z,Q){if(Z==="//")return new R(new v(Q.scheme,Q.userinfo,new j(""),Q.port,Q.path,Q.query,Q.fragment));else if(Z.startsWith("//")){let K=Z.slice(2);return lG(K,Q)}else return nQ(Z,Q)}function rG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("/"))if(W===0)return G6(V,G);else{let Y=NZ(X,0,W),M=new v(new j(hZ(Y)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return G6(V,M)}else if(V.startsWith("?"))if(W===0){let Y=V.slice(1);return NQ(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(new j(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return NQ(Y,H)}else if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return iZ(Y,G)}else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(new j(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return iZ(Y,H)}else if(V.startsWith(":"))if(W===0)return new L(void 0);else{let Y=V.slice(1),M=NZ(X,0,W),H=new v(new j(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return G6(Y,H)}else if(V==="")return new R(new v(G.scheme,G.userinfo,G.host,G.port,X,G.query,G.fragment));else{let Y=sQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function aG(Z){return cQ(F([E8(Z[0]),"=",E8(Z[1])]))}function iQ(Z){let K=JQ(Z,aG),J=oK(K,r("&")),X=cQ(J);return r(X)}function g8(Z){let Q,K=Z.fragment;if(K instanceof j){let D=K[0];Q=F(["#",D])}else Q=F([]);let J=Q,X,V=Z.query;if(V instanceof j){let D=V[0];X=N("?",N(D,J))}else X=J;let G=X,W=N(Z.path,G),Y,M=Z.host,H=R0(Z.path,"/");if(M instanceof j&&!H)if(M[0]!=="")Y=N("/",W);else Y=W;else Y=W;let U=Y,z,B=Z.host,P=Z.port;if(B instanceof j&&P instanceof j){let D=P[0];z=N(":",N(a(D),U))}else z=U;let w=z,T,E=Z.scheme,A=Z.userinfo,S=Z.host;if(E instanceof j)if(A instanceof j)if(S instanceof j){let D=E[0],C=A[0],k=S[0];T=N(D,N("://",N(C,N("@",N(k,w)))))}else{let D=E[0];T=N(D,N(":",w))}else if(S instanceof j){let D=E[0],C=S[0];T=N(D,N("://",N(C,w)))}else{let D=E[0];T=N(D,N(":",w))}else if(A instanceof q&&S instanceof j){let D=S[0];T=N("//",N(D,w))}else T=w;return _0(T)}var oG=new v(new q,new q,new q,new q,"",new q,new q);function b8(Z){return rG(Z,Z,oG,0)}var d0=()=>[],RQ=(Z)=>[Z];var lQ=(Z,Q)=>[...Z,Q];var WZ=(Z,Q)=>Q[Z-1];var RZ=(Z)=>Z.length;var s0=(Z,Q)=>Z<<Q,W6=(Z,Q)=>Z>>Q;function JW(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(W<=Y)Z=V,Q=M(G,WZ(W,V)),K=W+1,J=Y,X=M;else return G}}function uJ(Z,Q,K){let J=RZ(Z);return JW(Z,Q,2,J,K)}function XW(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(G>0)Z=X,Q=W(V,WZ(G,X)),K=G-1,J=W;else return V}}function f8(Z,Q,K){let J=RZ(Z);return XW(Z,Q,J,K)}function VW(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(W<=Y)Z=V,Q=M(G,WZ(W,V),W),K=W+1,J=Y,X=M;else return G}}function cJ(Z,Q,K){let J=RZ(Z);return VW(Z,Q,1,J,K)}function v8(Z,Q){return cJ(Z,d0(),(K,J,X)=>{return lQ(K,Q(J,X))})}class DQ extends I{constructor(Z,Q){super();this.size=Z,this.children=Q}}class CQ extends I{constructor(Z,Q){super();this.sizes=Z,this.children=Q}}class $8 extends I{constructor(Z){super();this.children=Z}}function n0(Z){return new $8(Z)}function j0(Z){if(Z instanceof DQ)return Z.size;else if(Z instanceof CQ){let Q=Z.sizes;return WZ(RZ(Q),Q)}else{let Q=Z.children;return RZ(Q)}}function GW(Z){let Q=j0(WZ(1,Z));return uJ(Z,RQ(Q),(K,J)=>{let X=WZ(RZ(K),K)+j0(J);return lQ(K,X)})}function WW(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(WZ(X,J)>V)return X-1;else Z=J,Q=X+1,K=V}}function _8(Z,Q,K){if(Z instanceof DQ){let J=Z.children;return f8(J,Q,(X,V)=>{return _8(V,X,K)})}else if(Z instanceof CQ){let J=Z.children;return f8(J,Q,(X,V)=>{return _8(V,X,K)})}else{let J=Z.children;return f8(J,Q,K)}}function pJ(Z,Q){let K=RZ(Q),J=WZ(K,Q),V=s0(1,Z)*(K-1)+j0(J);return new DQ(V,Q)}function u8(Z,Q){let K=RZ(Q),J=s0(1,Z),X=GW(Q),V;if(K===1)V=0;else V=WZ(K-1,X);if(V===J*(K-1)){let Y=WZ(K,X);return new DQ(Y,Q)}else return new CQ(X,Q)}var wQ=5;function dJ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof DQ){let G=J.children,W=W6(V,X),Y=V-s0(W,X);Z=WZ(W+1,G),Q=X-wQ,K=Y}else if(J instanceof CQ){let{sizes:G,children:W}=J,Y=W6(V,X),M=WW(G,Y+1,V),H;if(M===0)H=V;else H=V-WZ(M,G);let U=H;Z=WZ(M+1,W),Q=X-wQ,K=U}else{let G=J.children;return WZ(V+1,G)}}}function m8(Z,Q,K,J){let X=Z-wQ;if(K instanceof DQ){let{size:V,children:G}=K,W=s0(1,Z),Y=v8(G,(M,H)=>{let U=Q+(H-1)*W;return m8(X,U,M,J)});return new DQ(V,Y)}else if(K instanceof CQ){let{sizes:V,children:G}=K,W=v8(G,(Y,M)=>{let H;if(M===1)H=0;else H=WZ(M-1,V);return m8(X,Q+H,Y,J)});return new CQ(V,W)}else{let V=K.children,G=v8(V,(W,Y)=>{return J(W,Y+Q-1)});return new $8(G)}}var Y6=32;class c8 extends I{constructor(Z,Q,K,J){super();this.nodes=Z,this.items=Q,this.push_node=K,this.push_item=J}}function sJ(Z,Q,K){if(Z instanceof O)return F([RQ(Q)]);else{let{head:J,tail:X}=Z;if(RZ(J)<Y6)return N(lQ(J,Q),X);else{let G=K+wQ,W=pJ(G,J);return N(RQ(Q),sJ(X,W,G))}}}function nJ(){return new c8(F([]),d0(),sJ,lQ)}function iJ(Z,Q){let K,J,X,V;if(K=Z.nodes,J=Z.items,X=Z.push_node,V=Z.push_item,RZ(J)===Y6){let W=n0(J);return new c8(X(K,W,0),RQ(Q),X,V)}else return new c8(K,V(J,Q),X,V)}function YW(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return new L(void 0);else{let G=J.tail;if(G instanceof O){let W=J.head;return new R([V,W])}else{let W=J.head,Y=G,M=V+wQ;Z=X(Y,u8(M,W),M),Q=X,K=M}}}}function lJ(Z){let Q,K,J;Q=Z.nodes,K=Z.items,J=Z.push_node;let X=RZ(K),V;if(X>0)V=J(Q,n0(K),0);else V=Q;return YW(V,J,0)}class EQ extends I{}class i0 extends I{constructor(Z,Q){super();this.shift=Z,this.root=Q}}function FW(Z,Q){let K=RZ(Q);if(K===0)return new EQ;else if(K===1)return new i0(Z,WZ(1,Q));else{let J=Z+wQ;return new i0(J,u8(J,Q))}}function rJ(){return new EQ}function l0(Z){return new i0(0,n0(RQ(Z)))}function VQ(Z){let Q=(()=>{let J=IZ(Z,nJ(),iJ);return lJ(J)})();if(Q instanceof R){let K=Q[0][0],J=Q[0][1];return FW(K,J)}else return new EQ}function H6(Z){if(Z instanceof EQ)return 0;else{let Q=Z.root;return j0(Q)}}function F6(Z,Q){if(Z instanceof EQ)return new L(void 0);else{let{shift:K,root:J}=Z;if(0<=Q&&Q<j0(J))return new R(dJ(J,K,Q));else return new L(void 0)}}function I6(Z,Q){if(Z instanceof EQ)return Z;else{let{shift:K,root:J}=Z;return new i0(K,m8(K,0,J,Q))}}function IW(Z,Q,K){if(Z instanceof EQ)return Q;else{let J=Z.root;return _8(J,Q,K)}}function U6(Z){return IW(Z,F([]),U0)}function xQ(Z,Q,K){if(Z)return Q;else return K()}function QZ(Z){return Z}function tJ(Z){try{let Q=JSON.parse(Z);return new R(Q)}catch(Q){return new L(RW(Q,Z))}}function RW(Z,Q){if(DW(Z))return new R6;return zW(Z,Q)}function DW(Z){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(Z.message)}function zW(Z,Q){let K=[jW,OW,TW,LW];for(let J of K){let X=J(Z,Q);if(X)return X}return new rQ("",0)}function jW(Z){let K=/unexpected token '(.)', ".+" is not valid JSON/i.exec(Z.message);if(!K)return null;let J=s8(K[1]);return new rQ(J,-1)}function OW(Z){let K=/unexpected token (.) in JSON at position (\d+)/i.exec(Z.message);if(!K)return null;let J=s8(K[1]),X=Number(K[2]);return new rQ(J,X)}function LW(Z,Q){let J=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(Z.message);if(!J)return null;let X=Number(J[2]),V=Number(J[3]),G=PW(X,V,Q),W=s8(Q[G]);return new rQ(W,G)}function TW(Z){let K=/unexpected (identifier|token) "(.)"/i.exec(Z.message);if(!K)return null;let J=s8(K[2]);return new rQ(J,0)}function s8(Z){return"0x"+Z.charCodeAt(0).toString(16).toUpperCase()}function PW(Z,Q,K){if(Z===1)return Q-1;let J=1,X=0;return K.split("").find((V,G)=>{if(V===`
`)J+=1;if(J===Z)return X=G+Q,!0;return!1}),X}class R6 extends I{}class rQ extends I{constructor(Z){super();this[0]=Z}}class eJ extends I{constructor(Z){super();this[0]=Z}}function BW(Z,Q){return GZ(tJ(Z),(K)=>{let J=IQ(K,Q);return D0(J,(X)=>{return new eJ(X)})})}function z6(Z,Q){return BW(Z,Q)}var _Z=()=>globalThis?.document,n8="http://www.w3.org/1999/xhtml",i8=1,j6=3;var KX=!!globalThis.HTMLElement?.prototype?.moveBefore;var b=F([]),l8=new q;var CW=new YQ,wW=new XZ,EW=new VZ;function a8(Z,Q){if(Z.name===Q.name)return EW;else if(Z.name<Q.name)return wW;else return CW}class mZ extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class o8 extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class OZ extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.kind=Z,this.name=Q,this.handler=K,this.include=J,this.prevent_default=X,this.stop_propagation=V,this.debounce=G,this.throttle=W}}class r0 extends I{constructor(Z,Q,K){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=K}}class MX extends I{constructor(Z){super();this.kind=Z}}function fW(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;if(X instanceof mZ){let V=X.name;if(V==="")Z=K.tail,Q=J;else if(V==="class"){let G=X.value;if(G==="")Z=K.tail,Q=J;else{let W=K.tail;if(W instanceof O){let Y=X;Z=W,Q=N(Y,J)}else{let Y=W.head;if(Y instanceof mZ)if(Y.name==="class"){let H=X.kind,U=G,z=W.tail,B=Y.value,P=U+" "+B,w=new mZ(H,"class",P);Z=N(w,z),Q=J}else{let H=X;Z=W,Q=N(H,J)}else{let M=X;Z=W,Q=N(M,J)}}}}else if(V==="style"){let G=X.value;if(G==="")Z=K.tail,Q=J;else{let W=K.tail;if(W instanceof O){let Y=X;Z=W,Q=N(Y,J)}else{let Y=W.head;if(Y instanceof mZ)if(Y.name==="style"){let H=X.kind,U=G,z=W.tail,B=Y.value,P=U+";"+B,w=new mZ(H,"style",P);Z=N(w,z),Q=J}else{let H=X;Z=W,Q=N(H,J)}else{let M=X;Z=W,Q=N(M,J)}}}}else{let G=X;Z=K.tail,Q=N(G,J)}}else{let V=X;Z=K.tail,Q=N(V,J)}}}}function HX(Z){if(Z instanceof O)return Z;else if(Z.tail instanceof O)return Z;else{let J=tK(Z,(X,V)=>{return a8(V,X)});return fW(J,b)}}var L6=0;function FX(Z,Q){return new mZ(L6,Z,Q)}var IX=1;var T6=2;function UX(Z,Q,K,J,X,V,G){return new OZ(T6,Z,Q,K,J,X,V,G)}var P6=0;var A6=new MX(P6);var B6=2;function GQ(Z,Q){return FX(Z,Q)}function m(Z){return GQ("class",Z)}function NX(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else if(K.head[1]){let V=K.tail,G=K.head[0];return J+G+" "+NX(V,J)}else Z=K.tail,Q=J}}function a0(Z){return m(NX(Z,""))}function S6(Z){return GQ("id",Z)}function q6(Z){return GQ("type",Z)}function C6(Z){return GQ("value",Z)}function RX(Z,Q){return GQ("aria-"+Z,Q)}function aQ(Z){return GQ("role",Z)}function w6(Z){return RX("hidden",(()=>{if(Z)return"true";else return"false"})())}function E6(Z){return RX("label",Z)}class o0 extends I{constructor(Z,Q,K){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=K}}class DX extends I{constructor(Z,Q,K,J,X){super();this.dispatch=Z,this.emit=Q,this.select=K,this.root=J,this.provide=X}}function zX(Z,Q,K,J,X,V){let G=new DX(Q,K,J,X,V);return IJ(Z.synchronous,(W)=>{return W(G)})}var L0=new o0(F([]),F([]),F([]));function o(){return L0}function T0(Z){return new o0(F([(K)=>{let J=K.dispatch;return Z(J)}]),L0.before_paint,L0.after_paint)}function jX(Z){let Q=(K)=>{let J=K.root(),X=K.dispatch;return Z(X,J)};return new o0(L0.synchronous,L0.before_paint,F([Q]))}function t8(Z){return IZ(Z,L0,(Q,K)=>{return new o0(IZ(K.synchronous,Q.synchronous,U0),IZ(K.before_paint,Q.before_paint,U0),IZ(K.after_paint,Q.after_paint,U0))})}function kZ(){return null}function t0(Z,Q){let K=Z?.get(Q);if(K!=null)return new R(K);else return new L(void 0)}function e0(Z,Q){return Z&&Z.has(Q)}function oQ(Z,Q,K){return Z??=new Map,Z.set(Q,K),Z}function x6(Z,Q){return Z?.delete(Q),Z}class k6 extends I{}class y6 extends I{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class OX extends I{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function hW(Z,Q){while(!0){let K=Z,J=Q;if(J instanceof O)return!1;else{let{head:X,tail:V}=J,G=R0(K,X);if(G)return G;else Z=K,Q=V}}}function $Z(Z,Q,K){if(K==="")return new OX(Q,Z);else return new y6(K,Z)}var P0=new k6,Q8="\t";function LX(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof k6)if(J instanceof O)return"";else{let X=J.tail;return _0(X)}else if(K instanceof y6){let X=K.key;Z=K.parent,Q=N(Q8,N(X,J))}else{let X=K.index;Z=K.parent,Q=N(Q8,N(a(X),J))}}}function TX(Z){return LX(Z,F([]))}function PX(Z,Q){if(Q instanceof O)return!1;else return hW(TX(Z),Q)}var g6=`
`;function b6(Z,Q){return LX(Z,F([g6,Q]))}class uZ extends I{constructor(Z,Q,K,J,X){super();this.kind=Z,this.key=Q,this.mapper=K,this.children=J,this.keyed_children=X}}class yZ extends I{constructor(Z,Q,K,J,X,V,G,W,Y,M){super();this.kind=Z,this.key=Q,this.mapper=K,this.namespace=J,this.tag=X,this.attributes=V,this.children=G,this.keyed_children=W,this.self_closing=Y,this.void=M}}class cZ extends I{constructor(Z,Q,K,J){super();this.kind=Z,this.key=Q,this.mapper=K,this.content=J}}class tQ extends I{constructor(Z,Q,K,J,X,V,G){super();this.kind=Z,this.key=Q,this.mapper=K,this.namespace=J,this.tag=X,this.attributes=V,this.inner_html=G}}function K8(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function AX(Z,Q){if(Q instanceof uZ)return new uZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof yZ)return new yZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof cZ)return new cZ(Q.kind,Z,Q.mapper,Q.content);else return new tQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var rZ=0;function f6(Z,Q,K,J){return new uZ(rZ,Z,Q,K,J)}var eQ=1;function J8(Z,Q,K,J,X,V,G,W,Y){return new yZ(eQ,Z,Q,K,J,HX(X),V,G,W,Y)}var A0=2;function v6(Z,Q,K){return new cZ(A0,Z,Q,K)}var BX=3;var h6=(Z,Q)=>Z===Q,aZ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let K=typeof Z;if(K!==typeof Q)return!1;if(K!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return $W(Z,Q);return uW(Z,Q)},$W=(Z,Q)=>{let K=Z.length;if(K!==Q.length)return!1;while(K--)if(!aZ(Z[K],Q[K]))return!1;return!0},uW=(Z,Q)=>{let K=Object.keys(Z),J=K.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=K[J];if(!Object.hasOwn(Q,X))return!1;if(!aZ(Z[X],Q[X]))return!1}return!0};class OQ extends I{constructor(Z,Q,K){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=K}}class $6 extends I{constructor(Z,Q){super();this.path=Z,this.handler=Q}}class _6 extends I{constructor(Z){super();this.path=Z}}function u6(){return new OQ(kZ(),b,b)}function wX(Z){return new OQ(Z.handlers,Z.next_dispatched_paths,b)}function EX(Z,Q,K){return x6(Z,b6(Q,K))}function ZK(Z,Q,K){let J=EX(Z.handlers,Q,K);return new OQ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function SX(Z,Q,K){return IZ(K,Z,(J,X)=>{if(X instanceof OZ){let V=X.name;return EX(J,Q,V)}else return J})}function c6(Z,Q,K,J){let X=t0(Z.handlers,Q+g6+K);if(X instanceof R){let V=X[0],G=IQ(J,V);if(G instanceof R){let W=G[0];return new $6(Q,W)}else return new _6(Q)}else return new _6(Q)}function p6(Z,Q){let K=N(Q.path,Z.next_dispatched_paths),J=new OQ(Z.handlers,Z.dispatched_paths,K);if(Q instanceof $6){let X=Q.handler;return[J,new R(X)]}else return[J,new L(void 0)]}function QK(Z,Q,K,J){let X=c6(Z,Q,K,J);return((V)=>{return p6(Z,V)})(X)}function KK(Z,Q){return PX(Q,Z.dispatched_paths)}function xX(Z,Q,K,J,X){return oQ(Z,b6(K,J),m0(X,(V)=>{return new r0(V.prevent_default,V.stop_propagation,QZ(Q)(V.message))}))}function B0(Z,Q,K,J,X){let V=xX(Z.handlers,Q,K,J,X);return new OQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function qX(Z,Q,K,J){return IZ(J,Z,(X,V)=>{if(V instanceof OZ){let{name:G,handler:W}=V;return xX(X,Q,K,G,W)}else return X})}function gQ(Z,Q){let K=h6(Z,QZ);if(h6(Q,QZ))return Z;else if(K)return Q;else return(X)=>{return Z(Q(X))}}function CX(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(W instanceof O)return X;else{let{head:Y,tail:M}=W;Z=kX(X,V,G,Y),Q=V,K=G+1,J=M}}}function kX(Z,Q,K,J){if(J instanceof uZ){let X=J.children,V=$Z(Q,K,J.key);return CX(Z,V,0,X)}else if(J instanceof yZ){let{attributes:X,children:V}=J,G=$Z(Q,K,J.key),Y=SX(Z,G,X);return CX(Y,G,0,V)}else if(J instanceof cZ)return Z;else{let X=J.attributes,V=$Z(Q,K,J.key);return SX(Z,V,X)}}function LQ(Z,Q,K,J){let X=kX(Z.handlers,Q,K,J);return new OQ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function m6(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(M instanceof O)return V;else{let{head:H,tail:U}=M;Z=yX(V,G,W,Y,H),Q=G,K=W,J=Y+1,X=U}}}function yX(Z,Q,K,J,X){if(X instanceof uZ){let V=X.children,G=$Z(K,J,X.key),W=gQ(Q,X.mapper);return m6(Z,W,G,0,V)}else if(X instanceof yZ){let{attributes:V,children:G}=X,W=$Z(K,J,X.key),Y=gQ(Q,X.mapper),H=qX(Z,Y,W,V);return m6(H,Y,W,0,G)}else if(X instanceof cZ)return Z;else{let V=X.attributes,G=$Z(K,J,X.key),W=gQ(Q,X.mapper);return qX(Z,W,G,V)}}function TQ(Z,Q,K,J,X){let V=yX(Z.handlers,Q,K,J,X);return new OQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function d6(Z){return TQ(u6(),QZ,P0,0,Z)}function gX(Z,Q,K,J,X){let V=m6(Z.handlers,Q,K,J,X);return new OQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function oZ(Z,Q,K){return J8("",QZ,"",Z,Q,K,kZ(),!1,K8(Z,""))}function JK(Z){return v6("",QZ,Z)}function X8(){return v6("",QZ,"")}function qZ(Z){return JK(Z)}function bX(Z,Q){return oZ("section",Z,Q)}function tZ(Z,Q){return oZ("div",Z,Q)}function s6(Z,Q){return oZ("dl",Z,Q)}function V8(Z,Q){return oZ("dt",Z,Q)}function n6(Z,Q){return oZ("li",Z,Q)}function G8(Z,Q){return oZ("span",Z,Q)}function W8(Z,Q){return oZ("button",Z,Q)}function i6(Z){return oZ("input",Z,b)}function l6(Z,Q){return oZ("label",Z,Q)}class Y8 extends I{constructor(Z,Q,K,J){super();this.index=Z,this.removed=Q,this.changes=K,this.children=J}}class fX extends I{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class vX extends I{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class hX extends I{constructor(Z,Q,K){super();this.kind=Z,this.added=Q,this.removed=K}}class _X extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.before=K}}class mX extends I{constructor(Z,Q,K){super();this.kind=Z,this.index=Q,this.with=K}}class $X extends I{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class uX extends I{constructor(Z,Q,K){super();this.kind=Z,this.children=Q,this.before=K}}function a6(Z,Q,K,J){return new Y8(Z,Q,K,J)}var o6=0;function cX(Z){return new fX(o6,Z)}var t6=1;function pX(Z){return new vX(t6,Z)}var e6=2;function Z9(Z,Q){return new hX(e6,Z,Q)}var Q9=3;function dX(Z,Q){return new _X(Q9,Z,Q)}var K9=4;function sX(Z){return new $X(K9,Z)}var J9=5;function Q0(Z,Q){return new mX(J9,Z,Q)}var X9=6;function V9(Z,Q){return new uX(X9,Z,Q)}class iX extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=K,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=V,this.provided_contexts=G,this.vdom=W}}class lX extends I{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class rX extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.data=K}}class aX extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.value=K}}class XK extends I{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class VK extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class GK extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class WK extends I{constructor(Z,Q,K,J){super();this.kind=Z,this.path=Q,this.name=K,this.event=J}}class G9 extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.value=K}}var dW=0;function oX(Z,Q,K,J,X,V,G){return new iX(dW,Z,Q,K,J,X,V,G)}var sW=1;function W9(Z){return new lX(sW,Z)}var nW=2;function tX(Z,Q){return new rX(nW,Z,Q)}var iW=3;function eX(Z,Q){return new aX(iW,Z,Q)}class YK extends I{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class KV extends I{constructor(Z,Q,K){super();this.added=Z,this.removed=Q,this.events=K}}function lW(Z,Q,K,J){if(K==="input"&&Q==="")return KK(Z,J);else if(K==="select"&&Q==="")return KK(Z,J);else if(K==="textarea"&&Q==="")return KK(Z,J);else return!1}function QV(Z,Q,K,J,X,V,G,W){while(!0){let Y=Z,M=Q,H=K,U=J,z=X,B=V,P=G,w=W;if(z instanceof O)if(B instanceof O)return new KV(P,w,U);else{let T=B.head;if(T instanceof OZ){let E=T,A=B.tail,S=T.name,y=T.handler,D=N(E,P),C=B0(U,H,M,S,y);Z=Y,Q=M,K=H,J=C,X=z,V=A,G=D,W=w}else{let E=T,A=B.tail,S=N(E,P);Z=Y,Q=M,K=H,J=U,X=z,V=A,G=S,W=w}}else if(B instanceof O){let T=z.head;if(T instanceof OZ){let E=T,A=z.tail,S=T.name,y=N(E,w),D=ZK(U,M,S);Z=Y,Q=M,K=H,J=D,X=A,V=B,G=P,W=y}else{let E=T,A=z.tail,S=N(E,w);Z=Y,Q=M,K=H,J=U,X=A,V=B,G=P,W=S}}else{let{head:T,tail:E}=z,A=B.head,S=B.tail,y=a8(T,A);if(y instanceof XZ)if(T instanceof OZ){let D=T.name,C=N(T,w),k=ZK(U,M,D);Z=Y,Q=M,K=H,J=k,X=E,V=B,G=P,W=C}else{let D=N(T,w);Z=Y,Q=M,K=H,J=U,X=E,V=B,G=P,W=D}else if(y instanceof VZ)if(T instanceof mZ)if(A instanceof mZ){let D,C=A.name;if(C==="value")D=Y||T.value!==A.value;else if(C==="checked")D=Y||T.value!==A.value;else if(C==="selected")D=Y||T.value!==A.value;else D=T.value!==A.value;let k=D,g;if(k)g=N(A,P);else g=P;let f=g;Z=Y,Q=M,K=H,J=U,X=E,V=S,G=f,W=w}else if(A instanceof OZ){let{name:D,handler:C}=A,k=N(A,P),g=N(T,w),f=B0(U,H,M,D,C);Z=Y,Q=M,K=H,J=f,X=E,V=S,G=k,W=g}else{let D=N(A,P),C=N(T,w);Z=Y,Q=M,K=H,J=U,X=E,V=S,G=D,W=C}else if(T instanceof o8)if(A instanceof o8){let D,C=A.name;if(C==="scrollLeft")D=!0;else if(C==="scrollRight")D=!0;else if(C==="value")D=Y||!aZ(T.value,A.value);else if(C==="checked")D=Y||!aZ(T.value,A.value);else if(C==="selected")D=Y||!aZ(T.value,A.value);else D=!aZ(T.value,A.value);let k=D,g;if(k)g=N(A,P);else g=P;let f=g;Z=Y,Q=M,K=H,J=U,X=E,V=S,G=f,W=w}else if(A instanceof OZ){let{name:D,handler:C}=A,k=N(A,P),g=N(T,w),f=B0(U,H,M,D,C);Z=Y,Q=M,K=H,J=f,X=E,V=S,G=k,W=g}else{let D=N(A,P),C=N(T,w);Z=Y,Q=M,K=H,J=U,X=E,V=S,G=D,W=C}else if(A instanceof OZ){let{name:D,handler:C}=A,k=T.prevent_default.kind!==A.prevent_default.kind||T.stop_propagation.kind!==A.stop_propagation.kind||T.debounce!==A.debounce||T.throttle!==A.throttle,g;if(k)g=N(A,P);else g=P;let f=g,x=B0(U,H,M,D,C);Z=Y,Q=M,K=H,J=x,X=E,V=S,G=f,W=w}else{let D=T.name,C=N(A,P),k=N(T,w),g=ZK(U,M,D);Z=Y,Q=M,K=H,J=g,X=E,V=S,G=C,W=k}else if(A instanceof OZ){let{name:D,handler:C}=A,k=N(A,P),g=B0(U,H,M,D,C);Z=Y,Q=M,K=H,J=g,X=z,V=S,G=k,W=w}else{let D=N(A,P);Z=Y,Q=M,K=H,J=U,X=z,V=S,G=D,W=w}}}}function Y9(Z,Q,K,J,X,V,G,W,Y,M,H,U,z,B){while(!0){let P=Z,w=Q,T=K,E=J,A=X,S=V,y=G,D=W,C=Y,k=M,g=H,f=U,x=z,$=B;if(P instanceof O)if(T instanceof O)return new YK(new Y8(C,y,g,f),$);else{let CZ=gX($,x,k,D,T),BZ=V9(T,D-S),t=N(BZ,g);return new YK(new Y8(C,y,t,f),CZ)}else if(T instanceof O){let{head:CZ,tail:BZ}=P,t;if(CZ.key===""||!e0(A,CZ.key))t=y+1;else t=y;let c=t,d=LQ($,k,D,CZ);Z=BZ,Q=w,K=T,J=E,X=A,V=S,G=c,W=D,Y=C,M=k,H=g,U=f,z=x,B=d}else{let CZ=P.head,BZ=T.head;if(CZ.key!==BZ.key){let t=P.tail,e=T.tail,c=t0(w,BZ.key);if(e0(E,CZ.key))if(c instanceof R){let h=c[0];if(e0(A,CZ.key))Z=t,Q=w,K=T,J=E,X=A,V=S-1,G=y,W=D,Y=C,M=k,H=g,U=f,z=x,B=$;else{let s=D-S,_=N(dX(BZ.key,s),g),ZZ=oQ(A,BZ.key,void 0),n=S+1;Z=N(h,P),Q=w,K=T,J=E,X=ZZ,V=n,G=y,W=D,Y=C,M=k,H=_,U=f,z=x,B=$}}else{let h=D-S,p=TQ($,x,k,D,BZ),s=V9(F([BZ]),h),_=N(s,g);Z=P,Q=w,K=e,J=E,X=A,V=S+1,G=y,W=D+1,Y=C,M=k,H=_,U=f,z=x,B=p}else if(c instanceof R){let h=D-S,p=N(sX(h),g),s=LQ($,k,D,CZ),_=S-1;Z=t,Q=w,K=T,J=E,X=A,V=_,G=y,W=D,Y=C,M=k,H=p,U=f,z=x,B=s}else{let h=Q0(D-S,BZ),p,_=LQ($,k,D,CZ);p=TQ(_,x,k,D,BZ);let ZZ=p;Z=t,Q=w,K=e,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=N(h,g),U=f,z=x,B=ZZ}}else{let t=P.head;if(t instanceof uZ){let e=T.head;if(e instanceof uZ){let c=t,d=P.tail,h=e,p=T.tail,s=gQ(x,h.mapper),_=$Z(k,D,h.key),ZZ=Y9(c.children,c.keyed_children,h.children,h.keyed_children,kZ(),0,0,0,D,_,b,b,s,$),n,JZ=ZZ.patch;if(JZ.changes instanceof O)if(JZ.children instanceof O)if(JZ.removed===0)n=f;else n=N(ZZ.patch,f);else n=N(ZZ.patch,f);else n=N(ZZ.patch,f);let eZ=n;Z=d,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=g,U=eZ,z=x,B=ZZ.events}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=LQ($,k,D,c);_=TQ(n,x,k,D,h);let JZ=_;Z=d,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=N(s,g),U=f,z=x,B=JZ}}else if(t instanceof yZ){let e=T.head;if(e instanceof yZ){let c=t,d=e;if(c.namespace===d.namespace&&c.tag===d.tag){let h=P.tail,p=T.tail,s=gQ(x,d.mapper),_=$Z(k,D,d.key),ZZ=lW($,d.namespace,d.tag,_),n=QV(ZZ,_,s,$,c.attributes,d.attributes,b,b),JZ,WQ,eZ;JZ=n.added,WQ=n.removed,eZ=n.events;let hQ;if(JZ instanceof O&&WQ instanceof O)hQ=b;else hQ=F([Z9(JZ,WQ)]);let Y0=hQ,M0=Y9(c.children,c.keyed_children,d.children,d.keyed_children,kZ(),0,0,0,D,_,Y0,b,s,eZ),SQ,_Q=M0.patch;if(_Q.changes instanceof O)if(_Q.children instanceof O)if(_Q.removed===0)SQ=f;else SQ=N(M0.patch,f);else SQ=N(M0.patch,f);else SQ=N(M0.patch,f);let x7=SQ;Z=h,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=g,U=x7,z=x,B=M0.events}else{let h=t,p=P.tail,s=e,_=T.tail,ZZ=Q0(D-S,s),n,WQ=LQ($,k,D,h);n=TQ(WQ,x,k,D,s);let eZ=n;Z=p,Q=w,K=_,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=N(ZZ,g),U=f,z=x,B=eZ}}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=LQ($,k,D,c);_=TQ(n,x,k,D,h);let JZ=_;Z=d,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=N(s,g),U=f,z=x,B=JZ}}else if(t instanceof cZ){let e=T.head;if(e instanceof cZ){let c=t,d=e;if(c.content===d.content){let h=P.tail,p=T.tail;Z=h,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=g,U=f,z=x,B=$}else{let h=P.tail,p=e,s=T.tail,_=a6(D,0,F([cX(p.content)]),b);Z=h,Q=w,K=s,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=g,U=N(_,f),z=x,B=$}}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=LQ($,k,D,c);_=TQ(n,x,k,D,h);let JZ=_;Z=d,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=N(s,g),U=f,z=x,B=JZ}}else{let e=T.head;if(e instanceof tQ){let c=t,d=P.tail,h=e,p=T.tail,s=gQ(x,h.mapper),_=$Z(k,D,h.key),ZZ=QV(!1,_,s,$,c.attributes,h.attributes,b,b),n,JZ,WQ;n=ZZ.added,JZ=ZZ.removed,WQ=ZZ.events;let eZ;if(n instanceof O&&JZ instanceof O)eZ=b;else eZ=F([Z9(n,JZ)]);let hQ=eZ,Y0;if(c.inner_html===h.inner_html)Y0=hQ;else Y0=N(pX(h.inner_html),hQ);let SQ=Y0,_Q;if(SQ instanceof O)_Q=f;else _Q=N(a6(D,0,SQ,F([])),f);let t9=_Q;Z=d,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=g,U=t9,z=x,B=WQ}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=LQ($,k,D,c);_=TQ(n,x,k,D,h);let JZ=_;Z=d,Q=w,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=C,M=k,H=N(s,g),U=f,z=x,B=JZ}}}}}}function S0(Z,Q,K){return Y9(F([Q]),kZ(),F([K]),kZ(),kZ(),0,0,0,0,P0,b,b,QZ,wX(Z))}var{setTimeout:rW,clearTimeout:M9}=globalThis,aW=(Z,Q)=>_Z().createElementNS(Z,Q),oW=(Z)=>_Z().createTextNode(Z),tW=()=>_Z().createDocumentFragment(),q0=(Z,Q,K)=>Z.insertBefore(Q,K),XV=KX?(Z,Q,K)=>Z.moveBefore(Q,K):q0,eW=(Z,Q)=>Z.removeChild(Q),Z5=(Z,Q)=>Z.getAttribute(Q),VV=(Z,Q,K)=>Z.setAttribute(Q,K),Q5=(Z,Q)=>Z.removeAttribute(Q),K5=(Z,Q,K,J)=>Z.addEventListener(Q,K,J),GV=(Z,Q,K)=>Z.removeEventListener(Q,K),J5=(Z,Q)=>Z.innerHTML=Q,X5=(Z,Q)=>Z.data=Q,PQ=Symbol("lustre");class MV{constructor(Z,Q,K,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=K,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===rZ?this.node.parentNode:this.node}}var AQ=(Z,Q,K,J,X)=>{let V=new MV(Z,Q,K,X);return K[PQ]=V,Q?.children.splice(J,0,V),V},V5=(Z)=>{let Q="";for(let K=Z[PQ];K.parent;K=K.parent)if(K.key)Q=`${Q8}${K.key}${Q}`;else{let J=K.parent.children.indexOf(K);Q=`${Q8}${J}${Q}`}return Q.slice(1)};class F9{#Z=null;#X;#K;#J=!1;constructor(Z,Q,K,{exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#K=K,this.#J=J}mount(Z){AQ(eQ,null,this.#Z,0,null),this.#j(this.#Z,null,this.#Z[PQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[PQ],patch:Z}),this.#V()}#Q=[];#V(){let Z=this.#Q;while(Z.length){let{node:Q,patch:K}=Z.pop(),{children:J}=Q,{changes:X,removed:V,children:G}=K;if(K0(X,(W)=>this.#G(Q,W)),V)this.#I(Q,J.length-V,V);K0(G,(W)=>{let Y=J[W.index|0];this.#Q.push({node:Y,patch:W})})}}#G(Z,Q){switch(Q.kind){case o6:this.#A(Z,Q);break;case t6:this.#O(Z,Q);break;case e6:this.#N(Z,Q);break;case Q9:this.#H(Z,Q);break;case K9:this.#D(Z,Q);break;case J9:this.#F(Z,Q);break;case X9:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:K}){let J=tW(),X=this.#M(Z,K);this.#z(J,null,Z,K|0,Q),q0(Z.parentNode,J,X)}#F(Z,{index:Q,with:K}){this.#I(Z,Q|0,1);let J=this.#M(Z,Q);this.#j(Z.parentNode,J,Z,Q|0,K)}#M(Z,Q){Q=Q|0;let{children:K}=Z,J=K.length;if(Q<J)return K[Q].node;let X=K[J-1];if(!X&&Z.kind!==rZ)return null;if(!X)X=Z;while(X.kind===rZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#H(Z,{key:Q,before:K}){K=K|0;let{children:J,parentNode:X}=Z,V=J[K].node,G=J[K];for(let H=K+1;H<J.length;++H){let U=J[H];if(J[H]=G,G=U,U.key===Q){J[K]=U;break}}let{kind:W,node:Y,children:M}=G;if(XV(X,Y,V),W===rZ)this.#W(X,M,V)}#W(Z,Q,K){for(let J=0;J<Q.length;++J){let{kind:X,node:V,children:G}=Q[J];if(XV(Z,V,K),X===rZ)this.#W(Z,G,K)}}#D(Z,{index:Q}){this.#I(Z,Q,1)}#I(Z,Q,K){let{children:J,parentNode:X}=Z,V=J.splice(Q,K);for(let G=0;G<V.length;++G){let{kind:W,node:Y,children:M}=V[G];if(eW(X,Y),this.#U(V[G]),W===rZ)V.push(...M)}}#U(Z){let{debouncers:Q,children:K}=Z;for(let{timeout:J}of Q.values())if(J)M9(J);Q.clear(),K0(K,(J)=>this.#U(J))}#N({node:Z,handlers:Q,throttles:K,debouncers:J},{added:X,removed:V}){K0(V,({name:G})=>{if(Q.delete(G))GV(Z,G,H9),this.#R(K,G,0),this.#R(J,G,0);else Q5(Z,G),YV[G]?.removed?.(Z,G)}),K0(X,(G)=>this.#P(Z,G))}#A({node:Z},{content:Q}){X5(Z,Q??"")}#O({node:Z},{inner_html:Q}){J5(Z,Q??"")}#z(Z,Q,K,J,X){K0(X,(V)=>this.#j(Z,Q,K,J++,V))}#j(Z,Q,K,J,X){switch(X.kind){case eQ:{let V=this.#L(K,J,X);this.#z(V,null,V[PQ],0,X.children),q0(Z,V,Q);break}case A0:{let V=this.#T(K,J,X);q0(Z,V,Q);break}case rZ:{let V=this.#T(K,J,X);q0(Z,V,Q),this.#z(Z,Q,V[PQ],0,X.children);break}case BX:{let V=this.#L(K,J,X);this.#O({node:V},X),q0(Z,V,Q);break}}}#L(Z,Q,{kind:K,key:J,tag:X,namespace:V,attributes:G}){let W=aW(V||n8,X);if(AQ(K,Z,W,Q,J),this.#J&&J)VV(W,"data-lustre-key",J);return K0(G,(Y)=>this.#P(W,Y)),W}#T(Z,Q,{kind:K,key:J,content:X}){let V=oW(X??"");return AQ(K,Z,V,Q,J),V}#P(Z,Q){let{debouncers:K,handlers:J,throttles:X}=Z[PQ],{kind:V,name:G,value:W,prevent_default:Y,debounce:M,throttle:H}=Q;switch(V){case L6:{let U=W??"";if(G==="virtual:defaultValue"){Z.defaultValue=U;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(U!==Z5(Z,G))VV(Z,G,U);YV[G]?.added?.(Z,U);break}case IX:Z[G]=W;break;case T6:{if(J.has(G))GV(Z,G,H9);let U=Y.kind===P6;K5(Z,G,H9,{passive:U}),this.#R(X,G,H),this.#R(K,G,M),J.set(G,(z)=>this.#B(Q,z));break}}}#R(Z,Q,K){let J=Z.get(Q);if(K>0)if(J)J.delay=K;else Z.set(Q,{delay:K});else if(J){let{timeout:X}=J;if(X)M9(X);Z.delete(Q)}}#B(Z,Q){let{currentTarget:K,type:J}=Q,{debouncers:X,throttles:V}=K[PQ],G=V5(K),{prevent_default:W,stop_propagation:Y,include:M}=Z;if(W.kind===B6)Q.preventDefault();if(Y.kind===B6)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let H=this.#X(Q,G,J,M),U=V.get(J);if(U){let B=Date.now(),P=U.last||0;if(B>P+U.delay)U.last=B,U.lastEvent=Q,this.#K(Q,H)}let z=X.get(J);if(z)M9(z.timeout),z.timeout=rW(()=>{if(Q===V.get(J)?.lastEvent)return;this.#K(Q,H)},z.delay);if(!U&&!z)this.#K(Q,H)}}var K0=(Z,Q)=>{if(Array.isArray(Z))for(let K=0;K<Z.length;K++)Q(Z[K]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},H9=(Z)=>{let{currentTarget:Q,type:K}=Z;Q[PQ].handlers.get(K)(Z)},WV=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},G5=(Z)=>{return{added(Q,K){Q[Z]=K}}},YV={checked:WV("checked"),selected:WV("selected"),value:G5("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function W5(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return[X,u(V)];else{let G=J.tail,W=J.head[0],Y=J.head[1],M=AX(W,Y),H;if(W==="")H=X;else H=oQ(X,W,M);let U=H,z=N(M,V);Z=G,Q=U,K=z}}}function I9(Z){return W5(Z,kZ(),b)}function U9(Z,Q,K){let J=I9(K),X,V;return X=J[0],V=J[1],J8("",QZ,"",Z,Q,V,X,!1,K8(Z,""))}function HV(Z,Q,K,J){let X=I9(J),V,G;return V=X[0],G=X[1],J8("",QZ,Z,Q,K,G,V,!1,K8(Q,Z))}function FV(Z){let Q=I9(Z),K,J;return K=Q[0],J=Q[1],f6("",QZ,J,K)}function N9(Z,Q){return U9("ul",Z,Q)}var IV=(Z)=>{let Q=AQ(eQ,null,Z,0,null),K=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(UV(G))K+=1;if(K===0){let G=_Z().createTextNode("");return AQ(A0,Q,G,0,null),Z.replaceChildren(G),X8()}if(K===1)return R9(Q,Z).head[1];let J=_Z().createTextNode(""),X=AQ(rZ,Q,J,0,null),V=R9(X,Z);return Z.insertBefore(J,Z.firstChild),FV(V)},UV=(Z)=>{switch(Z.nodeType){case i8:return!0;case j6:return!!Z.data;default:return!1}},M5=(Z,Q,K,J)=>{if(!UV(Q))return null;switch(Q.nodeType){case i8:{let X=AQ(eQ,Z,Q,J,K),V=Q.localName,G=Q.namespaceURI,W=!G||G===n8;if(W&&H5.includes(V))F5(V,Q);let Y=I5(Q),M=R9(X,Q);return W?U9(V,Y,M):HV(G,V,Y,M)}case j6:return AQ(A0,Z,Q,J,null),JK(Q.data);default:return null}},H5=["input","select","textarea"],F5=(Z,Q)=>{let{value:K,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!K)return;queueMicrotask(()=>{if(Q.value=K,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),_Z().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},R9=(Z,Q)=>{let K=null,J=Q.firstChild,X=null,V=0;while(J){let G=J.nodeType===i8?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let W=M5(Z,J,G,V),Y=J.nextSibling;if(W){let M=new gZ([G??"",W],null);if(X)X=X.tail=M;else X=K=M;V+=1}else Q.removeChild(J);J=Y}if(!X)return b;return X.tail=b,K},I5=(Z)=>{let Q=Z.attributes.length,K=b;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;K=new gZ(U5(J),K)}return K},U5=(Z)=>{let{localName:Q,value:K}=Z;return GQ(Q,K)};var fQ=()=>!!_Z();class MK{constructor(Z,[Q,K],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#K=X,this.root.addEventListener("context-request",(W)=>{if(!(W.context&&W.callback))return;if(!this.#G.has(W.context))return;W.stopImmediatePropagation();let Y=this.#G.get(W.context);if(W.subscribe){let M=()=>{Y.subscribers=Y.subscribers.filter((H)=>H!==W.callback)};Y.subscribers.push([W.callback,M]),W.callback(Y.value,M)}else W.callback(Y.value)});let V=(W,Y,M)=>c6(this.#Q,Y,M,W),G=(W,Y)=>{let[M,H]=p6(this.#Q,Y);if(this.#Q=M,H.isOk()){let U=H[0];if(U.stop_propagation)W.stopPropagation();if(U.prevent_default)W.preventDefault();this.dispatch(U.message,!1)}};this.#V=new F9(this.root,V,G),this.#J=IV(this.root),this.#Q=u6(),this.#U(K),this.#N()}root=null;dispatch(Z,Q=!1){if(this.#Y)this.#F.push(Z);else{let[K,J]=this.#K(this.#Z,Z);this.#Z=K,this.#I(J,Q)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#G.has(Z))this.#G.set(Z,{value:Q,subscribers:[]});else{let K=this.#G.get(Z);if(aZ(K.value,Q))return;K.value=Q;for(let J=K.subscribers.length-1;J>=0;J--){let[X,V]=K.subscribers[J];if(!X){K.subscribers.splice(J,1);continue}X(Q,V)}}}#Z;#X;#K;#J;#Q;#V;#G=new Map;#Y=!1;#F=[];#M=b;#H=b;#W=null;#D={dispatch:(Z)=>this.dispatch(Z),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#I(Z,Q=!1){if(this.#U(Z),!this.#W)if(Q)this.#W="sync",queueMicrotask(()=>this.#N());else this.#W=requestAnimationFrame(()=>this.#N())}#U(Z){this.#Y=!0;while(!0){for(let K=Z.synchronous;K.tail;K=K.tail)K.head(this.#D);if(this.#M=RV(this.#M,Z.before_paint),this.#H=RV(this.#H,Z.after_paint),!this.#F.length)break;let Q=this.#F.shift();[this.#Z,Z]=this.#K(this.#Z,Q)}this.#Y=!1}#N(){this.#W=null;let Z=this.#X(this.#Z),{patch:Q,events:K}=S0(this.#Q,this.#J,Z);if(this.#Q=K,this.#J=Z,this.#V.push(Q),this.#M instanceof gZ){let J=NV(this.#M);this.#M=b,queueMicrotask(()=>{this.#I(J,!0)})}if(this.#H instanceof gZ){let J=NV(this.#H);this.#H=b,requestAnimationFrame(()=>{this.#I(J,!0)})}}}var D9=(Z,Q)=>{Z.send(Q)};function NV(Z){return{synchronous:Z,after_paint:b,before_paint:b}}function RV(Z,Q){if(Z instanceof O)return Q;else if(Q instanceof O)return Z;else return uQ(Z,Q)}class j9 extends I{constructor(Z){super();this.message=Z}}class O9 extends I{constructor(Z){super();this.callback=Z}}class L9 extends I{constructor(Z){super();this.callback=Z}}class BQ extends I{constructor(Z){super();this.message=Z}}class J0 extends I{constructor(Z,Q){super();this.name=Z,this.data=Q}}class HK extends I{constructor(Z,Q){super();this.key=Z,this.value=Q}}class X0 extends I{}class zV extends I{constructor(Z,Q,K,J,X,V,G,W,Y,M){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=K,this.attributes=J,this.properties=X,this.contexts=V,this.is_form_associated=G,this.on_form_autofill=W,this.on_form_reset=Y,this.on_form_restore=M}}function jV(Z){let Q=new zV(!0,!0,!1,b,b,b,!1,l8,l8,l8);return IZ(Z,Q,(K,J)=>{return J.apply(K)})}class LV{#Z;constructor(Z,[Q,K],J,X){this.#Z=new MK(Z,[Q,K],X,J)}send(Z){switch(Z.constructor){case BQ:{this.dispatch(Z.message,!1);break}case J0:{this.emit(Z.name,Z.data);break}case X0:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,Q){this.#Z.emit(Z,Q)}}var TV=({init:Z,update:Q,view:K},J,X)=>{if(!fQ())return new L(new M8);let V=J instanceof HTMLElement?J:_Z().querySelector(J);if(!V)return new L(new T9(J));return new R(new LV(V,Z(X),Q,K))};class N5{#Z;#X;#K;#J;#Q;#V;#G=$Q();#Y=new Set;constructor([Z,Q],K,J,X){this.#Z=Z,this.#X=K,this.#K=J,this.#J=X,this.#Q=this.#K(this.#Z),this.#V=d6(this.#Q),this.#W(Q)}send(Z){switch(Z.constructor){case j9:{let{message:Q}=Z,K=this.#F(Q),J=S0(this.#V,this.#Q,K);this.#Q=K,this.#V=J.events,this.broadcast(W9(J.patch));return}case O9:{let{callback:Q}=Z;this.#Y.add(Q),Q(oX(this.#J.open_shadow_root,this.#J.adopt_styles,b0(this.#J.attributes),b0(this.#J.properties),b0(this.#J.contexts),this.#G,this.#Q));return}case L9:{let{callback:Q}=Z;this.#Y.delete(Q);return}case BQ:{let{message:Q}=Z,[K,J]=this.#X(this.#Z,Q),X=this.#K(K),V=S0(this.#V,this.#Q,X);this.#W(J),this.#Z=K,this.#Q=X,this.#V=V.events,this.broadcast(W9(V.patch));return}case J0:{let{name:Q,data:K}=Z;this.broadcast(tX(Q,K));return}case HK:{let{key:Q,value:K}=Z,J=HQ(this.#G,Q);if(J.isOk()&&aZ(J[0],K))return;this.#G=g0(this.#G,Q,K),this.broadcast(eX(Q,K));return}case X0:{this.#Z=null,this.#X=null,this.#K=null,this.#J=null,this.#Q=null,this.#V=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#F(Z){switch(Z.constructor){case XK:{let{messages:Q}=Z,K=this.#Z,J=o();for(let X=Q;X.head;X=X.tail){let V=this.#F(X.head);if(V instanceof R){K=V[0][0],J=t8(MZ.fromArray([J,V[0][1]]));break}}return this.#W(J),this.#Z=K,this.#K(this.#Z)}case VK:{let{name:Q,value:K}=Z,J=this.#M(Q,K);if(J instanceof L)return this.#Q;else{let[X,V]=this.#X(this.#Z,J[0]);return this.#W(V),this.#Z=X,this.#K(this.#Z)}}case GK:{let{name:Q,value:K}=Z,J=this.#H(Q,K);if(J instanceof L)return this.#Q;else{let[X,V]=this.#X(this.#Z,J[0]);return this.#W(V),this.#Z=X,this.#K(this.#Z)}}case WK:{let{path:Q,name:K,event:J}=Z,[X,V]=QK(this.#V,Q,K,J);if(this.#V=X,V instanceof L)return this.#Q;else{let[G,W]=this.#X(this.#Z,V[0].message);return this.#W(W),this.#Z=G,this.#K(this.#Z)}}case G9:{let{key:Q,value:K}=Z,J=HQ(this.#J.contexts,Q);if(J instanceof L)return this.#Q;if(J=IQ(K,J[0]),J instanceof L)return this.#Q;let[X,V]=this.#X(this.#Z,J[0]);return this.#W(V),this.#Z=X,this.#K(this.#Z)}}}#M(Z,Q){let K=HQ(this.#J.attributes,Z);switch(K.constructor){case R:return K[0](Q);case L:return new L(void 0)}}#H(Z,Q){let K=HQ(this.#J.properties,Z);switch(K.constructor){case R:return K[0](Q);case L:return new L(void 0)}}#W(Z){let Q=(G)=>this.send(new BQ(G)),K=(G,W)=>this.send(new J0(G,W)),J=()=>{return},X=()=>{return},V=(G,W)=>this.send(new HK(G,W));globalThis.queueMicrotask(()=>{zX(Z,Q,K,J,X,V)})}}class PV extends I{constructor(Z,Q,K,J){super();this.init=Z,this.update=Q,this.view=K,this.config=J}}class T9 extends I{constructor(Z){super();this.selector=Z}}class M8 extends I{}function AV(Z,Q,K){return new PV(Z,Q,K,jV(b))}function BV(Z){return new BQ(Z)}function SV(Z,Q,K){return xQ(!fQ(),new L(new M8),()=>{return TV(Z,Q,K)})}var z5={handle_external_links:!1,handle_internal_links:!0},xV=globalThis?.window?.location?.href,B9=()=>{if(!xV)return new L(void 0);else return new R(A9(new URL(xV)))},S9=(Z,Q=z5)=>{document.addEventListener("click",(K)=>{let J=yV(K.target);if(!J)return;try{let X=new URL(J.href),V=A9(X),G=X.host!==window.location.host||J.target==="_blank";if(!Q.handle_external_links&&G)return;if(!Q.handle_internal_links&&!G)return;if(K.preventDefault(),!G)window.history.pushState({},"",J.href),window.requestAnimationFrame(()=>{if(X.hash)document.getElementById(X.hash.slice(1))?.scrollIntoView();else window.scrollTo(0,0)});return Z(V)}catch{return}}),window.addEventListener("popstate",(K)=>{K.preventDefault();let J=new URL(window.location.href),X=A9(J);window.requestAnimationFrame(()=>{if(J.hash)document.getElementById(J.hash.slice(1))?.scrollIntoView();else window.scrollTo(0,0)}),Z(X)}),window.addEventListener("modem-push",({detail:K})=>{Z(K)}),window.addEventListener("modem-replace",({detail:K})=>{Z(K)})},kV=(Z)=>{window.history.pushState({},"",g8(Z)),window.requestAnimationFrame(()=>{if(Z.fragment[0])document.getElementById(Z.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:Z}))};var yV=(Z)=>{if(!Z||Z.tagName==="BODY")return null;else if(Z.tagName==="A")return Z;else return yV(Z.parentElement)},A9=(Z)=>{return new v(Z.protocol?new j(Z.protocol.slice(0,-1)):new q,new q,Z.hostname?new j(Z.hostname):new q,Z.port?new j(Number(Z.port)):new q,Z.pathname,Z.search?new j(Z.search.slice(1)):new q,Z.hash?new j(Z.hash.slice(1)):new q)};function bV(Z){return T0((Q)=>{return xQ(!fQ(),void 0,()=>{return S9((K)=>{let X=Z(K);return Q(X)})})})}function gV(Z){if(Z==="")return new q;else return new j(Z)}var FK=new v(new q,new q,new q,new q,"",new q,new q);function H8(Z,Q,K){return T0((J)=>{return xQ(!fQ(),void 0,()=>{return kV(new v(FK.scheme,FK.userinfo,FK.host,FK.port,Z,x0(Q,gV),x0(K,gV)))})})}function q9(Z,Q){return Q in Z?new R(Z[Q]):new L(void 0)}class V0{constructor(Z){this.promise=Z}static wrap(Z){return Z instanceof Promise?new V0(Z):Z}static unwrap(Z){return Z instanceof V0?Z.promise:Z}}function IK(Z){return Promise.resolve(V0.wrap(Z))}function fV(Z,Q){return Z.then((K)=>Q(V0.unwrap(K)))}function F8(Z,Q){return Z.then((K)=>V0.wrap(Q(V0.unwrap(K))))}function vV(Z,Q){return F8(Z,(J)=>{return Q(J),J})}function UK(Z,Q){return fV(Z,(J)=>{if(J instanceof R){let X=J[0];return Q(X)}else{let X=J[0];return IK(new L(X))}})}function C9(Z,Q){return document.addEventListener(Z,Q)}function C0(Z){let Q=document.getElementById(Z);if(!Q)return new L;return new R(Q)}function hV(Z){if(Z instanceof Element)return new R(Z);else return new L}function w9(Z){Z.scrollIntoView({behavior:"smooth",block:"nearest"})}function NK(Z,Q){return Z.contains(Q)}function E9(Z){return Z.target}function _V(Z){let Q=hV(Z);if(Q instanceof R)return Q;else return new L(new sZ("Element",dZ(Z),F([])))}class DK extends I{}class k9 extends I{}class $V extends I{}class uV extends I{}class cV extends I{}class pV extends I{}class dV extends I{}class sV extends I{}class nV extends I{}class y9 extends I{}class zK extends I{}function iV(Z){if(Z instanceof DK)return"GET";else if(Z instanceof k9)return"POST";else if(Z instanceof $V)return"HEAD";else if(Z instanceof uV)return"PUT";else if(Z instanceof cV)return"DELETE";else if(Z instanceof pV)return"TRACE";else if(Z instanceof dV)return"CONNECT";else if(Z instanceof sV)return"OPTIONS";else if(Z instanceof nV)return"PATCH";else return Z[0]}function lV(Z){if(Z instanceof y9)return"http";else return"https"}function rV(Z){let Q=hZ(Z);if(Q==="http")return new R(new y9);else if(Q==="https")return new R(new zK);else return new L(void 0)}class oV extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.method=Z,this.headers=Q,this.body=K,this.scheme=J,this.host=X,this.port=V,this.path=G,this.query=W}}function tV(Z){return new v(new j(lV(Z.scheme)),new q,new j(Z.host),Z.port,Z.path,Z.query,new q)}function eV(Z){return GZ((()=>{let Q=Z.scheme,K=ZQ(Q,"");return rV(K)})(),(Q)=>{return GZ((()=>{let K=Z.host;return hK(K,void 0)})(),(K)=>{let J=new oV(new DK,F([]),"",Q,K,Z.port,Z.path,Z.query);return new R(J)})})}class g9 extends I{constructor(Z,Q,K){super();this.status=Z,this.headers=Q,this.body=K}}function Q7(Z,Q){return eK(Z.headers,hZ(Q))}async function J7(Z){try{return new R(await fetch(Z))}catch(Q){return new L(new N8(Q.toString()))}}function X7(Z){return new g9(Z.status,MZ.fromArray([...Z.headers]),Z)}function S5(Z){let Q=g8(tV(Z)),K=iV(Z.method).toUpperCase(),J={headers:q5(Z.headers),method:K};return[Q,J]}function V7(Z){let[Q,K]=S5(Z);if(K.method!=="GET"&&K.method!=="HEAD")K.body=Z.body;return new globalThis.Request(Q,K)}function q5(Z){let Q=new globalThis.Headers;for(let[K,J]of Z)Q.append(K.toLowerCase(),J);return Q}async function b9(Z){let Q;try{Q=await Z.body.text()}catch(K){return new L(new R8)}return new R(Z.withFields({body:Q}))}class N8 extends I{constructor(Z){super();this[0]=Z}}class R8 extends I{}function G7(Z){let K=V7(Z),J=J7(K);return UK(J,(X)=>{return IK(new R(X7(X)))})}var f9=(Z)=>{if(!globalThis.location)return new L(void 0);let Q=new URL(Z,globalThis.location.href),K=E5(Q);return new R(K)},E5=(Z)=>{let Q=(K)=>K?new j(K):new q;return new v(Q(Z.protocol?.slice(0,-1)),new q,Q(Z.hostname),Q(Z.port&&Number(Z.port)),Z.pathname,Q(Z.search?.slice(1)),Q(Z.hash?.slice(1)))};class v9 extends I{}class h9 extends I{constructor(Z){super();this[0]=Z}}class Y7 extends I{constructor(Z){super();this[0]=Z}}class M7 extends I{constructor(Z){super();this[0]=Z}}class H7 extends I{}class OK extends I{constructor(Z){super();this[0]=Z}}class F7 extends I{constructor(Z){super();this.run=Z}}function x5(Z){return new F7((Q)=>{return Z(GZ(Q,(K)=>{let J=K.status,X=J;if(X>=200&&X<300)return new R(K);else{let V=J;if(V>=400&&V<600)return new L(new Y7(K));else return new L(new OK(K))}}))})}function k5(Z){return x5((Q)=>{return Z(GZ(Q,(K)=>{let J=Q7(K,"content-type");if(J instanceof R){let X=J[0];if(X==="application/json")return new R(K);else if(X.startsWith("application/json;"))return new R(K);else return new L(new OK(K))}else return new L(new OK(K))}))})}function y5(Z,Q){return T0((K)=>{let J=G7(Z),X=UK(J,b9),V=F8(X,(W)=>{return D0(W,(Y)=>{if(Y instanceof N8)return new H7;else if(Y instanceof R8)return new v9;else return new v9})}),G=F8(V,Q.run);vV(G,K);return})}function g5(Z,Q){return y5(Z,Q)}function W7(Z,Q){return T0((K)=>{let J=new L(Z),X=Q.run(J);return K(X)})}function b5(Z,Q){let K=Z.body,J=z6(K,Q);return D0(J,(X)=>{return new M7(X)})}function D8(Z,Q){return k5((K)=>{let X=GZ(K,(V)=>{return b5(V,Z)});return Q(X)})}function f5(Z){let Q;if(Z.startsWith("./"))Q=f9(Z);else if(Z.startsWith("/"))Q=f9(Z);else Q=b8(Z);return c0(Q,new h9(Z))}function z8(Z,Q){let K=f5(Z);if(K instanceof R){let J=K[0],X=eV(J),V=UQ(X,(W)=>{return g5(W,Q)}),G=D0(V,(W)=>{return W7(new h9(Z),Q)});return fJ(G)}else{let J=K[0];return W7(J,Q)}}class j8 extends I{}class vQ extends I{constructor(Z,Q){super();this[0]=Z,this[1]=Q}}function _9(Z){let Q=u(Z),K;K=h0(Q,(V)=>{if(V[0]==="p"){let W=V[1];return GZ(w8(pQ(W)),(Y)=>{return new R(new vQ(Y,new q))})}else return new L(void 0)});let X=K;if(X instanceof R){let V=X[0];if(V instanceof vQ)if(V[1]instanceof q){let W=V[0],Y,H=h0(Q,(z)=>{if(z[0]==="w"){let P=z[1];return w8(pQ(P))}else return new L(void 0)});return Y=bZ(H),new vQ(W,Y)}else return V;else return V}else return new j8}class LK extends I{constructor(Z,Q){super();this.name=Z,this.code=Q}}class TK extends I{constructor(Z,Q,K){super();this.name=Z,this.code=Q,this.province_code=K}}class O8 extends I{}class PK extends I{}class AK extends I{}class G0 extends I{}class m9 extends I{}class BK extends I{}class SK extends I{}class qK extends I{constructor(Z){super();this[0]=Z}}class CK extends I{constructor(Z){super();this[0]=Z}}class wK extends I{constructor(Z){super();this[0]=Z}}class EK extends I{}class xK extends I{}class kK extends I{constructor(Z){super();this[0]=Z}}class yK extends I{constructor(Z){super();this[0]=Z}}class gK extends I{constructor(Z){super();this[0]=Z}}class L8 extends I{constructor(Z){super();this[0]=Z}}class T8 extends I{constructor(Z){super();this[0]=Z}}class P8 extends I{constructor(Z){super();this[0]=Z}}class A8 extends I{constructor(Z){super();this[0]=Z}}class bK extends I{constructor(Z){super();this[0]=Z}}class $9 extends I{constructor(Z){super();this[0]=Z}}class KZ extends I{constructor(Z,Q,K,J,X){super();this.is_shown=Z,this.filter_text=Q,this.filtered_items=K,this.selected_item=J,this.focused_index=X}}function B8(){return new KZ(!1,"",rJ(),new q,0)}function N7(){let Z="https://provinces.open-api.vn/api/v2/p/",Q=AZ("name",nZ,(J)=>{return AZ("code",qQ,(X)=>{return PZ(new LK(J,X))})}),K=D8(dQ(Q),(J)=>{return new L8(J)});return z8(Z,K)}function R7(Z){let Q="https://provinces.open-api.vn/api/v2/p/?"+iQ(F([["search",Z]])),K=AZ("name",nZ,(X)=>{return AZ("code",qQ,(V)=>{return PZ(new LK(X,V))})}),J=D8(dQ(K),(X)=>{return new T8(X)});return z8(Q,J)}function c9(Z){let Q="https://provinces.open-api.vn/api/v2/p/"+a(Z)+"?depth=2",K=AZ("name",nZ,(V)=>{return AZ("code",qQ,(G)=>{return PZ(new TK(V,G,Z))})}),J=AZ("wards",dQ(K),(V)=>{return PZ(V)}),X=D8(J,(V)=>{return new P8(V)});return z8(Q,X)}function D7(Z,Q){let K="https://provinces.open-api.vn/api/v2/w/?"+iQ(F([["search",Z],["province",a(Q)]])),J=AZ("name",nZ,(V)=>{return AZ("code",qQ,(G)=>{return AZ("province_code",qQ,(W)=>{return PZ(new TK(V,G,W))})})}),X=D8(dQ(J),(V)=>{return new A8(V)});return z8(K,X)}function W0(Z,Q){return UX(Z,m0(Q,(K)=>{return new r0(!1,!1,K)}),b,A6,A6,0,0)}function p9(Z,Q){if(Z instanceof OZ)return new OZ(Z.kind,Z.name,Z.handler,Z.include,Z.prevent_default,Z.stop_propagation,x8(0,Q),Z.throttle);else return Z}function d9(Z){return W0("click",PZ(Z))}function s9(Z){return W0("input",J6(F(["target","value"]),nZ,(Q)=>{return PZ(Z(Q))}))}function n9(Z){return W0("focus",PZ(Z))}function z7(Z,Q){if(Z)return Q();else return Z}function i9(Z,Q){return Array.from(Z.querySelectorAll(Q))}function l9(Z,Q){let K=Z.getBoundingClientRect(),J=Q.getBoundingClientRect(),X=K.top-J.top,V=Q.clientHeight<=X+K.height,G=X<0;return V||G}class fK extends I{constructor(Z,Q,K,J,X){super();this.text_input=Z,this.choice_click=Q,this.input_focus=K,this.clear_click=J,this.option_navigate=X}}function j7(Z){return s6(F([m("max-w-md mt-8")]),F([V8(F([m("font-semibold text-lg")]),F([qZ(Z.name)])),V8(F([m("flex")]),F([G8(F([m("block")]),F([qZ("Mã số:")])),G8(F([m("block flex-grow text-end")]),F([qZ(a(Z.code))]))]))]))}function O7(Z){return s6(F([m("max-w-md mt-8")]),F([V8(F([m("font-semibold text-lg")]),F([qZ(Z.name)])),V8(F([m("flex")]),F([G8(F([m("block")]),F([qZ("Mã số:")])),G8(F([m("block flex-grow text-end")]),F([qZ(a(Z.code))]))]))]))}function L7(Z,Q){return W0("keyup",AZ("key",nZ,(K)=>{let J;if(K==="ArrowUp")J=new j(Z.option_navigate(new G0));else if(K==="ArrowDown")J=new j(Z.option_navigate(new m9));else if(K==="Enter")J=SZ(Q,Z.choice_click);else J=new q;let G=SZ(J,(W)=>{return PZ(W)});return JJ(G,()=>{return K6(Z.option_navigate(new G0),"SlideDir")})}))}function r9(Z,Q){return xQ(Q<=0,o(),()=>{return jX((K,J)=>{let X=Q-1,V=C0(Z),G,Y=UQ(V,(H)=>{return i9(H,"li")});G=GZ(Y,(H)=>{return q9(H,X)});let M=G;if(V instanceof R&&M instanceof R){let H=V[0],U=M[0];z7(l9(U,H),()=>{return w9(U),!0})}return})})}var T7="border focus-visible:outline-none focus-visible:ring-1 ps-2 pe-6 py-1 w-full rounded",P7="w-full text-start px-2 py-1.5 rounded cursor-pointer",A7="hover:bg-neutral-200 dark:hover:bg-neutral-600",$5="vn-focus",B7="bg-slate-200 dark:bg-slate-600 "+$5,S7="absolute end-0 px-2 text-xl hover:text-red-400 focus:text-red-400 hover:dark:text-red-400 cursor-pointer",q7="absolute z-1 top-10 start-0 end-0 sm:-end-4 py-2 ps-2 bg-neutral-50 dark:bg-neutral-800 rounded shadow";function C7(Z,Q,K){let J,X,V,G,W;J=Q.is_shown,X=Q.filter_text,V=Q.filtered_items,G=Q.selected_item,W=Q.focused_index;let Y;Y=I6(V,(S,y)=>{let D=W0("click",PZ(K.choice_click(S))),C;if(G instanceof j){let $=G[0];if(l($,S))C="✓ ";else C=""}else C="";let k=C,g,f=W;if(f>0&&f===y+1)g=!0;else g=!1;let x=g;return[a(S.code),n6(F([aQ("option")]),F([W8(F([a0(F([[P7,!0],[B7,x],[A7,!x]])),D]),F([qZ(k+S.name)]))]))]});let H=Y,U,z=s9(K.text_input);U=p9(z,200);let B=U,P,T=W-1;if(T>=0){let y=F6(V,T);P=bZ(y)}else P=new q;let A=L7(K,P);return tZ(F([S6(Z),m("relative")]),F([i6(F([q6("search"),m(T7),aQ("combobox"),C6(X),B,n9(K.input_focus),A])),W8(F([m(S7),E6("Close"),w6(!0),d9(K.clear_click)]),F([qZ("⨯")])),tZ(F([m(q7),a0(F([["hidden",!J]]))]),F([tZ(F([m("max-h-40 overflow-y-auto")]),F([N9(F([m("pe-2"),aQ("listbox")]),U6(H))]))]))]))}function w7(Z,Q,K){let J,X,V,G,W;J=Q.is_shown,X=Q.filter_text,V=Q.filtered_items,G=Q.selected_item,W=Q.focused_index;let Y;Y=I6(V,(S,y)=>{let D=W0("click",PZ(K.choice_click(S))),C;if(G instanceof j){let $=G[0];if(l($,S))C="✓ ";else C=""}else C="";let k=C,g,f=W;if(f>0&&f===y+1)g=!0;else g=!1;let x=g;return[a(S.code),n6(F([aQ("option")]),F([W8(F([a0(F([[P7,!0],[B7,x],[A7,!x]])),D]),F([qZ(k+S.name)]))]))]});let H=Y,U,z=s9(K.text_input);U=p9(z,200);let B=U,P,T=W-1;if(T>=0){let y=F6(V,T);P=bZ(y)}else P=new q;let A=L7(K,P);return tZ(F([S6(Z),m("relative")]),F([i6(F([q6("search"),m(T7),aQ("combobox"),C6(X),B,n9(K.input_focus),A])),W8(F([m(S7),E6("Close"),w6(!0),d9(K.clear_click)]),F([qZ("⨯")])),tZ(F([m(q7),a0(F([["hidden",!J]]))]),F([tZ(F([m("max-h-40 overflow-y-auto")]),F([N9(F([m("pe-2"),aQ("listbox")]),U6(H))]))]))]))}var c5="src/vn_provinces_demo.gleam";class DZ extends I{constructor(Z,Q,K,J,X){super();this.route=Z,this.provinces=Q,this.wards=K,this.province_combobox_state=J,this.ward_combobox_state=X}}function p5(Z){let Q,K=Z.query,J=SZ(K,(W)=>{return bZ($0(W))}),X=_K(J),V=ZQ(X,F([]));return Q=_9(V),new bK(Q)}function d5(Z){let Q,K=B9(),J=bZ(K),X=x0(J,(U)=>{return U.query}),V=SZ(X,(U)=>{return bZ($0(U))}),G=_K(V);Q=ZQ(G,F([]));let Y=_9(Q),M=new DZ(Y,F([]),F([]),B8(),B8()),H=t8(F([bV(p5),N7()]));return[M,H]}function s5(Z,Q){let K,J=Q.route;if(J instanceof vQ){let z=J[0],B=v0(Z,(P)=>{return P.code===z});if(B instanceof R){let P=B[0];K=[new j(P),c9(P.code)]}else K=[new q,o()]}else K=[new q,o()];let X=K,V,G;V=X[0],G=X[1];let W;if(V instanceof j){let z=V[0];W=[z.name,l0(z)]}else W=["",VQ(Z)];let Y=W,M,H;return M=Y[0],H=Y[1],[new DZ(Q.route,Z,F([]),(()=>{let z=Q.province_combobox_state;return new KZ(z.is_shown,M,H,V,z.focused_index)})(),Q.ward_combobox_state),G]}function n5(Z,Q){let K,J=Q.route;if(J instanceof vQ){let H=J[1];if(H instanceof j){let U=H[0],B=v0(Z,(P)=>{return P.code===U});K=bZ(B)}else K=new q}else K=new q;let X=K,V;if(X instanceof j){let H=X[0];V=[H.name,l0(H)]}else V=["",VQ(Z)];let G=V,W,Y;return W=G[0],Y=G[1],[new DZ(Q.route,Q.provinces,Z,Q.province_combobox_state,(()=>{let H=Q.ward_combobox_state;return new KZ(H.is_shown,W,Y,X,H.focused_index)})()),o()]}function i5(Z,Q,K,J){let X,V,G;X=J.route,V=J.provinces,G=J.wards;let W=v0(V,(x)=>{return x.code===Q}),Y;if(W instanceof R){let x=W[0];Y=l0(x)}else Y=VQ(V);let M=Y,H;if(K instanceof j){let x=K[0],CZ=v0(G,(BZ)=>{return BZ.code===x});H=bZ(CZ)}else H=new q;let U=H,z;if(U instanceof j){let x=U[0];z=l0(x)}else z=VQ(G);let B=z,P;if(X instanceof j8)P=[new q,new q];else{let x=X[0],$=X[1];P=[new j(x),$]}let w=P,T;T=w[0];let E;if(W instanceof R)if(T instanceof j){let x=W[0],$=T[0];if(x.code!==$)E=new j(x.code);else E=new q}else{let x=W[0];E=new j(x.code)}else E=new q;let A=E,S;if(A instanceof j){let x=A[0];S=c9(x)}else S=o();let y=S,D,k=SZ(U,(x)=>{return x.name});D=ZQ(k,"");let g=D;return[new DZ(Z,J.provinces,J.wards,(()=>{let x=J.province_combobox_state;return new KZ(x.is_shown,x.filter_text,M,bZ(W),x.focused_index)})(),(()=>{let x=J.ward_combobox_state;return new KZ(x.is_shown,g,B,U,x.focused_index)})()),y]}var a9="province-combobox",o9="ward-combobox";function l5(Z){return GZ(_V(E9(Z)),(Q)=>{let K,J=C0(a9),X=UQ(J,(w)=>{return NK(Q,w)});K=u0(X,!0);let V=K,G,W=C0(o9),Y=UQ(W,(w)=>{return NK(Q,w)});G=u0(Y,!0);let M=G,H,U;if(V)if(M)U=new j(new O8);else U=new j(new PK);else if(M)U=new j(new AK);else U=new q;let B=SZ(U,(w)=>{return new $9(w)});return H=SZ(B,BV),new R(H)})}function r5(Z,Q){if(Q instanceof BK)return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let J=Z.province_combobox_state;return new KZ(!0,J.filter_text,J.filtered_items,J.selected_item,J.focused_index)})(),Z.ward_combobox_state),o()];else if(Q instanceof SK)return[Z,H8(".",new j(""),new q)];else if(Q instanceof qK){let K=Q[0],J=Z.provinces,X=Z.province_combobox_state.filtered_items,V,G=pQ(K);if(G==="")V=[VQ(J),o()];else V=[X,R7(G)];let W=V,Y,M;return Y=W[0],M=W[1],[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let U=Z.province_combobox_state;return new KZ(U.is_shown,K,Y,U.selected_item,U.focused_index)})(),Z.ward_combobox_state),M]}else if(Q instanceof CK){let K=Q[0],J=Z.province_combobox_state.filtered_items,X=Z.province_combobox_state.focused_index,V;if(K instanceof G0)V=X-1;else V=X+1;let W=V6(V,0,H6(J));return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let M=Z.province_combobox_state;return new KZ(M.is_shown,M.filter_text,M.filtered_items,M.selected_item,W)})(),Z.ward_combobox_state),r9(a9,W)]}else if(Q instanceof wK){let K=Q[0],J=new DZ(Z.route,Z.provinces,Z.wards,(()=>{let V=Z.province_combobox_state;return new KZ(!1,K.name,V.filtered_items,new j(K),V.focused_index)})(),Z.ward_combobox_state),X=iQ(F([["p",a(K.code)]]));return[J,H8("",new j(X),new q)]}else if(Q instanceof EK)return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let J=Z.ward_combobox_state;return new KZ(!0,J.filter_text,J.filtered_items,J.selected_item,J.focused_index)})()),o()];else if(Q instanceof xK){let K,J=Z.province_combobox_state.selected_item;return K=SZ(J,(V)=>{return iQ(F([["p",a(V.code)]]))}),[Z,H8(".",K,new q)]}else if(Q instanceof kK){let K=Q[0],J=Z.wards,X=Z.province_combobox_state.selected_item,V=Z.ward_combobox_state.filtered_items,G,W=pQ(K);if(W==="")G=[VQ(J),o()];else{let z=W,B,w=SZ(X,(E)=>{return E.code});B=ZQ(w,0),G=[V,D7(z,B)]}let Y=G,M,H;return M=Y[0],H=Y[1],[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let z=Z.ward_combobox_state;return new KZ(z.is_shown,K,M,z.selected_item,z.focused_index)})()),H]}else if(Q instanceof yK){let K=Q[0],J=Z.ward_combobox_state.focused_index,X=Z.ward_combobox_state.filtered_items,V;if(K instanceof G0)V=J-1;else V=J+1;let W=V6(V,0,H6(X));return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let M=Z.ward_combobox_state;return new KZ(M.is_shown,M.filter_text,M.filtered_items,M.selected_item,W)})()),r9(o9,W)]}else if(Q instanceof gK){let K=Q[0],J=new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let Y=Z.ward_combobox_state;return new KZ(!1,K.name,Y.filtered_items,new j(K),Y.focused_index)})()),X=["w",a(K.code)],V,G=J.route;if(G instanceof vQ){let Y=G[0];V=F([["p",a(Y)],X])}else V=F([X]);return[J,H8("",new j(iQ(V)),new q)]}else if(Q instanceof L8){let K=Q[0];if(K instanceof R){let J=K[0];return s5(J,Z)}else return[Z,o()]}else if(Q instanceof T8){let K=Q[0];if(K instanceof R){let J=K[0];return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let V=Z.province_combobox_state;return new KZ(V.is_shown,V.filter_text,VQ(J),V.selected_item,V.focused_index)})(),Z.ward_combobox_state),o()]}else return[Z,o()]}else if(Q instanceof P8){let K=Q[0];if(K instanceof R){let J=K[0];return n5(J,Z)}else return[Z,o()]}else if(Q instanceof A8){let K=Q[0];if(K instanceof R){let J=K[0];return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let V=Z.ward_combobox_state;return new KZ(V.is_shown,V.filter_text,VQ(J),V.selected_item,V.focused_index)})()),o()]}else return[Z,o()]}else if(Q instanceof bK){let K=Q[0];if(K instanceof j8)return[new DZ(K,Z.provinces,F([]),(()=>{let X=B8();return new KZ(X.is_shown,X.filter_text,VQ(Z.provinces),X.selected_item,X.focused_index)})(),B8()),o()];else{let J=K[0],X=K[1];return i5(K,J,X,Z)}}else{let K=Q[0],J;if(K instanceof O8)J=!0;else if(K instanceof PK)J=!0;else J=!1;let X=J,V;if(K instanceof O8)V=!0;else if(K instanceof AK)V=!0;else V=!1;let G=V;return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let Y=Z.province_combobox_state;return new KZ(!X,Y.filter_text,Y.filtered_items,Y.selected_item,Y.focused_index)})(),(()=>{let Y=Z.ward_combobox_state;return new KZ(!G,Y.filter_text,Y.filtered_items,Y.selected_item,Y.focused_index)})()),o()]}}function a5(Z){let Q=Z.province_combobox_state.selected_item,K=Z.ward_combobox_state.selected_item,J=new fK((W)=>{return new qK(W)},(W)=>{return new wK(W)},new BK,new SK,(W)=>{return new CK(W)}),X=C7(a9,Z.province_combobox_state,J),V=new fK((W)=>{return new kK(W)},(W)=>{return new gK(W)},new EK,new xK,(W)=>{return new yK(W)}),G=w7(o9,Z.ward_combobox_state,V);return bX(F([m("grow")]),F([tZ(F([m("space-y-8 sm:flex sm:flex-row sm:space-x-8 sm:space-y-0")]),F([tZ(F([]),F([l6(F([m("text-lg")]),F([qZ("Tỉnh thành")])),X,(()=>{let Y=SZ(Q,j7);return ZQ(Y,X8())})()])),tZ(F([]),F([l6(F([m("text-lg")]),F([qZ("Phường xã")])),G,(()=>{let Y=SZ(K,O7);return ZQ(Y,X8())})()]))]))]))}function E7(){let Z=AV(d5,r5,a5),Q=SV(Z,"#app",void 0),K;if(Q instanceof R)K=Q[0];else throw F0("let_assert",c5,"vn_provinces_demo",52,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:1525,end:1580,pattern_start:1536,pattern_end:1547});return C9("click",(J)=>{let X=l5(J);if(X instanceof R){let V=X[0];if(V instanceof j){let G=V[0];return D9(K,G)}else return}else return})}E7();

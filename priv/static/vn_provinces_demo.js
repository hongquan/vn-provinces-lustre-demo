class I{withFields(Z){let Q=Object.keys(this).map((K)=>(K in Z)?Z[K]:this[K]);return new this.constructor(...Q)}}class MZ{static fromArray(Z,Q){let K=Q||new O;for(let J=Z.length-1;J>=0;--J)K=new bZ(Z[J],K);return K}[Symbol.iterator](){return new ZJ(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof O}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function U(Z,Q){return new bZ(Z,Q)}function F(Z,Q){return MZ.fromArray(Z,Q)}class ZJ{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof O)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class O extends MZ{}class bZ extends MZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class k0{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,K){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=K??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return x0(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let K=this.bitSize%8;if(K){let J=8-K;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=x0(this.rawBuffer,this.bitOffset,J),V=x0(Z.rawBuffer,Z.bitOffset,J);if(X!==V)return!1}let K=this.bitSize%8;if(K){let J=x0(this.rawBuffer,this.bitOffset,Q),X=x0(Z.rawBuffer,Z.bitOffset,Q),V=8-K;if(J>>V!==X>>V)return!1}}return!0}get buffer(){if(t9("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(t9("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function x0(Z,Q,K){if(Q===0)return Z[K]??0;else{let J=Z[K]<<Q&255,X=Z[K+1]>>8-Q;return J|X}}class hK{constructor(Z){this.value=Z}}var o9={};function t9(Z,Q){if(o9[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),o9[Z]=!0}class M0 extends I{static isResult(Z){return Z instanceof M0}}class N extends M0{constructor(Z){super();this[0]=Z}isOk(){return!0}}class T extends M0{constructor(Z){super();this[0]=Z}isOk(){return!1}}function i(Z,Q){let K=[Z,Q];while(K.length){let J=K.pop(),X=K.pop();if(J===X)continue;if(!e9(J)||!e9(X))return!1;if(!b7(J,X)||C7(J,X)||w7(J,X)||E7(J,X)||x7(J,X)||k7(J,X)||y7(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[W,Y]=q7(J),M=W(J),H=W(X);if(M.length!==H.length)return!1;for(let R of M)K.push(Y(J,R),Y(X,R))}return!0}function q7(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,K)=>Q.get(K)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(K)=>[...Q,...Object.keys(K)],(K,J)=>K[J]]}}function C7(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function w7(Z,Q){return!(Z instanceof k0)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((K,J)=>K===Q[J]))}function E7(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function x7(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function k7(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((K)=>!Q.has(K)))}function y7(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function e9(Z){return typeof Z==="object"&&Z!==null}function b7(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function H0(Z,Q,K,J,X,V,G){let W=new globalThis.Error(V);W.gleam_error=Z,W.file=Q,W.module=K,W.line=J,W.function=X,W.fn=X;for(let Y in G)W[Y]=G[Y];return W}class XZ extends I{}class VZ extends I{}class YQ extends I{}class z extends I{constructor(Z){super();this[0]=Z}}class q extends I{}function _K(Z,Q){if(Z instanceof z){let K=Z[0];return new N(K)}else return new T(Q)}function gZ(Z){if(Z instanceof N){let Q=Z[0];return new z(Q)}else return new q}function eZ(Z,Q){if(Z instanceof z)return Z[0];else return Q}function QJ(Z,Q){if(Z instanceof z)return Z[0];else return Q()}function SZ(Z,Q){if(Z instanceof z){let K=Z[0];return new z(Q(K))}else return Z}function $K(Z){if(Z instanceof z)return Z[0];else return Z}function y0(Z,Q){if(Z instanceof z){let K=Z[0];return Q(K)}else return Z}var KJ=new WeakMap,mK=new DataView(new ArrayBuffer(8)),uK=0;function cK(Z){let Q=KJ.get(Z);if(Q!==void 0)return Q;let K=uK++;if(uK===2147483647)uK=0;return KJ.set(Z,K),K}function pK(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function sK(Z){let Q=0,K=Z.length;for(let J=0;J<K;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function XJ(Z){mK.setFloat64(0,Z);let Q=mK.getInt32(0),K=mK.getInt32(4);return Math.imul(73244475,Q>>16^Q)^K}function g7(Z){return sK(Z.toString())}function f7(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return cK(Z);if(Z instanceof Date)return XJ(Z.getTime());let K=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)K=Math.imul(31,K)+fZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{K=K+fZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{K=K+pK(fZ(J),fZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let V=J[X],G=Z[V];K=K+pK(fZ(G),sK(V))|0}}return K}function fZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return XJ(Z);case"string":return sK(Z);case"bigint":return g7(Z);case"object":return f7(Z);case"symbol":return cK(Z);case"function":return cK(Z);default:return 0}}var QQ=5,nK=Math.pow(2,QQ),v7=nK-1,h7=nK/2,_7=nK/4,PZ=0,ZQ=1,wZ=2,_Q=3,lK={type:wZ,bitmap:0,array:[]};function b0(Z,Q){return Z>>>Q&v7}function S8(Z,Q){return 1<<b0(Z,Q)}function $7(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function iK(Z,Q){return $7(Z&Q-1)}function vZ(Z,Q,K){let J=Z.length,X=Array(J);for(let V=0;V<J;++V)X[V]=Z[V];return X[Q]=K,X}function m7(Z,Q,K){let J=Z.length,X=Array(J+1),V=0,G=0;while(V<Q)X[G++]=Z[V++];X[G++]=K;while(V<J)X[G++]=Z[V++];return X}function dK(Z,Q){let K=Z.length,J=Array(K-1),X=0,V=0;while(X<Q)J[V++]=Z[X++];++X;while(X<K)J[V++]=Z[X++];return J}function VJ(Z,Q,K,J,X,V){let G=fZ(Q);if(G===J)return{type:_Q,hash:G,array:[{type:PZ,k:Q,v:K},{type:PZ,k:X,v:V}]};let W={val:!1};return g0(rK(lK,Z,G,Q,K,W),Z,J,X,V,W)}function g0(Z,Q,K,J,X,V){switch(Z.type){case ZQ:return u7(Z,Q,K,J,X,V);case wZ:return rK(Z,Q,K,J,X,V);case _Q:return c7(Z,Q,K,J,X,V)}}function u7(Z,Q,K,J,X,V){let G=b0(K,Q),W=Z.array[G];if(W===void 0)return V.val=!0,{type:ZQ,size:Z.size+1,array:vZ(Z.array,G,{type:PZ,k:J,v:X})};if(W.type===PZ){if(i(J,W.k)){if(X===W.v)return Z;return{type:ZQ,size:Z.size,array:vZ(Z.array,G,{type:PZ,k:J,v:X})}}return V.val=!0,{type:ZQ,size:Z.size,array:vZ(Z.array,G,VJ(Q+QQ,W.k,W.v,K,J,X))}}let Y=g0(W,Q+QQ,K,J,X,V);if(Y===W)return Z;return{type:ZQ,size:Z.size,array:vZ(Z.array,G,Y)}}function rK(Z,Q,K,J,X,V){let G=S8(K,Q),W=iK(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[W];if(Y.type!==PZ){let H=g0(Y,Q+QQ,K,J,X,V);if(H===Y)return Z;return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,H)}}let M=Y.k;if(i(J,M)){if(X===Y.v)return Z;return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,{type:PZ,k:J,v:X})}}return V.val=!0,{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,VJ(Q+QQ,M,Y.v,K,J,X))}}else{let Y=Z.array.length;if(Y>=h7){let M=Array(32),H=b0(K,Q);M[H]=rK(lK,Q+QQ,K,J,X,V);let R=0,j=Z.bitmap;for(let B=0;B<32;B++){if((j&1)!==0){let L=Z.array[R++];M[B]=L}j=j>>>1}return{type:ZQ,size:Y+1,array:M}}else{let M=m7(Z.array,W,{type:PZ,k:J,v:X});return V.val=!0,{type:wZ,bitmap:Z.bitmap|G,array:M}}}}function c7(Z,Q,K,J,X,V){if(K===Z.hash){let G=aK(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:_Q,hash:K,array:vZ(Z.array,G,{type:PZ,k:J,v:X})}}let W=Z.array.length;return V.val=!0,{type:_Q,hash:K,array:vZ(Z.array,W,{type:PZ,k:J,v:X})}}return g0({type:wZ,bitmap:S8(Z.hash,Q),array:[Z]},Q,K,J,X,V)}function aK(Z,Q){let K=Z.array.length;for(let J=0;J<K;J++)if(i(Q,Z.array[J].k))return J;return-1}function B8(Z,Q,K,J){switch(Z.type){case ZQ:return p7(Z,Q,K,J);case wZ:return d7(Z,Q,K,J);case _Q:return s7(Z,J)}}function p7(Z,Q,K,J){let X=b0(K,Q),V=Z.array[X];if(V===void 0)return;if(V.type!==PZ)return B8(V,Q+QQ,K,J);if(i(J,V.k))return V;return}function d7(Z,Q,K,J){let X=S8(K,Q);if((Z.bitmap&X)===0)return;let V=iK(Z.bitmap,X),G=Z.array[V];if(G.type!==PZ)return B8(G,Q+QQ,K,J);if(i(J,G.k))return G;return}function s7(Z,Q){let K=aK(Z,Q);if(K<0)return;return Z.array[K]}function oK(Z,Q,K,J){switch(Z.type){case ZQ:return n7(Z,Q,K,J);case wZ:return l7(Z,Q,K,J);case _Q:return i7(Z,J)}}function n7(Z,Q,K,J){let X=b0(K,Q),V=Z.array[X];if(V===void 0)return Z;let G=void 0;if(V.type===PZ){if(!i(V.k,J))return Z}else if(G=oK(V,Q+QQ,K,J),G===V)return Z;if(G===void 0){if(Z.size<=_7){let W=Z.array,Y=Array(Z.size-1),M=0,H=0,R=0;while(M<X){let j=W[M];if(j!==void 0)Y[H]=j,R|=1<<M,++H;++M}++M;while(M<W.length){let j=W[M];if(j!==void 0)Y[H]=j,R|=1<<M,++H;++M}return{type:wZ,bitmap:R,array:Y}}return{type:ZQ,size:Z.size-1,array:vZ(Z.array,X,G)}}return{type:ZQ,size:Z.size,array:vZ(Z.array,X,G)}}function l7(Z,Q,K,J){let X=S8(K,Q);if((Z.bitmap&X)===0)return Z;let V=iK(Z.bitmap,X),G=Z.array[V];if(G.type!==PZ){let W=oK(G,Q+QQ,K,J);if(W===G)return Z;if(W!==void 0)return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,V,W)};if(Z.bitmap===X)return;return{type:wZ,bitmap:Z.bitmap^X,array:dK(Z.array,V)}}if(i(J,G.k)){if(Z.bitmap===X)return;return{type:wZ,bitmap:Z.bitmap^X,array:dK(Z.array,V)}}return Z}function i7(Z,Q){let K=aK(Z,Q);if(K<0)return Z;if(Z.array.length===1)return;return{type:_Q,hash:Z.hash,array:dK(Z.array,K)}}function GJ(Z,Q){if(Z===void 0)return;let K=Z.array,J=K.length;for(let X=0;X<J;X++){let V=K[X];if(V===void 0)continue;if(V.type===PZ){Q(V.v,V.k);continue}GJ(V,Q)}}class TZ{static fromObject(Z){let Q=Object.keys(Z),K=TZ.new();for(let J=0;J<Q.length;J++){let X=Q[J];K=K.set(X,Z[X])}return K}static fromMap(Z){let Q=TZ.new();return Z.forEach((K,J)=>{Q=Q.set(J,K)}),Q}static new(){return new TZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let K=B8(this.root,0,fZ(Z),Z);if(K===void 0)return Q;return K.v}set(Z,Q){let K={val:!1},J=this.root===void 0?lK:this.root,X=g0(J,0,fZ(Z),Z,Q,K);if(X===this.root)return this;return new TZ(X,K.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=oK(this.root,0,fZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return TZ.new();return new TZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return B8(this.root,0,fZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,K)=>Z.push([K,Q])),Z}forEach(Z){GJ(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,K)=>{Z=Z+pK(fZ(Q),fZ(K))|0}),Z}equals(Z){if(!(Z instanceof TZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,K)=>{if(!i(Z.get(K,!Q),Q))throw JJ}),!0}catch(Q){if(Q===JJ)return!1;throw Q}}}var JJ=Symbol();function f0(Z,Q,K){return MJ(Q,K,Z)}function r7(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=U(X,J)}}}function a7(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return r7(J,F([]));else{let X=K.tail,V=K.head[0];Z=X,Q=U(V,J)}}}function v0(Z){return a7(YJ(Z),F([]))}class FZ extends I{}class F0 extends I{}function h0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=U(X,J)}}}function u(Z){return h0(Z,F([]))}function e7(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.head;Z=J.tail,Q=X,K=U(X(G),V)}}}function sZ(Z,Q){return e7(Z,Q,F([]))}function ZG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=U(X,J)}}}function mQ(Z,Q){return ZG(u(Z),Q)}function I0(Z,Q){return U(Q,Z)}function IZ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return X;else{let G=J.head;Z=J.tail,Q=V(X,G),K=V}}}function _0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return new T(void 0);else{let{head:X,tail:V}=K;if(J(X))return new N(X);else Z=V,Q=J}}}function $0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return new T(void 0);else{let{head:X,tail:V}=K,G=J(X);if(G instanceof N)return G;else Z=V,Q=J}}}function QG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.head;Z=J.tail,Q=X,K=U(G,U(X,V))}}}function q8(Z,Q){if(Z instanceof O)return Z;else{let K=Z.tail;if(K instanceof O)return Z;else{let J=Z.head;return QG(K,Q,F([J]))}}}function KG(Z,Q,K,J,X,V){while(!0){let G=Z,W=Q,Y=K,M=J,H=X,R=V,j=U(H,Y);if(G instanceof O)if(M instanceof FZ)return U(u(j),R);else return U(j,R);else{let{head:B,tail:L}=G,C=W(H,B);if(M instanceof FZ)if(C instanceof XZ)Z=L,Q=W,K=j,J=M,X=B,V=R;else if(C instanceof VZ)Z=L,Q=W,K=j,J=M,X=B,V=R;else{let P;if(M instanceof FZ)P=U(u(j),R);else P=U(j,R);let E=P;if(L instanceof O)return U(F([B]),E);else{let{head:A,tail:S}=L,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new F0;let w=y;Z=S,Q=W,K=F([B]),J=w,X=A,V=E}}else if(C instanceof XZ){let P;if(M instanceof FZ)P=U(u(j),R);else P=U(j,R);let E=P;if(L instanceof O)return U(F([B]),E);else{let{head:A,tail:S}=L,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new F0;let w=y;Z=S,Q=W,K=F([B]),J=w,X=A,V=E}}else if(C instanceof VZ){let P;if(M instanceof FZ)P=U(u(j),R);else P=U(j,R);let E=P;if(L instanceof O)return U(F([B]),E);else{let{head:A,tail:S}=L,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new F0;let w=y;Z=S,Q=W,K=F([B]),J=w,X=A,V=E}}else Z=L,Q=W,K=j,J=M,X=B,V=R}}}function JG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(X instanceof O)return h0(V,W);else if(V instanceof O)return h0(X,W);else{let{head:Y,tail:M}=X,H=V.head,R=V.tail,j=G(Y,H);if(j instanceof XZ)Z=M,Q=V,K=G,J=U(Y,W);else if(j instanceof VZ)Z=X,Q=R,K=G,J=U(H,W);else Z=X,Q=R,K=G,J=U(H,W)}}}function XG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.tail;if(G instanceof O){let W=J.head;return u(U(u(W),V))}else{let W=J.head,Y=G.head,M=G.tail,H=JG(W,Y,X,F([]));Z=M,Q=X,K=U(H,V)}}}}function VG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(X instanceof O)return h0(V,W);else if(V instanceof O)return h0(X,W);else{let{head:Y,tail:M}=X,H=V.head,R=V.tail,j=G(Y,H);if(j instanceof XZ)Z=X,Q=R,K=G,J=U(H,W);else if(j instanceof VZ)Z=M,Q=V,K=G,J=U(Y,W);else Z=M,Q=V,K=G,J=U(Y,W)}}}function GG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.tail;if(G instanceof O){let W=J.head;return u(U(u(W),V))}else{let W=J.head,Y=G.head,M=G.tail,H=VG(W,Y,X,F([]));Z=M,Q=X,K=U(H,V)}}}}function WG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return J;else if(X instanceof FZ)if(J.tail instanceof O)return J.head;else Z=XG(J,V,F([])),Q=new F0,K=V;else if(J.tail instanceof O){let W=J.head;return u(W)}else Z=GG(J,V,F([])),Q=new FZ,K=V}}function tK(Z,Q){if(Z instanceof O)return Z;else{let K=Z.tail;if(K instanceof O)return Z;else{let J=Z.head,X=K.head,V=K.tail,G,W=Q(J,X);if(W instanceof XZ)G=new FZ;else if(W instanceof VZ)G=new FZ;else G=new F0;let Y=G,M=KG(V,Q,F([J]),Y,X,F([]));return WG(M,new FZ,Q)}}}function eK(Z,Q){return $0(Z,(K)=>{let J,X;if(J=K[0],X=K[1],i(J,Q))return new N(X);else return new T(void 0)})}function HJ(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return;else{let{head:X,tail:V}=K;J(X),Z=V,Q=J}}}function zG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=J+X}}}function R0(Z){return zG(Z,"")}function BQ(Z){let K=Z6(Z);return Q6(K)}class nZ extends I{constructor(Z,Q,K){super();this.expected=Z,this.found=Q,this.path=K}}class HQ extends I{constructor(Z){super();this.function=Z}}function FQ(Z,Q){let K=Q.function(Z),J,X;if(J=K[0],X=K[1],X instanceof O)return new N(J);else return new T(X)}function LZ(Z){return new HQ((Q)=>{return[Z,F([])]})}function m0(Z,Q){return new HQ((K)=>{let J=Z.function(K),X,V;return X=J[0],V=J[1],[Q(X),V]})}function SG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(V instanceof O)return X;else{let{head:G,tail:W}=V,Y=G.function(J),M,H;if(M=Y,H=Y[1],H instanceof O)return M;else Z=J,Q=X,K=W}}}function TJ(Z,Q){return new HQ((K)=>{let J=Z.function(K),X,V;if(X=J,V=J[1],V instanceof O)return X;else return SG(K,X,Q)})}function qG(Z,Q){return F([new nZ(Z,dZ(Q),F([]))])}function PJ(Z,Q,K){let J=K(Z);if(J instanceof N)return[J[0],F([])];else return[J[0],F([new nZ(Q,dZ(Z),F([]))])]}function CG(Z){return PJ(Z,"Int",BJ)}function J6(Z,Q){return new HQ((K)=>{return[Z,qG(Q,K)]})}var SQ=new HQ(CG);function wG(Z){return PJ(Z,"String",SJ)}var lZ=new HQ(wG);function cQ(Z){return new HQ((Q)=>{return AJ(Q,Z.function,(K,J)=>{return C8(K,F([J]))},0,F([]))})}function C8(Z,Q){let K=TJ(lZ,F([(()=>{return m0(SQ,a)})()])),J=sZ(Q,(V)=>{let G=r(V),W=FQ(G,K);if(W instanceof N)return W[0];else return"<"+dZ(G)+">"}),X=sZ(Z[1],(V)=>{return new nZ(V.expected,V.found,mQ(J,V.path))});return[Z[0],X]}function EG(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(V instanceof O){let H=W(Y);return C8(H,u(G))}else{let{head:H,tail:R}=V,j=LJ(Y,H);if(j instanceof N){let B=j[0];if(B instanceof z){let L=B[0];Z=R,Q=U(H,G),K=W,J=L,X=M}else return M(Y,U(H,G))}else{let B=j[0],L=W(Y),C;C=L[0];let P=[C,F([new nZ(B,dZ(Y),F([]))])];return C8(P,u(G))}}}}function X6(Z,Q,K){return new HQ((J)=>{let X=EG(Z,F([]),Q.function,J,(H,R)=>{let j=Q.function(H),B;B=j[0];let L=[B,F([new nZ("Field","Nothing",F([]))])];return C8(L,u(R))}),V,G;V=X[0],G=X[1];let W=K(V).function(J),Y,M;return Y=W[0],M=W[1],[Y,mQ(G,M)]})}function AZ(Z,Q,K){return X6(F([Z]),Q,K)}var V6=void 0,qJ={};function r(Z){return Z}function w8(Z){if(/^[-+]?(\d+)$/.test(Z))return new N(parseInt(Z));else return new T(V6)}function a(Z){return Z.toString()}function pQ(Z){return[Z.charCodeAt(0)|0,Z.slice(1)]}function hZ(Z){return Z.toLowerCase()}function uQ(Z){let Q="";for(let K of Z)Q=Q+K;return Q}function RZ(Z,Q,K){return Z.slice(Q,Q+K)}function N0(Z,Q){return Z.startsWith(Q)}var EJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),xG=new RegExp(`^[${EJ}]*`),kG=new RegExp(`[${EJ}]*$`);function Z6(Z){return Z.replace(xG,"")}function Q6(Z){return Z.replace(kG,"")}function $Q(){return TZ.new()}function YJ(Z){return MZ.fromArray(Z.entries())}function AQ(Z,Q){let K=Z.get(Q,qJ);if(K===qJ)return new T(V6);return new N(K)}function MJ(Z,Q,K){return K.set(Z,Q)}function CJ(Z){return decodeURIComponent((Z||"").replace("+"," "))}function E8(Z){return encodeURIComponent(Z).replace("%2B","+")}function u0(Z){try{let Q=[];for(let K of Z.split("&")){let[J,X]=K.split("=");if(!J)continue;let V=CJ(J),G=CJ(X);Q.push([V,G])}return new N(MZ.fromArray(Q))}catch{return new T(V6)}}function dZ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof M0)return"Result";else if(Z instanceof MZ)return"List";else if(Z instanceof k0)return"BitArray";else if(Z instanceof TZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function xJ(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let K=Q.indexOf("e");if(K>=0)return Q.slice(0,K)+".0"+Q.slice(K);else return Q+".0"}}class yG{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#V(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return xJ(Z);if(Z instanceof hK)return this.#W(Z);if(Z instanceof k0)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let K;if(Array.isArray(Z))K=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof MZ)K=this.#Q(Z);else if(Z instanceof I)K=this.#K(Z);else if(Z instanceof TZ)K=this.#J(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else K=this.#X(Z);return this.#Z.delete(Z),K}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",K=[];for(let V of Object.keys(Z))K.push(`${this.inspect(V)}: ${this.inspect(Z[V])}`);let J=K.length?" "+K.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#J(Z){let Q="dict.from_list([",K=!0;return Z.forEach((J,X)=>{if(!K)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",K=!1}),Q+"])"}#K(Z){let Q=Object.keys(Z).map((K)=>{let J=this.inspect(Z[K]);return isNaN(parseInt(K))?`${K}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof O)return"[]";let Q='charlist.from_string("',K="[",J=Z;while(J instanceof bZ){let X=J.head;if(J=J.tail,K!=="[")K+=", ";if(K+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return K+"]"}#V(Z){let Q='"';for(let K=0;K<Z.length;K++){let J=Z[K];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#W(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let K=0;K<Z.byteSize-1;K++)Q+=Z.byteAt(K).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let K=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-K,Q+=`:size(${K})`}return Q+=">>",Q}}function LJ(Z,Q){if(Z instanceof TZ||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new N(new q);return new N(new z(X))}let K=Number.isInteger(Q);if(K&&Q>=0&&Q<8&&Z instanceof MZ){let J=0;for(let X of Z){if(J===Q)return new N(new z(X));J++}return new T("Indexable")}if(K&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new N(new z(Z[Q]));return new N(new q)}return new T(K?"Indexable":"Dict")}function AJ(Z,Q,K,J,X){if(!(Z instanceof MZ||Array.isArray(Z))){let G=new nZ("List",dZ(Z),X);return[X,MZ.fromArray([G])]}let V=[];for(let G of Z){let W=Q(G),[Y,M]=W;if(M instanceof bZ){let[H,R]=K(W,J.toString());return[X,R]}V.push(Y),J++}return[MZ.fromArray(V),X]}function BJ(Z){if(Number.isInteger(Z))return new N(Z);return new T(0)}function SJ(Z){if(typeof Z==="string")return new N(Z);return new T("")}function kJ(Z,Q){if(Z<Q)return Z;else return Q}function x8(Z,Q){if(Z>Q)return Z;else return Q}function G6(Z,Q,K){let X=kJ(Z,K);return x8(X,Q)}function KQ(Z,Q){if(Z instanceof N){let K=Z[0];return new N(Q(K))}else return Z}function D0(Z,Q){if(Z instanceof N)return Z;else{let K=Z[0];return new T(Q(K))}}function GZ(Z,Q){if(Z instanceof N){let K=Z[0];return Q(K)}else return Z}function c0(Z,Q){if(Z instanceof N)return Z[0];else return Q}function Y6(Z){if(Z instanceof N)return Z[0];else return Z[0]}function p0(Z,Q){if(Z instanceof N)return Z;else return new T(Q)}class v extends I{constructor(Z,Q,K,J,X,V,G){super();this.scheme=Z,this.userinfo=Q,this.host=K,this.port=J,this.path=X,this.query=V,this.fragment=G}}function bG(Z){return 48>=Z&&Z<=57||65>=Z&&Z<=90||97>=Z&&Z<=122||Z===58||Z===46}function XQ(Z,Q){return new N(new v(Q.scheme,Q.userinfo,Q.host,Q.port,Q.path,Q.query,new z(Z)))}function gG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return XQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,G.path,new z(M),G.fragment);return XQ(Y,H)}else if(V==="")return new N(new v(G.scheme,G.userinfo,G.host,G.port,G.path,new z(X),G.fragment));else{let Y=pQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function qQ(Z,Q){return gG(Z,Z,Q,0)}function fG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("?")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,M,G.query,G.fragment);return qQ(Y,H)}else if(V.startsWith("#")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,M,G.query,G.fragment);return XQ(Y,H)}else if(V==="")return new N(new v(G.scheme,G.userinfo,G.host,G.port,X,G.query,G.fragment));else{let Y=pQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function z0(Z,Q){return fG(Z,Z,Q,0)}function JQ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J.startsWith("0"))Z=J.slice(1),Q=X,K=V*10;else if(J.startsWith("1"))Z=J.slice(1),Q=X,K=V*10+1;else if(J.startsWith("2"))Z=J.slice(1),Q=X,K=V*10+2;else if(J.startsWith("3"))Z=J.slice(1),Q=X,K=V*10+3;else if(J.startsWith("4"))Z=J.slice(1),Q=X,K=V*10+4;else if(J.startsWith("5"))Z=J.slice(1),Q=X,K=V*10+5;else if(J.startsWith("6"))Z=J.slice(1),Q=X,K=V*10+6;else if(J.startsWith("7"))Z=J.slice(1),Q=X,K=V*10+7;else if(J.startsWith("8"))Z=J.slice(1),Q=X,K=V*10+8;else if(J.startsWith("9"))Z=J.slice(1),Q=X,K=V*10+9;else if(J.startsWith("?")){let G=J.slice(1),W=new v(X.scheme,X.userinfo,X.host,new z(V),X.path,X.query,X.fragment);return qQ(G,W)}else if(J.startsWith("#")){let G=J.slice(1),W=new v(X.scheme,X.userinfo,X.host,new z(V),X.path,X.query,X.fragment);return XQ(G,W)}else if(J.startsWith("/")){let G=new v(X.scheme,X.userinfo,X.host,new z(V),X.path,X.query,X.fragment);return z0(J,G)}else if(J==="")return new N(new v(X.scheme,X.userinfo,X.host,new z(V),X.path,X.query,X.fragment));else return new T(void 0)}}function k8(Z,Q){if(Z.startsWith(":0")){let K=Z.slice(2);return JQ(K,Q,0)}else if(Z.startsWith(":1")){let K=Z.slice(2);return JQ(K,Q,1)}else if(Z.startsWith(":2")){let K=Z.slice(2);return JQ(K,Q,2)}else if(Z.startsWith(":3")){let K=Z.slice(2);return JQ(K,Q,3)}else if(Z.startsWith(":4")){let K=Z.slice(2);return JQ(K,Q,4)}else if(Z.startsWith(":5")){let K=Z.slice(2);return JQ(K,Q,5)}else if(Z.startsWith(":6")){let K=Z.slice(2);return JQ(K,Q,6)}else if(Z.startsWith(":7")){let K=Z.slice(2);return JQ(K,Q,7)}else if(Z.startsWith(":8")){let K=Z.slice(2);return JQ(K,Q,8)}else if(Z.startsWith(":9")){let K=Z.slice(2);return JQ(K,Q,9)}else if(Z.startsWith(":"))return new T(void 0);else if(Z.startsWith("?")){let K=Z.slice(1);return qQ(K,Q)}else if(Z.startsWith("#")){let K=Z.slice(1);return XQ(K,Q)}else if(Z.startsWith("/"))return z0(Z,Q);else if(Z==="")return new N(Q);else return new T(void 0)}function yJ(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V==="")return new N(new v(G.scheme,G.userinfo,new z(X),G.port,G.path,G.query,G.fragment));else if(V.startsWith(":")){let Y=RZ(X,0,W),M=new v(G.scheme,G.userinfo,new z(Y),G.port,G.path,G.query,G.fragment);return k8(V,M)}else if(V.startsWith("/")){let Y=RZ(X,0,W),M=new v(G.scheme,G.userinfo,new z(Y),G.port,G.path,G.query,G.fragment);return z0(V,M)}else if(V.startsWith("?")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new z(M),G.port,G.path,G.query,G.fragment);return qQ(Y,H)}else if(V.startsWith("#")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new z(M),G.port,G.path,G.query,G.fragment);return XQ(Y,H)}else{let Y=pQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function vG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V==="")return new N(new v(G.scheme,G.userinfo,new z(V),G.port,G.path,G.query,G.fragment));else if(V.startsWith("]"))if(W===0){let Y=V.slice(1);return k8(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W+1),H=new v(G.scheme,G.userinfo,new z(M),G.port,G.path,G.query,G.fragment);return k8(Y,H)}else if(V.startsWith("/"))if(W===0)return z0(V,G);else{let Y=RZ(X,0,W),M=new v(G.scheme,G.userinfo,new z(Y),G.port,G.path,G.query,G.fragment);return z0(V,M)}else if(V.startsWith("?"))if(W===0){let Y=V.slice(1);return qQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new z(M),G.port,G.path,G.query,G.fragment);return qQ(Y,H)}else if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return XQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new z(M),G.port,G.path,G.query,G.fragment);return XQ(Y,H)}else{let Y=pQ(V),M,H;if(M=Y[0],H=Y[1],bG(M))Z=X,Q=H,K=G,J=W+1;else return yJ(X,X,G,0)}}}function hG(Z,Q){return vG(Z,Z,Q,0)}function _G(Z,Q){return yJ(Z,Z,Q,0)}function j0(Z,Q){if(Z.startsWith("["))return hG(Z,Q);else if(Z.startsWith(":")){let K=new v(Q.scheme,Q.userinfo,new z(""),Q.port,Q.path,Q.query,Q.fragment);return k8(Z,K)}else if(Z==="")return new N(new v(Q.scheme,Q.userinfo,new z(""),Q.port,Q.path,Q.query,Q.fragment));else return _G(Z,Q)}function $G(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("@"))if(W===0){let Y=V.slice(1);return j0(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,new z(M),G.host,G.port,G.path,G.query,G.fragment);return j0(Y,H)}else if(V==="")return j0(X,G);else if(V.startsWith("/"))return j0(X,G);else if(V.startsWith("?"))return j0(X,G);else if(V.startsWith("#"))return j0(X,G);else{let Y=pQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function mG(Z,Q){return $G(Z,Z,Q,0)}function M6(Z,Q){if(Z==="//")return new N(new v(Q.scheme,Q.userinfo,new z(""),Q.port,Q.path,Q.query,Q.fragment));else if(Z.startsWith("//")){let K=Z.slice(2);return mG(K,Q)}else return z0(Z,Q)}function uG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("/"))if(W===0)return M6(V,G);else{let Y=RZ(X,0,W),M=new v(new z(hZ(Y)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return M6(V,M)}else if(V.startsWith("?"))if(W===0){let Y=V.slice(1);return qQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(new z(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return qQ(Y,H)}else if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return XQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(new z(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return XQ(Y,H)}else if(V.startsWith(":"))if(W===0)return new T(void 0);else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(new z(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return M6(Y,H)}else if(V==="")return new N(new v(G.scheme,G.userinfo,G.host,G.port,X,G.query,G.fragment));else{let Y=pQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function cG(Z){return uQ(F([E8(Z[0]),"=",E8(Z[1])]))}function dQ(Z){let K=sZ(Z,cG),J=q8(K,r("&")),X=uQ(J);return r(X)}function b8(Z){let Q,K=Z.fragment;if(K instanceof z){let D=K[0];Q=F(["#",D])}else Q=F([]);let J=Q,X,V=Z.query;if(V instanceof z){let D=V[0];X=U("?",U(D,J))}else X=J;let G=X,W=U(Z.path,G),Y,M=Z.host,H=N0(Z.path,"/");if(M instanceof z&&!H)if(M[0]!=="")Y=U("/",W);else Y=W;else Y=W;let R=Y,j,B=Z.host,L=Z.port;if(B instanceof z&&L instanceof z){let D=L[0];j=U(":",U(a(D),R))}else j=R;let C=j,P,E=Z.scheme,A=Z.userinfo,S=Z.host;if(E instanceof z)if(A instanceof z)if(S instanceof z){let D=E[0],w=A[0],k=S[0];P=U(D,U("://",U(w,U("@",U(k,C)))))}else{let D=E[0];P=U(D,U(":",C))}else if(S instanceof z){let D=E[0],w=S[0];P=U(D,U("://",U(w,C)))}else{let D=E[0];P=U(D,U(":",C))}else if(A instanceof q&&S instanceof z){let D=S[0];P=U("//",U(D,C))}else P=C;return R0(P)}var pG=new v(new q,new q,new q,new q,"",new q,new q);function g8(Z){return uG(Z,Z,pG,0)}var s0=()=>[],IQ=(Z)=>[Z];var sQ=(Z,Q)=>[...Z,Q];var WZ=(Z,Q)=>Q[Z-1];var NZ=(Z)=>Z.length;var f8=(Z,Q)=>Z<<Q,F6=(Z,Q)=>Z>>Q;function rG(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(W<=Y)Z=V,Q=M(G,WZ(W,V)),K=W+1,J=Y,X=M;else return G}}function vJ(Z,Q,K){let J=NZ(Z);return rG(Z,Q,2,J,K)}function aG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(G>0)Z=X,Q=W(V,WZ(G,X)),K=G-1,J=W;else return V}}function v8(Z,Q,K){let J=NZ(Z);return aG(Z,Q,J,K)}function oG(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(W<=Y)Z=V,Q=M(G,WZ(W,V),W),K=W+1,J=Y,X=M;else return G}}function hJ(Z,Q,K){let J=NZ(Z);return oG(Z,Q,1,J,K)}function h8(Z,Q){return hJ(Z,s0(),(K,J,X)=>{return sQ(K,Q(J,X))})}class UQ extends I{constructor(Z,Q){super();this.size=Z,this.children=Q}}class CQ extends I{constructor(Z,Q){super();this.sizes=Z,this.children=Q}}class u8 extends I{constructor(Z){super();this.children=Z}}function n0(Z){return new u8(Z)}function O0(Z){if(Z instanceof UQ)return Z.size;else if(Z instanceof CQ){let Q=Z.sizes;return WZ(NZ(Q),Q)}else{let Q=Z.children;return NZ(Q)}}function tG(Z){let Q=O0(WZ(1,Z));return vJ(Z,IQ(Q),(K,J)=>{let X=WZ(NZ(K),K)+O0(J);return sQ(K,X)})}function eG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(WZ(X,J)>V)return X-1;else Z=J,Q=X+1,K=V}}function $8(Z,Q,K){if(Z instanceof UQ){let J=Z.children;return v8(J,Q,(X,V)=>{return $8(V,X,K)})}else if(Z instanceof CQ){let J=Z.children;return v8(J,Q,(X,V)=>{return $8(V,X,K)})}else{let J=Z.children;return v8(J,Q,K)}}function _J(Z,Q){let K=NZ(Q),J=WZ(K,Q),V=f8(1,Z)*(K-1)+O0(J);return new UQ(V,Q)}function c8(Z,Q){let K=NZ(Q),J=f8(1,Z),X=tG(Q),V;if(K===1)V=0;else V=WZ(K-1,X);if(V===J*(K-1)){let Y=WZ(K,X);return new UQ(Y,Q)}else return new CQ(X,Q)}var nQ=5;function $J(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof UQ){let G=J.children,W=F6(V,X),Y=V-f8(W,X);Z=WZ(W+1,G),Q=X-nQ,K=Y}else if(J instanceof CQ){let{sizes:G,children:W}=J,Y=F6(V,X),M=eG(G,Y+1,V),H;if(M===0)H=V;else H=V-WZ(M,G);let R=H;Z=WZ(M+1,W),Q=X-nQ,K=R}else{let G=J.children;return WZ(V+1,G)}}}var p8=32;function m8(Z,Q,K){if(Q instanceof UQ){let{size:J,children:X}=Q,V=h8(X,(G,W)=>{return m8(Z+(W-1)*p8,G,K)});return new UQ(J,V)}else if(Q instanceof CQ){let{sizes:J,children:X}=Q,V=h8(X,(G,W)=>{let Y;if(W===1)Y=0;else Y=WZ(W-1,J);return m8(Z+Y,G,K)});return new CQ(J,V)}else{let J=Q.children,X=h8(J,(V,G)=>{return K(V,G+Z-1)});return new u8(X)}}class d8 extends I{constructor(Z,Q,K,J){super();this.nodes=Z,this.items=Q,this.push_node=K,this.push_item=J}}function mJ(Z,Q,K){if(Z instanceof O)return F([IQ(Q)]);else{let{head:J,tail:X}=Z;if(NZ(J)<p8)return U(sQ(J,Q),X);else{let G=K+nQ,W=_J(G,J);return U(IQ(Q),mJ(X,W,G))}}}function uJ(){return new d8(F([]),s0(),mJ,sQ)}function cJ(Z,Q){let K,J,X,V;if(K=Z.nodes,J=Z.items,X=Z.push_node,V=Z.push_item,NZ(J)===p8){let W=n0(J);return new d8(X(K,W,0),IQ(Q),X,V)}else return new d8(K,V(J,Q),X,V)}function ZW(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return new T(void 0);else{let G=J.tail;if(G instanceof O){let W=J.head;return new N([V,W])}else{let W=J.head,Y=G,M=V+nQ;Z=X(Y,c8(M,W),M),Q=X,K=M}}}}function pJ(Z){let Q,K,J;Q=Z.nodes,K=Z.items,J=Z.push_node;let X=NZ(K),V;if(X>0)V=J(Q,n0(K),0);else V=Q;return ZW(V,J,0)}class wQ extends I{}class l0 extends I{constructor(Z,Q){super();this.shift=Z,this.root=Q}}function JW(Z,Q){let K=NZ(Q);if(K===0)return new wQ;else if(K===1)return new l0(Z,WZ(1,Q));else{let J=Z+nQ;return new l0(J,c8(J,Q))}}function dJ(){return new wQ}function i0(Z){return new l0(0,n0(IQ(Z)))}function VQ(Z){let Q=(()=>{let J=IZ(Z,uJ(),cJ);return pJ(J)})();if(Q instanceof N){let K=Q[0][0],J=Q[0][1];return JW(K,J)}else return new wQ}function U6(Z){if(Z instanceof wQ)return 0;else{let Q=Z.root;return O0(Q)}}function R6(Z,Q){if(Z instanceof wQ)return new T(void 0);else{let{shift:K,root:J}=Z;if(0<=Q&&Q<O0(J))return new N($J(J,K,Q));else return new T(void 0)}}function N6(Z,Q){if(Z instanceof wQ)return Z;else{let{shift:K,root:J}=Z;return new l0(K,m8(0,J,Q))}}function XW(Z,Q,K){if(Z instanceof wQ)return Q;else{let J=Z.root;return $8(J,Q,K)}}function D6(Z){return XW(Z,F([]),I0)}function EQ(Z,Q,K){if(Z)return Q;else return K()}function QZ(Z){return Z}function lJ(Z){try{let Q=JSON.parse(Z);return new N(Q)}catch(Q){return new T(WW(Q,Z))}}function WW(Z,Q){if(YW(Z))return new z6;return MW(Z,Q)}function YW(Z){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(Z.message)}function MW(Z,Q){let K=[HW,FW,UW,IW];for(let J of K){let X=J(Z,Q);if(X)return X}return new lQ("",0)}function HW(Z){let K=/unexpected token '(.)', ".+" is not valid JSON/i.exec(Z.message);if(!K)return null;let J=l8(K[1]);return new lQ(J,-1)}function FW(Z){let K=/unexpected token (.) in JSON at position (\d+)/i.exec(Z.message);if(!K)return null;let J=l8(K[1]),X=Number(K[2]);return new lQ(J,X)}function IW(Z,Q){let J=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(Z.message);if(!J)return null;let X=Number(J[2]),V=Number(J[3]),G=RW(X,V,Q),W=l8(Q[G]);return new lQ(W,G)}function UW(Z){let K=/unexpected (identifier|token) "(.)"/i.exec(Z.message);if(!K)return null;let J=l8(K[2]);return new lQ(J,0)}function l8(Z){return"0x"+Z.charCodeAt(0).toString(16).toUpperCase()}function RW(Z,Q,K){if(Z===1)return Q-1;let J=1,X=0;return K.split("").find((V,G)=>{if(V===`
`)J+=1;if(J===Z)return X=G+Q,!0;return!1}),X}class z6 extends I{}class lQ extends I{constructor(Z){super();this[0]=Z}}class iJ extends I{constructor(Z){super();this[0]=Z}}function DW(Z,Q){return GZ(lJ(Z),(K)=>{let J=FQ(K,Q);return D0(J,(X)=>{return new iJ(X)})})}function T6(Z,Q){return DW(Z,Q)}var _Z=()=>globalThis?.document,i8="http://www.w3.org/1999/xhtml",r8=1,P6=3;var oJ=!!globalThis.HTMLElement?.prototype?.moveBefore;var g=F([]),a8=new q;var OW=new YQ,TW=new XZ,PW=new VZ;function t8(Z,Q){if(Z.name===Q.name)return PW;else if(Z.name<Q.name)return TW;else return OW}class $Z extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class e8 extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class OZ extends I{constructor(Z,Q,K,J,X,V,G,W,Y){super();this.kind=Z,this.name=Q,this.handler=K,this.include=J,this.prevent_default=X,this.stop_propagation=V,this.immediate=G,this.debounce=W,this.throttle=Y}}class r0 extends I{constructor(Z,Q,K){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=K}}class XX extends I{constructor(Z){super();this.kind=Z}}function CW(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;if(X instanceof $Z){let V=X.name;if(V==="")Z=K.tail,Q=J;else if(V==="class"){let G=X.value;if(G==="")Z=K.tail,Q=J;else{let W=K.tail;if(W instanceof O){let Y=X;Z=W,Q=U(Y,J)}else{let Y=W.head;if(Y instanceof $Z)if(Y.name==="class"){let H=X.kind,R=G,j=W.tail,B=Y.value,L=R+" "+B,C=new $Z(H,"class",L);Z=U(C,j),Q=J}else{let H=X;Z=W,Q=U(H,J)}else{let M=X;Z=W,Q=U(M,J)}}}}else if(V==="style"){let G=X.value;if(G==="")Z=K.tail,Q=J;else{let W=K.tail;if(W instanceof O){let Y=X;Z=W,Q=U(Y,J)}else{let Y=W.head;if(Y instanceof $Z)if(Y.name==="style"){let H=X.kind,R=G,j=W.tail,B=Y.value,L=R+";"+B,C=new $Z(H,"style",L);Z=U(C,j),Q=J}else{let H=X;Z=W,Q=U(H,J)}else{let M=X;Z=W,Q=U(M,J)}}}}else{let G=X;Z=K.tail,Q=U(G,J)}}else{let V=X;Z=K.tail,Q=U(V,J)}}}}function VX(Z){if(Z instanceof O)return Z;else if(Z.tail instanceof O)return Z;else{let J=tK(Z,(X,V)=>{return t8(V,X)});return CW(J,g)}}var A6=0;function GX(Z,Q){return new $Z(A6,Z,Q)}var WX=1;var B6=2;function YX(Z,Q,K,J,X,V,G,W){return new OZ(B6,Z,Q,K,J,X,V,G,W)}var S6=0;var q6=new XX(S6);var C6=2;function GQ(Z,Q){return GX(Z,Q)}function $(Z){return GQ("class",Z)}function MX(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else if(K.head[1]){let V=K.tail,G=K.head[0];return J+G+" "+MX(V,J)}else Z=K.tail,Q=J}}function a0(Z){return $(MX(Z,""))}function w6(Z){return GQ("id",Z)}function E6(Z){return GQ("type",Z)}function x6(Z){return GQ("value",Z)}function HX(Z,Q){return GQ("aria-"+Z,Q)}function iQ(Z){return GQ("role",Z)}function k6(Z){return HX("hidden",(()=>{if(Z)return"true";else return"false"})())}function y6(Z){return HX("label",Z)}class o0 extends I{constructor(Z,Q,K){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=K}}class FX extends I{constructor(Z,Q,K,J,X){super();this.dispatch=Z,this.emit=Q,this.select=K,this.root=J,this.provide=X}}function IX(Z,Q,K,J,X,V){let G=new FX(Q,K,J,X,V);return HJ(Z.synchronous,(W)=>{return W(G)})}var P0=new o0(F([]),F([]),F([]));function o(){return P0}function L0(Z){return new o0(F([(K)=>{let J=K.dispatch;return Z(J)}]),P0.before_paint,P0.after_paint)}function UX(Z){let Q=(K)=>{let J=K.root(),X=K.dispatch;return Z(X,J)};return new o0(P0.synchronous,P0.before_paint,F([Q]))}function ZK(Z){return IZ(Z,P0,(Q,K)=>{return new o0(IZ(K.synchronous,Q.synchronous,I0),IZ(K.before_paint,Q.before_paint,I0),IZ(K.after_paint,Q.after_paint,I0))})}function kZ(){return null}function t0(Z,Q){let K=Z?.get(Q);if(K!=null)return new N(K);else return new T(void 0)}function e0(Z,Q){return Z&&Z.has(Q)}function rQ(Z,Q,K){return Z??=new Map,Z.set(Q,K),Z}function b6(Z,Q){return Z?.delete(Q),Z}class g6 extends I{}class f6 extends I{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class RX extends I{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function EW(Z,Q){while(!0){let K=Z,J=Q;if(J instanceof O)return!1;else{let{head:X,tail:V}=J,G=N0(K,X);if(G)return G;else Z=K,Q=V}}}function mZ(Z,Q,K){if(K==="")return new RX(Q,Z);else return new f6(K,Z)}var A0=new g6,Q8="\t";function NX(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof g6)if(J instanceof O)return"";else{let X=J.tail;return R0(X)}else if(K instanceof f6){let X=K.key;Z=K.parent,Q=U(Q8,U(X,J))}else{let X=K.index;Z=K.parent,Q=U(Q8,U(a(X),J))}}}function DX(Z){return NX(Z,F([]))}function jX(Z,Q){if(Q instanceof O)return!1;else return EW(DX(Z),Q)}var v6=`
`;function h6(Z,Q){return NX(Z,F([v6,Q]))}class uZ extends I{constructor(Z,Q,K,J,X){super();this.kind=Z,this.key=Q,this.mapper=K,this.children=J,this.keyed_children=X}}class yZ extends I{constructor(Z,Q,K,J,X,V,G,W,Y,M){super();this.kind=Z,this.key=Q,this.mapper=K,this.namespace=J,this.tag=X,this.attributes=V,this.children=G,this.keyed_children=W,this.self_closing=Y,this.void=M}}class cZ extends I{constructor(Z,Q,K,J){super();this.kind=Z,this.key=Q,this.mapper=K,this.content=J}}class aQ extends I{constructor(Z,Q,K,J,X,V,G){super();this.kind=Z,this.key=Q,this.mapper=K,this.namespace=J,this.tag=X,this.attributes=V,this.inner_html=G}}function yW(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function zX(Z,Q){if(Q instanceof uZ)return new uZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof yZ)return new yZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof cZ)return new cZ(Q.kind,Z,Q.mapper,Q.content);else return new aQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var rZ=0;function _6(Z,Q,K,J){return new uZ(rZ,Z,Q,K,J)}var oQ=1;function K8(Z,Q,K,J,X,V,G,W,Y){return new yZ(oQ,Z,Q,K,J,VX(X),V,G,W,Y||yW(J,K))}var B0=2;function $6(Z,Q,K){return new cZ(B0,Z,Q,K)}var OX=3;var m6=(Z,Q)=>Z===Q,tQ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let K=typeof Z;if(K!==typeof Q)return!1;if(K!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return bW(Z,Q);return gW(Z,Q)},bW=(Z,Q)=>{let K=Z.length;if(K!==Q.length)return!1;while(K--)if(!tQ(Z[K],Q[K]))return!1;return!0},gW=(Z,Q)=>{let K=Object.keys(Z),J=K.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=K[J];if(!Object.hasOwn(Q,X))return!1;if(!tQ(Z[X],Q[X]))return!1}return!0};class DQ extends I{constructor(Z,Q,K){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=K}}function c6(){return new DQ(kZ(),g,g)}function AX(Z){return new DQ(Z.handlers,Z.next_dispatched_paths,g)}function BX(Z,Q,K){return b6(Z,h6(Q,K))}function KK(Z,Q,K){let J=BX(Z.handlers,Q,K);return new DQ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function TX(Z,Q,K){return IZ(K,Z,(J,X)=>{if(X instanceof OZ){let V=X.name;return BX(J,Q,V)}else return J})}function S0(Z,Q,K,J){let X=U(Q,Z.next_dispatched_paths),V=new DQ(Z.handlers,Z.dispatched_paths,X),G=t0(V.handlers,Q+v6+K);if(G instanceof N){let W=G[0];return[V,FQ(J,W)]}else return[V,new T(F([]))]}function JK(Z,Q){return jX(Q,Z.dispatched_paths)}function SX(Z,Q,K,J,X){return rQ(Z,h6(K,J),m0(X,(V)=>{return new r0(V.prevent_default,V.stop_propagation,QZ(Q)(V.message))}))}function q0(Z,Q,K,J,X){let V=SX(Z.handlers,Q,K,J,X);return new DQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function PX(Z,Q,K,J){return IZ(J,Z,(X,V)=>{if(V instanceof OZ){let{name:G,handler:W}=V;return SX(X,Q,K,G,W)}else return X})}function yQ(Z,Q){let K=m6(Z,QZ);if(m6(Q,QZ))return Z;else if(K)return Q;else return(X)=>{return Z(Q(X))}}function LX(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(W instanceof O)return X;else{let{head:Y,tail:M}=W;Z=qX(X,V,G,Y),Q=V,K=G+1,J=M}}}function qX(Z,Q,K,J){if(J instanceof uZ){let X=J.children,V=mZ(Q,K,J.key);return LX(Z,V,0,X)}else if(J instanceof yZ){let{attributes:X,children:V}=J,G=mZ(Q,K,J.key),Y=TX(Z,G,X);return LX(Y,G,0,V)}else if(J instanceof cZ)return Z;else{let X=J.attributes,V=mZ(Q,K,J.key);return TX(Z,V,X)}}function jQ(Z,Q,K,J){let X=qX(Z.handlers,Q,K,J);return new DQ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function u6(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(M instanceof O)return V;else{let{head:H,tail:R}=M;Z=CX(V,G,W,Y,H),Q=G,K=W,J=Y+1,X=R}}}function CX(Z,Q,K,J,X){if(X instanceof uZ){let V=X.children,G=mZ(K,J,X.key),W=yQ(Q,X.mapper);return u6(Z,W,G,0,V)}else if(X instanceof yZ){let{attributes:V,children:G}=X,W=mZ(K,J,X.key),Y=yQ(Q,X.mapper),H=PX(Z,Y,W,V);return u6(H,Y,W,0,G)}else if(X instanceof cZ)return Z;else{let V=X.attributes,G=mZ(K,J,X.key),W=yQ(Q,X.mapper);return PX(Z,W,G,V)}}function zQ(Z,Q,K,J,X){let V=CX(Z.handlers,Q,K,J,X);return new DQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function p6(Z){return zQ(c6(),QZ,A0,0,Z)}function wX(Z,Q,K,J,X){let V=u6(Z.handlers,Q,K,J,X);return new DQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function aZ(Z,Q,K){return K8("",QZ,"",Z,Q,K,kZ(),!1,!1)}function XK(Z){return $6("",QZ,Z)}function J8(){return $6("",QZ,"")}function qZ(Z){return XK(Z)}function EX(Z,Q){return aZ("section",Z,Q)}function oZ(Z,Q){return aZ("div",Z,Q)}function d6(Z,Q){return aZ("dl",Z,Q)}function X8(Z,Q){return aZ("dt",Z,Q)}function s6(Z,Q){return aZ("li",Z,Q)}function V8(Z,Q){return aZ("span",Z,Q)}function G8(Z,Q){return aZ("button",Z,Q)}function n6(Z){return aZ("input",Z,g)}function l6(Z,Q){return aZ("label",Z,Q)}class W8 extends I{constructor(Z,Q,K,J){super();this.index=Z,this.removed=Q,this.changes=K,this.children=J}}class xX extends I{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class kX extends I{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class yX extends I{constructor(Z,Q,K){super();this.kind=Z,this.added=Q,this.removed=K}}class bX extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.before=K}}class gX extends I{constructor(Z,Q,K){super();this.kind=Z,this.index=Q,this.with=K}}class fX extends I{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class vX extends I{constructor(Z,Q,K){super();this.kind=Z,this.children=Q,this.before=K}}function r6(Z,Q,K,J){return new W8(Z,Q,K,J)}var a6=0;function hX(Z){return new xX(a6,Z)}var o6=1;function _X(Z){return new kX(o6,Z)}var t6=2;function e6(Z,Q){return new yX(t6,Z,Q)}var Z9=3;function $X(Z,Q){return new bX(Z9,Z,Q)}var Q9=4;function mX(Z){return new fX(Q9,Z)}var K9=5;function Z0(Z,Q){return new gX(K9,Z,Q)}var J9=6;function X9(Z,Q){return new vX(J9,Z,Q)}class cX extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=K,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=V,this.provided_contexts=G,this.vdom=W}}class pX extends I{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class dX extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.data=K}}class sX extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.value=K}}class VK extends I{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class GK extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class WK extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class YK extends I{constructor(Z,Q,K,J){super();this.kind=Z,this.path=Q,this.name=K,this.event=J}}class V9 extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.value=K}}var hW=0;function nX(Z,Q,K,J,X,V,G){return new cX(hW,Z,Q,K,J,X,V,G)}var _W=1;function G9(Z){return new pX(_W,Z)}var $W=2;function lX(Z,Q){return new dX($W,Z,Q)}var mW=3;function iX(Z,Q){return new sX(mW,Z,Q)}class MK extends I{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class oX extends I{constructor(Z,Q,K){super();this.added=Z,this.removed=Q,this.events=K}}function uW(Z,Q,K,J){if(K==="input"&&Q==="")return JK(Z,J);else if(K==="select"&&Q==="")return JK(Z,J);else if(K==="textarea"&&Q==="")return JK(Z,J);else return!1}function aX(Z,Q,K,J,X,V,G,W){while(!0){let Y=Z,M=Q,H=K,R=J,j=X,B=V,L=G,C=W;if(j instanceof O)if(B instanceof O)return new oX(L,C,R);else{let P=B.head;if(P instanceof OZ){let E=P,A=B.tail,S=P.name,y=P.handler,D=U(E,L),w=q0(R,H,M,S,y);Z=Y,Q=M,K=H,J=w,X=j,V=A,G=D,W=C}else{let E=P,A=B.tail,S=U(E,L);Z=Y,Q=M,K=H,J=R,X=j,V=A,G=S,W=C}}else if(B instanceof O){let P=j.head;if(P instanceof OZ){let E=P,A=j.tail,S=P.name,y=U(E,C),D=KK(R,M,S);Z=Y,Q=M,K=H,J=D,X=A,V=B,G=L,W=y}else{let E=P,A=j.tail,S=U(E,C);Z=Y,Q=M,K=H,J=R,X=A,V=B,G=L,W=S}}else{let{head:P,tail:E}=j,A=B.head,S=B.tail,y=t8(P,A);if(y instanceof XZ)if(P instanceof OZ){let D=P.name,w=U(P,C),k=KK(R,M,D);Z=Y,Q=M,K=H,J=k,X=E,V=B,G=L,W=w}else{let D=U(P,C);Z=Y,Q=M,K=H,J=R,X=E,V=B,G=L,W=D}else if(y instanceof VZ)if(P instanceof $Z)if(A instanceof $Z){let D,w=A.name;if(w==="value")D=Y||P.value!==A.value;else if(w==="checked")D=Y||P.value!==A.value;else if(w==="selected")D=Y||P.value!==A.value;else D=P.value!==A.value;let k=D,b;if(k)b=U(A,L);else b=L;let f=b;Z=Y,Q=M,K=H,J=R,X=E,V=S,G=f,W=C}else if(A instanceof OZ){let{name:D,handler:w}=A,k=U(A,L),b=U(P,C),f=q0(R,H,M,D,w);Z=Y,Q=M,K=H,J=f,X=E,V=S,G=k,W=b}else{let D=U(A,L),w=U(P,C);Z=Y,Q=M,K=H,J=R,X=E,V=S,G=D,W=w}else if(P instanceof e8)if(A instanceof e8){let D,w=A.name;if(w==="scrollLeft")D=!0;else if(w==="scrollRight")D=!0;else if(w==="value")D=Y||!tQ(P.value,A.value);else if(w==="checked")D=Y||!tQ(P.value,A.value);else if(w==="selected")D=Y||!tQ(P.value,A.value);else D=!tQ(P.value,A.value);let k=D,b;if(k)b=U(A,L);else b=L;let f=b;Z=Y,Q=M,K=H,J=R,X=E,V=S,G=f,W=C}else if(A instanceof OZ){let{name:D,handler:w}=A,k=U(A,L),b=U(P,C),f=q0(R,H,M,D,w);Z=Y,Q=M,K=H,J=f,X=E,V=S,G=k,W=b}else{let D=U(A,L),w=U(P,C);Z=Y,Q=M,K=H,J=R,X=E,V=S,G=D,W=w}else if(A instanceof OZ){let{name:D,handler:w}=A,k=P.prevent_default.kind!==A.prevent_default.kind||P.stop_propagation.kind!==A.stop_propagation.kind||P.immediate!==A.immediate||P.debounce!==A.debounce||P.throttle!==A.throttle,b;if(k)b=U(A,L);else b=L;let f=b,x=q0(R,H,M,D,w);Z=Y,Q=M,K=H,J=x,X=E,V=S,G=f,W=C}else{let D=P.name,w=U(A,L),k=U(P,C),b=KK(R,M,D);Z=Y,Q=M,K=H,J=b,X=E,V=S,G=w,W=k}else if(A instanceof OZ){let{name:D,handler:w}=A,k=U(A,L),b=q0(R,H,M,D,w);Z=Y,Q=M,K=H,J=b,X=j,V=S,G=k,W=C}else{let D=U(A,L);Z=Y,Q=M,K=H,J=R,X=j,V=S,G=D,W=C}}}}function W9(Z,Q,K,J,X,V,G,W,Y,M,H,R,j,B){while(!0){let L=Z,C=Q,P=K,E=J,A=X,S=V,y=G,D=W,w=Y,k=M,b=H,f=R,x=j,m=B;if(L instanceof O)if(P instanceof O)return new MK(new W8(w,y,b,f),m);else{let CZ=wX(m,x,k,D,P),BZ=X9(P,D-S),t=U(BZ,b);return new MK(new W8(w,y,t,f),CZ)}else if(P instanceof O){let{head:CZ,tail:BZ}=L,t;if(CZ.key===""||!e0(A,CZ.key))t=y+1;else t=y;let c=t,d=jQ(m,k,D,CZ);Z=BZ,Q=C,K=P,J=E,X=A,V=S,G=c,W=D,Y=w,M=k,H=b,R=f,j=x,B=d}else{let CZ=L.head,BZ=P.head;if(CZ.key!==BZ.key){let t=L.tail,e=P.tail,c=t0(C,BZ.key);if(e0(E,CZ.key))if(c instanceof N){let h=c[0];if(e0(A,CZ.key))Z=t,Q=C,K=P,J=E,X=A,V=S-1,G=y,W=D,Y=w,M=k,H=b,R=f,j=x,B=m;else{let s=D-S,_=U($X(BZ.key,s),b),ZZ=rQ(A,BZ.key,void 0),n=S+1;Z=U(h,L),Q=C,K=P,J=E,X=ZZ,V=n,G=y,W=D,Y=w,M=k,H=_,R=f,j=x,B=m}}else{let h=D-S,p=zQ(m,x,k,D,BZ),s=X9(F([BZ]),h),_=U(s,b);Z=L,Q=C,K=e,J=E,X=A,V=S+1,G=y,W=D+1,Y=w,M=k,H=_,R=f,j=x,B=p}else if(c instanceof N){let h=D-S,p=U(mX(h),b),s=jQ(m,k,D,CZ),_=S-1;Z=t,Q=C,K=P,J=E,X=A,V=_,G=y,W=D,Y=w,M=k,H=p,R=f,j=x,B=s}else{let h=Z0(D-S,BZ),p,_=jQ(m,k,D,CZ);p=zQ(_,x,k,D,BZ);let ZZ=p;Z=t,Q=C,K=e,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(h,b),R=f,j=x,B=ZZ}}else{let t=L.head;if(t instanceof uZ){let e=P.head;if(e instanceof uZ){let c=t,d=L.tail,h=e,p=P.tail,s=yQ(x,h.mapper),_=mZ(k,D,h.key),ZZ=W9(c.children,c.keyed_children,h.children,h.keyed_children,kZ(),0,0,0,D,_,g,g,s,m),n,JZ=ZZ.patch;if(JZ.changes instanceof O)if(JZ.children instanceof O)if(JZ.removed===0)n=f;else n=U(ZZ.patch,f);else n=U(ZZ.patch,f);else n=U(ZZ.patch,f);let tZ=n;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=b,R=tZ,j=x,B=ZZ.events}else{let c=t,d=L.tail,h=e,p=P.tail,s=Z0(D-S,h),_,n=jQ(m,k,D,c);_=zQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,b),R=f,j=x,B=JZ}}else if(t instanceof yZ){let e=P.head;if(e instanceof yZ){let c=t,d=e;if(c.namespace===d.namespace&&c.tag===d.tag){let h=L.tail,p=P.tail,s=yQ(x,d.mapper),_=mZ(k,D,d.key),ZZ=uW(m,d.namespace,d.tag,_),n=aX(ZZ,_,s,m,c.attributes,d.attributes,g,g),JZ,WQ,tZ;JZ=n.added,WQ=n.removed,tZ=n.events;let vQ;if(JZ instanceof O&&WQ instanceof O)vQ=g;else vQ=F([e6(JZ,WQ)]);let W0=vQ,Y0=W9(c.children,c.keyed_children,d.children,d.keyed_children,kZ(),0,0,0,D,_,W0,g,s,tZ),LQ,hQ=Y0.patch;if(hQ.changes instanceof O)if(hQ.children instanceof O)if(hQ.removed===0)LQ=f;else LQ=U(Y0.patch,f);else LQ=U(Y0.patch,f);else LQ=U(Y0.patch,f);let S7=LQ;Z=h,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=b,R=S7,j=x,B=Y0.events}else{let h=t,p=L.tail,s=e,_=P.tail,ZZ=Z0(D-S,s),n,WQ=jQ(m,k,D,h);n=zQ(WQ,x,k,D,s);let tZ=n;Z=p,Q=C,K=_,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(ZZ,b),R=f,j=x,B=tZ}}else{let c=t,d=L.tail,h=e,p=P.tail,s=Z0(D-S,h),_,n=jQ(m,k,D,c);_=zQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,b),R=f,j=x,B=JZ}}else if(t instanceof cZ){let e=P.head;if(e instanceof cZ){let c=t,d=e;if(c.content===d.content){let h=L.tail,p=P.tail;Z=h,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=b,R=f,j=x,B=m}else{let h=L.tail,p=e,s=P.tail,_=r6(D,0,F([hX(p.content)]),g);Z=h,Q=C,K=s,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=b,R=U(_,f),j=x,B=m}}else{let c=t,d=L.tail,h=e,p=P.tail,s=Z0(D-S,h),_,n=jQ(m,k,D,c);_=zQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,b),R=f,j=x,B=JZ}}else{let e=P.head;if(e instanceof aQ){let c=t,d=L.tail,h=e,p=P.tail,s=yQ(x,h.mapper),_=mZ(k,D,h.key),ZZ=aX(!1,_,s,m,c.attributes,h.attributes,g,g),n,JZ,WQ;n=ZZ.added,JZ=ZZ.removed,WQ=ZZ.events;let tZ;if(n instanceof O&&JZ instanceof O)tZ=g;else tZ=F([e6(n,JZ)]);let vQ=tZ,W0;if(c.inner_html===h.inner_html)W0=vQ;else W0=U(_X(h.inner_html),vQ);let LQ=W0,hQ;if(LQ instanceof O)hQ=f;else hQ=U(r6(D,0,LQ,F([])),f);let a9=hQ;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=b,R=a9,j=x,B=WQ}else{let c=t,d=L.tail,h=e,p=P.tail,s=Z0(D-S,h),_,n=jQ(m,k,D,c);_=zQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,b),R=f,j=x,B=JZ}}}}}}function C0(Z,Q,K){return W9(F([Q]),kZ(),F([K]),kZ(),kZ(),0,0,0,0,A0,g,g,QZ,AX(Z))}var{setTimeout:cW,clearTimeout:Y9}=globalThis,pW=(Z,Q)=>_Z().createElementNS(Z,Q),dW=(Z)=>_Z().createTextNode(Z),sW=()=>_Z().createDocumentFragment(),w0=(Z,Q,K)=>Z.insertBefore(Q,K),eX=oJ?(Z,Q,K)=>Z.moveBefore(Q,K):w0,nW=(Z,Q)=>Z.removeChild(Q),lW=(Z,Q)=>Z.getAttribute(Q),ZV=(Z,Q,K)=>Z.setAttribute(Q,K),iW=(Z,Q)=>Z.removeAttribute(Q),rW=(Z,Q,K,J)=>Z.addEventListener(Q,K,J),QV=(Z,Q,K)=>Z.removeEventListener(Q,K),aW=(Z,Q)=>Z.innerHTML=Q,oW=(Z,Q)=>Z.data=Q,OQ=Symbol("lustre");class XV{constructor(Z,Q,K,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=K,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===rZ?this.node.parentNode:this.node}}var TQ=(Z,Q,K,J,X)=>{let V=new XV(Z,Q,K,X);return K[OQ]=V,Q?.children.splice(J,0,V),V},tW=(Z)=>{let Q="";for(let K=Z[OQ];K.parent;K=K.parent)if(K.key)Q=`${Q8}${K.key}${Q}`;else{let J=K.parent.children.indexOf(K);Q=`${Q8}${J}${Q}`}return Q.slice(1)};class H9{#Z=null;#X=()=>{};#J=!1;#K=!1;constructor(Z,Q,{useServerEvents:K=!1,exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#J=K,this.#K=J}mount(Z){TQ(oQ,null,this.#Z,0,null),this.#z(this.#Z,null,this.#Z[OQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[OQ],patch:Z}),this.#V()}#Q=[];#V(){let Z=this.#Q;while(Z.length){let{node:Q,patch:K}=Z.pop(),{children:J}=Q,{changes:X,removed:V,children:G}=K;if(Q0(X,(W)=>this.#W(Q,W)),V)this.#R(Q,J.length-V,V);Q0(G,(W)=>{let Y=J[W.index|0];this.#Q.push({node:Y,patch:W})})}}#W(Z,Q){switch(Q.kind){case a6:this.#A(Z,Q);break;case o6:this.#O(Z,Q);break;case t6:this.#N(Z,Q);break;case Z9:this.#H(Z,Q);break;case Q9:this.#I(Z,Q);break;case K9:this.#F(Z,Q);break;case J9:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:K}){let J=sW(),X=this.#M(Z,K);this.#j(J,null,Z,K|0,Q),w0(Z.parentNode,J,X)}#F(Z,{index:Q,with:K}){this.#R(Z,Q|0,1);let J=this.#M(Z,Q);this.#z(Z.parentNode,J,Z,Q|0,K)}#M(Z,Q){Q=Q|0;let{children:K}=Z,J=K.length;if(Q<J)return K[Q].node;let X=K[J-1];if(!X&&Z.kind!==rZ)return null;if(!X)X=Z;while(X.kind===rZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#H(Z,{key:Q,before:K}){K=K|0;let{children:J,parentNode:X}=Z,V=J[K].node,G=J[K];for(let H=K+1;H<J.length;++H){let R=J[H];if(J[H]=G,G=R,R.key===Q){J[K]=R;break}}let{kind:W,node:Y,children:M}=G;if(eX(X,Y,V),W===rZ)this.#G(X,M,V)}#G(Z,Q,K){for(let J=0;J<Q.length;++J){let{kind:X,node:V,children:G}=Q[J];if(eX(Z,V,K),X===rZ)this.#G(Z,G,K)}}#I(Z,{index:Q}){this.#R(Z,Q,1)}#R(Z,Q,K){let{children:J,parentNode:X}=Z,V=J.splice(Q,K);for(let G=0;G<V.length;++G){let{kind:W,node:Y,children:M}=V[G];if(nW(X,Y),this.#U(V[G]),W===rZ)V.push(...M)}}#U(Z){let{debouncers:Q,children:K}=Z;for(let{timeout:J}of Q.values())if(J)Y9(J);Q.clear(),Q0(K,(J)=>this.#U(J))}#N({node:Z,handlers:Q,throttles:K,debouncers:J},{added:X,removed:V}){Q0(V,({name:G})=>{if(Q.delete(G))QV(Z,G,M9),this.#D(K,G,0),this.#D(J,G,0);else iW(Z,G),JV[G]?.removed?.(Z,G)}),Q0(X,(G)=>this.#L(Z,G))}#A({node:Z},{content:Q}){oW(Z,Q??"")}#O({node:Z},{inner_html:Q}){aW(Z,Q??"")}#j(Z,Q,K,J,X){Q0(X,(V)=>this.#z(Z,Q,K,J++,V))}#z(Z,Q,K,J,X){switch(X.kind){case oQ:{let V=this.#T(K,J,X);this.#j(V,null,V[OQ],0,X.children),w0(Z,V,Q);break}case B0:{let V=this.#P(K,J,X);w0(Z,V,Q);break}case rZ:{let V=this.#P(K,J,X);w0(Z,V,Q),this.#j(Z,Q,V[OQ],0,X.children);break}case OX:{let V=this.#T(K,J,X);this.#O({node:V},X),w0(Z,V,Q);break}}}#T(Z,Q,{kind:K,key:J,tag:X,namespace:V,attributes:G}){let W=pW(V||i8,X);if(TQ(K,Z,W,Q,J),this.#K&&J)ZV(W,"data-lustre-key",J);return Q0(G,(Y)=>this.#L(W,Y)),W}#P(Z,Q,{kind:K,key:J,content:X}){let V=dW(X??"");return TQ(K,Z,V,Q,J),V}#L(Z,Q){let{debouncers:K,handlers:J,throttles:X}=Z[OQ],{kind:V,name:G,value:W,prevent_default:Y,debounce:M,throttle:H}=Q;switch(V){case A6:{let R=W??"";if(G==="virtual:defaultValue"){Z.defaultValue=R;return}if(R!==lW(Z,G))ZV(Z,G,R);JV[G]?.added?.(Z,R);break}case WX:Z[G]=W;break;case B6:{if(J.has(G))QV(Z,G,M9);let R=Y.kind===S6;rW(Z,G,M9,{passive:R}),this.#D(X,G,H),this.#D(K,G,M),J.set(G,(j)=>this.#B(Q,j));break}}}#D(Z,Q,K){let J=Z.get(Q);if(K>0)if(J)J.delay=K;else Z.set(Q,{delay:K});else if(J){let{timeout:X}=J;if(X)Y9(X);Z.delete(Q)}}#B(Z,Q){let{currentTarget:K,type:J}=Q,{debouncers:X,throttles:V}=K[OQ],G=tW(K),{prevent_default:W,stop_propagation:Y,include:M,immediate:H}=Z;if(W.kind===C6)Q.preventDefault();if(Y.kind===C6)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let R=this.#J?eW(Q,M??[]):Q,j=V.get(J);if(j){let L=Date.now(),C=j.last||0;if(L>C+j.delay)j.last=L,j.lastEvent=Q,this.#X(R,G,J,H)}let B=X.get(J);if(B)Y9(B.timeout),B.timeout=cW(()=>{if(Q===V.get(J)?.lastEvent)return;this.#X(R,G,J,H)},B.delay);if(!j&&!B)this.#X(R,G,J,H)}}var Q0=(Z,Q)=>{if(Array.isArray(Z))for(let K=0;K<Z.length;K++)Q(Z[K]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},M9=(Z)=>{let{currentTarget:Q,type:K}=Z;Q[OQ].handlers.get(K)(Z)},eW=(Z,Q=[])=>{let K={};if(Z.type==="input"||Z.type==="change")Q.push("target.value");if(Z.type==="submit")Q.push("detail.formData");for(let J of Q){let X=J.split(".");for(let V=0,G=Z,W=K;V<X.length;V++){if(V===X.length-1){W[X[V]]=G[X[V]];break}W=W[X[V]]??={},G=G[X[V]]}}return K},KV=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},Z5=(Z)=>{return{added(Q,K){Q[Z]=K}}},JV={checked:KV("checked"),selected:KV("selected"),value:Z5("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function Q5(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return[X,u(V)];else{let G=J.tail,W=J.head[0],Y=J.head[1],M=zX(W,Y),H;if(W==="")H=X;else H=rQ(X,W,M);let R=H,j=U(M,V);Z=G,Q=R,K=j}}}function F9(Z){return Q5(Z,kZ(),g)}function I9(Z,Q,K){let J=F9(K),X,V;return X=J[0],V=J[1],K8("",QZ,"",Z,Q,V,X,!1,!1)}function VV(Z,Q,K,J){let X=F9(J),V,G;return V=X[0],G=X[1],K8("",QZ,Z,Q,K,G,V,!1,!1)}function GV(Z){let Q=F9(Z),K,J;return K=Q[0],J=Q[1],_6("",QZ,J,K)}function U9(Z,Q){return I9("ul",Z,Q)}var WV=(Z)=>{let Q=TQ(oQ,null,Z,0,null),K=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(YV(G))K+=1;if(K===0){let G=_Z().createTextNode("");return TQ(B0,Q,G,0,null),Z.replaceChildren(G),J8()}if(K===1)return R9(Q,Z).head[1];let J=_Z().createTextNode(""),X=TQ(rZ,Q,J,0,null),V=R9(X,Z);return Z.insertBefore(J,Z.firstChild),GV(V)},YV=(Z)=>{switch(Z.nodeType){case r8:return!0;case P6:return!!Z.data;default:return!1}},J5=(Z,Q,K,J)=>{if(!YV(Q))return null;switch(Q.nodeType){case r8:{let X=TQ(oQ,Z,Q,J,K),V=Q.localName,G=Q.namespaceURI,W=!G||G===i8;if(W&&X5.includes(V))V5(V,Q);let Y=G5(Q),M=R9(X,Q);return W?I9(V,Y,M):VV(G,V,Y,M)}case P6:return TQ(B0,Z,Q,J,null),XK(Q.data);default:return null}},X5=["input","select","textarea"],V5=(Z,Q)=>{let{value:K,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!K)return;queueMicrotask(()=>{if(Q.value=K,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),_Z().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},R9=(Z,Q)=>{let K=null,J=Q.firstChild,X=null,V=0;while(J){let G=J.nodeType===r8?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let W=J5(Z,J,G,V),Y=J.nextSibling;if(W){let M=new bZ([G??"",W],null);if(X)X=X.tail=M;else X=K=M;V+=1}else Q.removeChild(J);J=Y}if(!X)return g;return X.tail=g,K},G5=(Z)=>{let Q=Z.attributes.length,K=g;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;K=new bZ(W5(J),K)}return K},W5=(Z)=>{let{localName:Q,value:K}=Z;return GQ(Q,K)};var gQ=()=>!!_Z();class HK{constructor(Z,[Q,K],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#J=X,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#W.has(V.context))return;V.stopImmediatePropagation();let G=this.#W.get(V.context);if(V.subscribe){let W=()=>{G.subscribers=G.subscribers.filter((Y)=>Y!==V.callback)};G.subscribers.push([V.callback,W]),V.callback(G.value,W)}else V.callback(G.value)}),this.#V=new H9(this.root,(V,G,W)=>{let[Y,M]=S0(this.#Q,G,W,V);if(this.#Q=Y,M.isOk()){let H=M[0];if(H.stop_propagation)V.stopPropagation();if(H.prevent_default)V.preventDefault();this.dispatch(H.message,!1)}}),this.#K=WV(this.root),this.#Q=c6(),this.#I=!0,this.#U(K)}root=null;dispatch(Z,Q=!1){if(this.#I||=Q,this.#Y)this.#F.push(Z);else{let[K,J]=this.#J(this.#Z,Z);this.#Z=K,this.#U(J)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#W.has(Z))this.#W.set(Z,{value:Q,subscribers:[]});else{let K=this.#W.get(Z);K.value=Q;for(let J=K.subscribers.length-1;J>=0;J--){let[X,V]=K.subscribers[J];if(!X){K.subscribers.splice(J,1);continue}X(Q,V)}}}#Z;#X;#J;#K;#Q;#V;#W=new Map;#Y=!1;#F=[];#M=g;#H=g;#G=null;#I=!1;#R={dispatch:(Z,Q)=>this.dispatch(Z,Q),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#U(Z){this.#Y=!0;while(!0){for(let Q=Z.synchronous;Q.tail;Q=Q.tail)Q.head(this.#R);if(this.#M=HV(this.#M,Z.before_paint),this.#H=HV(this.#H,Z.after_paint),!this.#F.length)break;[this.#Z,Z]=this.#J(this.#Z,this.#F.shift())}if(this.#Y=!1,this.#I)cancelAnimationFrame(this.#G),this.#N();else if(!this.#G)this.#G=requestAnimationFrame(()=>{this.#N()})}#N(){this.#I=!1,this.#G=null;let Z=this.#X(this.#Z),{patch:Q,events:K}=C0(this.#Q,this.#K,Z);if(this.#Q=K,this.#K=Z,this.#V.push(Q),this.#M instanceof bZ){let J=MV(this.#M);this.#M=g,queueMicrotask(()=>{this.#I=!0,this.#U(J)})}if(this.#H instanceof bZ){let J=MV(this.#H);this.#H=g,requestAnimationFrame(()=>{this.#I=!0,this.#U(J)})}}}var N9=(Z,Q)=>{Z.send(Q)};function MV(Z){return{synchronous:Z,after_paint:g,before_paint:g}}function HV(Z,Q){if(Z instanceof O)return Q;else if(Q instanceof O)return Z;else return mQ(Z,Q)}class j9 extends I{constructor(Z){super();this.message=Z}}class z9 extends I{constructor(Z){super();this.callback=Z}}class O9 extends I{constructor(Z){super();this.callback=Z}}class PQ extends I{constructor(Z){super();this.message=Z}}class K0 extends I{constructor(Z,Q){super();this.name=Z,this.data=Q}}class FK extends I{constructor(Z,Q){super();this.key=Z,this.value=Q}}class J0 extends I{}class IV extends I{constructor(Z,Q,K,J,X,V,G,W,Y,M){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=K,this.attributes=J,this.properties=X,this.contexts=V,this.is_form_associated=G,this.on_form_autofill=W,this.on_form_reset=Y,this.on_form_restore=M}}function UV(Z){let Q=new IV(!0,!0,!1,g,g,g,!1,a8,a8,a8);return IZ(Z,Q,(K,J)=>{return J.apply(K)})}class NV{#Z;constructor(Z,[Q,K],J,X){this.#Z=new HK(Z,[Q,K],X,J)}send(Z){switch(Z.constructor){case PQ:{this.dispatch(Z.message,!1);break}case K0:{this.emit(Z.name,Z.data);break}case J0:break}}dispatch(Z,Q){this.#Z.dispatch(Z,Q)}emit(Z,Q){this.#Z.emit(Z,Q)}}var DV=({init:Z,update:Q,view:K},J,X)=>{if(!gQ())return new T(new Y8);let V=J instanceof HTMLElement?J:_Z().querySelector(J);if(!V)return new T(new T9(J));return new N(new NV(V,Z(X),Q,K))};class Y5{#Z;#X;#J;#K;#Q;#V;#W=$Q();#Y=new Set;constructor([Z,Q],K,J,X){this.#Z=Z,this.#X=K,this.#J=J,this.#K=X,this.#Q=this.#J(this.#Z),this.#V=p6(this.#Q),this.#G(Q)}send(Z){switch(Z.constructor){case j9:{let{message:Q}=Z,K=this.#F(Q),J=C0(this.#V,this.#Q,K);this.#Q=K,this.#V=J.events,this.broadcast(G9(J.patch));return}case z9:{let{callback:Q}=Z;this.#Y.add(Q),Q(nX(this.#K.open_shadow_root,this.#K.adopt_styles,v0(this.#K.attributes),v0(this.#K.properties),v0(this.#K.contexts),this.#W,this.#Q));return}case O9:{let{callback:Q}=Z;this.#Y.delete(Q);return}case PQ:{let{message:Q}=Z,[K,J]=this.#X(this.#Z,Q),X=this.#J(K),V=C0(this.#V,this.#Q,X);this.#G(J),this.#Z=K,this.#Q=X,this.#V=V.events,this.broadcast(G9(V.patch));return}case K0:{let{name:Q,data:K}=Z;this.broadcast(lX(Q,K));return}case FK:{let{key:Q,value:K}=Z;this.#W=f0(this.#W,Q,K),this.broadcast(iX(Q,K));return}case J0:{this.#Z=null,this.#X=null,this.#J=null,this.#K=null,this.#Q=null,this.#V=null,this.#W=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#F(Z){switch(Z.constructor){case VK:{let{messages:Q}=Z,K=this.#Z,J=o();for(let X=Q;X.head;X=X.tail){let V=this.#F(X.head);if(V instanceof N){K=V[0][0],J=ZK(MZ.fromArray([J,V[0][1]]));break}}return this.#G(J),this.#Z=K,this.#J(this.#Z)}case GK:{let{name:Q,value:K}=Z,J=this.#M(Q,K);if(J instanceof T)return this.#Q;else{let[X,V]=this.#X(this.#Z,J[0]);return this.#G(V),this.#Z=X,this.#J(this.#Z)}}case WK:{let{name:Q,value:K}=Z,J=this.#H(Q,K);if(J instanceof T)return this.#Q;else{let[X,V]=this.#X(this.#Z,J[0]);return this.#G(V),this.#Z=X,this.#J(this.#Z)}}case YK:{let{path:Q,name:K,event:J}=Z,[X,V]=S0(this.#V,Q,K,J);if(this.#V=X,V instanceof T)return this.#Q;else{let[G,W]=this.#X(this.#Z,V[0].message);return this.#G(W),this.#Z=G,this.#J(this.#Z)}}case V9:{let{key:Q,value:K}=Z,J=AQ(this.#K.contexts,Q);if(J instanceof T)return this.#Q;if(J=FQ(K,J[0]),J instanceof T)return this.#Q;let[X,V]=this.#X(this.#Z,J[0]);return this.#G(V),this.#Z=X,this.#J(this.#Z)}}}#M(Z,Q){let K=AQ(this.#K.attributes,Z);switch(K.constructor){case N:return K[0](Q);case T:return new T(void 0)}}#H(Z,Q){let K=AQ(this.#K.properties,Z);switch(K.constructor){case N:return K[0](Q);case T:return new T(void 0)}}#G(Z){let Q=(G)=>this.send(new PQ(G)),K=(G,W)=>this.send(new K0(G,W)),J=()=>{return},X=()=>{return},V=(G,W)=>this.send(new FK(G,W));globalThis.queueMicrotask(()=>{IX(Z,Q,K,J,X,V)})}}class jV extends I{constructor(Z,Q,K,J){super();this.init=Z,this.update=Q,this.view=K,this.config=J}}class T9 extends I{constructor(Z){super();this.selector=Z}}class Y8 extends I{}function zV(Z,Q,K){return new jV(Z,Q,K,UV(g))}function OV(Z){return new PQ(Z)}function TV(Z,Q,K){return EQ(!gQ(),new T(new Y8),()=>{return DV(Z,Q,K)})}var I5={handle_external_links:!1,handle_internal_links:!0},SV=globalThis?.window?.location?.href,L9=()=>{if(!SV)return new T(void 0);else return new N(P9(new URL(SV)))},A9=(Z,Q=I5)=>{document.addEventListener("click",(K)=>{let J=CV(K.target);if(!J)return;try{let X=new URL(J.href),V=P9(X),G=X.host!==window.location.host||J.target==="_blank";if(!Q.handle_external_links&&G)return;if(!Q.handle_internal_links&&!G)return;if(K.preventDefault(),!G)window.history.pushState({},"",J.href),window.requestAnimationFrame(()=>{if(X.hash)document.getElementById(X.hash.slice(1))?.scrollIntoView();else window.scrollTo(0,0)});return Z(V)}catch{return}}),window.addEventListener("popstate",(K)=>{K.preventDefault();let J=new URL(window.location.href),X=P9(J);window.requestAnimationFrame(()=>{if(J.hash)document.getElementById(J.hash.slice(1))?.scrollIntoView();else window.scrollTo(0,0)}),Z(X)}),window.addEventListener("modem-push",({detail:K})=>{Z(K)}),window.addEventListener("modem-replace",({detail:K})=>{Z(K)})},qV=(Z)=>{window.history.pushState({},"",b8(Z)),window.requestAnimationFrame(()=>{if(Z.fragment[0])document.getElementById(Z.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:Z}))};var CV=(Z)=>{if(!Z||Z.tagName==="BODY")return null;else if(Z.tagName==="A")return Z;else return CV(Z.parentElement)},P9=(Z)=>{return new v(Z.protocol?new z(Z.protocol.slice(0,-1)):new q,new q,Z.hostname?new z(Z.hostname):new q,Z.port?new z(Number(Z.port)):new q,Z.pathname,Z.search?new z(Z.search.slice(1)):new q,Z.hash?new z(Z.hash.slice(1)):new q)};function EV(Z){return L0((Q)=>{return EQ(!gQ(),void 0,()=>{return A9((K)=>{let X=Z(K);return Q(X)})})})}function wV(Z){if(Z==="")return new q;else return new z(Z)}var IK=new v(new q,new q,new q,new q,"",new q,new q);function M8(Z,Q,K){return L0((J)=>{return EQ(!gQ(),void 0,()=>{return qV(new v(IK.scheme,IK.userinfo,IK.host,IK.port,Z,y0(Q,wV),y0(K,wV)))})})}function B9(Z,Q){return Q in Z?new N(Z[Q]):new T(void 0)}class X0{constructor(Z){this.promise=Z}static wrap(Z){return Z instanceof Promise?new X0(Z):Z}static unwrap(Z){return Z instanceof X0?Z.promise:Z}}function UK(Z){return Promise.resolve(X0.wrap(Z))}function xV(Z,Q){return Z.then((K)=>Q(X0.unwrap(K)))}function H8(Z,Q){return Z.then((K)=>X0.wrap(Q(X0.unwrap(K))))}function kV(Z,Q){return H8(Z,(J)=>{return Q(J),J})}function RK(Z,Q){return xV(Z,(J)=>{if(J instanceof N){let X=J[0];return Q(X)}else{let X=J[0];return UK(new T(X))}})}function S9(Z,Q){return document.addEventListener(Z,Q)}function E0(Z){let Q=document.getElementById(Z);if(!Q)return new T;return new N(Q)}function yV(Z){if(Z instanceof Element)return new N(Z);else return new T}function q9(Z){Z.scrollIntoView({behavior:"smooth",block:"nearest"})}function NK(Z,Q){return Z.contains(Q)}function C9(Z){return Z.target}function bV(Z){let Q=yV(Z);if(Q instanceof N)return Q;else return new T(new nZ("Element",dZ(Z),F([])))}class jK extends I{}class E9 extends I{}class fV extends I{}class vV extends I{}class hV extends I{}class _V extends I{}class $V extends I{}class mV extends I{}class uV extends I{}class x9 extends I{}class zK extends I{}function cV(Z){if(Z instanceof jK)return"GET";else if(Z instanceof E9)return"POST";else if(Z instanceof fV)return"HEAD";else if(Z instanceof vV)return"PUT";else if(Z instanceof hV)return"DELETE";else if(Z instanceof _V)return"TRACE";else if(Z instanceof $V)return"CONNECT";else if(Z instanceof mV)return"OPTIONS";else if(Z instanceof uV)return"PATCH";else return Z[0]}function pV(Z){if(Z instanceof x9)return"http";else return"https"}function dV(Z){let Q=hZ(Z);if(Q==="http")return new N(new x9);else if(Q==="https")return new N(new zK);else return new T(void 0)}class nV extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.method=Z,this.headers=Q,this.body=K,this.scheme=J,this.host=X,this.port=V,this.path=G,this.query=W}}function lV(Z){return new v(new z(pV(Z.scheme)),new q,new z(Z.host),Z.port,Z.path,Z.query,new q)}function iV(Z){return GZ((()=>{let Q=Z.scheme,K=eZ(Q,"");return dV(K)})(),(Q)=>{return GZ((()=>{let K=Z.host;return _K(K,void 0)})(),(K)=>{let J=new nV(new jK,F([]),"",Q,K,Z.port,Z.path,Z.query);return new N(J)})})}class k9 extends I{constructor(Z,Q,K){super();this.status=Z,this.headers=Q,this.body=K}}function aV(Z,Q){return eK(Z.headers,hZ(Q))}async function tV(Z){try{return new N(await fetch(Z))}catch(Q){return new T(new U8(Q.toString()))}}function eV(Z){return new k9(Z.status,MZ.fromArray([...Z.headers]),Z)}function P5(Z){let Q=b8(lV(Z)),K=cV(Z.method).toUpperCase(),J={headers:L5(Z.headers),method:K};return[Q,J]}function Z7(Z){let[Q,K]=P5(Z);if(K.method!=="GET"&&K.method!=="HEAD")K.body=Z.body;return new globalThis.Request(Q,K)}function L5(Z){let Q=new globalThis.Headers;for(let[K,J]of Z)Q.append(K.toLowerCase(),J);return Q}async function y9(Z){let Q;try{Q=await Z.body.text()}catch(K){return new T(new R8)}return new N(Z.withFields({body:Q}))}class U8 extends I{constructor(Z){super();this[0]=Z}}class R8 extends I{}function Q7(Z){let K=Z7(Z),J=tV(K);return RK(J,(X)=>{return UK(new N(eV(X)))})}var b9=(Z)=>{if(!globalThis.location)return new T(void 0);let Q=new URL(Z,globalThis.location.href),K=S5(Q);return new N(K)},S5=(Z)=>{let Q=(K)=>K?new z(K):new q;return new v(Q(Z.protocol?.slice(0,-1)),new q,Q(Z.hostname),Q(Z.port&&Number(Z.port)),Z.pathname,Q(Z.search?.slice(1)),Q(Z.hash?.slice(1)))};class g9 extends I{}class f9 extends I{constructor(Z){super();this[0]=Z}}class J7 extends I{constructor(Z){super();this[0]=Z}}class X7 extends I{constructor(Z){super();this[0]=Z}}class V7 extends I{}class TK extends I{constructor(Z){super();this[0]=Z}}class G7 extends I{constructor(Z){super();this.run=Z}}function q5(Z){return new G7((Q)=>{return Z(GZ(Q,(K)=>{let J=K.status,X=J;if(X>=200&&X<300)return new N(K);else{let V=J;if(V>=400&&V<600)return new T(new J7(K));else return new T(new TK(K))}}))})}function C5(Z){return q5((Q)=>{return Z(GZ(Q,(K)=>{let J=aV(K,"content-type");if(J instanceof N){let X=J[0];if(X==="application/json")return new N(K);else if(X.startsWith("application/json;"))return new N(K);else return new T(new TK(K))}else return new T(new TK(K))}))})}function w5(Z,Q){return L0((K)=>{let J=Q7(Z),X=RK(J,y9),V=H8(X,(W)=>{return D0(W,(Y)=>{if(Y instanceof U8)return new V7;else if(Y instanceof R8)return new g9;else return new g9})}),G=H8(V,Q.run);kV(G,K);return})}function E5(Z,Q){return w5(Z,Q)}function K7(Z,Q){return L0((K)=>{let J=new T(Z),X=Q.run(J);return K(X)})}function x5(Z,Q){let K=Z.body,J=T6(K,Q);return D0(J,(X)=>{return new X7(X)})}function N8(Z,Q){return C5((K)=>{let X=GZ(K,(V)=>{return x5(V,Z)});return Q(X)})}function k5(Z){let Q;if(Z.startsWith("./"))Q=b9(Z);else if(Z.startsWith("/"))Q=b9(Z);else Q=g8(Z);return p0(Q,new f9(Z))}function D8(Z,Q){let K=k5(Z);if(K instanceof N){let J=K[0],X=iV(J),V=KQ(X,(W)=>{return E5(W,Q)}),G=D0(V,(W)=>{return K7(new f9(Z),Q)});return Y6(G)}else{let J=K[0];return K7(J,Q)}}class j8 extends I{}class fQ extends I{constructor(Z,Q){super();this[0]=Z,this[1]=Q}}function v9(Z){let Q=u(Z),K;K=$0(Q,(V)=>{if(V[0]==="p"){let W=V[1];return GZ(w8(BQ(W)),(Y)=>{return new N(new fQ(Y,new q))})}else return new T(void 0)});let X=K;if(X instanceof N){let V=X[0];if(V instanceof fQ)if(V[1]instanceof q){let W=V[0],Y,H=$0(Q,(j)=>{if(j[0]==="w"){let L=j[1];return w8(BQ(L))}else return new T(void 0)});return Y=gZ(H),new fQ(W,Y)}else return V;else return V}else return new j8}class PK extends I{constructor(Z,Q){super();this.name=Z,this.code=Q}}class LK extends I{constructor(Z,Q,K){super();this.name=Z,this.code=Q,this.province_code=K}}class z8 extends I{}class AK extends I{}class BK extends I{}class V0 extends I{}class h9 extends I{}class SK extends I{}class qK extends I{}class CK extends I{constructor(Z){super();this[0]=Z}}class wK extends I{constructor(Z){super();this[0]=Z}}class EK extends I{constructor(Z){super();this[0]=Z}}class xK extends I{}class kK extends I{}class yK extends I{constructor(Z){super();this[0]=Z}}class bK extends I{constructor(Z){super();this[0]=Z}}class gK extends I{constructor(Z){super();this[0]=Z}}class O8 extends I{constructor(Z){super();this[0]=Z}}class T8 extends I{constructor(Z){super();this[0]=Z}}class P8 extends I{constructor(Z){super();this[0]=Z}}class L8 extends I{constructor(Z){super();this[0]=Z}}class fK extends I{constructor(Z){super();this[0]=Z}}class _9 extends I{constructor(Z){super();this[0]=Z}}class KZ extends I{constructor(Z,Q,K,J,X){super();this.is_shown=Z,this.filter_text=Q,this.filtered_items=K,this.selected_item=J,this.focused_index=X}}function A8(){return new KZ(!1,"",dJ(),new q,0)}function M7(){let Z="https://provinces.open-api.vn/api/v2/p/",Q=AZ("name",lZ,(J)=>{return AZ("code",SQ,(X)=>{return LZ(new PK(J,X))})}),K=N8(cQ(Q),(J)=>{return new O8(J)});return D8(Z,K)}function H7(Z){let Q="https://provinces.open-api.vn/api/v2/p/?"+dQ(F([["search",Z]])),K=AZ("name",lZ,(X)=>{return AZ("code",SQ,(V)=>{return LZ(new PK(X,V))})}),J=N8(cQ(K),(X)=>{return new T8(X)});return D8(Q,J)}function m9(Z){let Q="https://provinces.open-api.vn/api/v2/p/"+a(Z)+"?depth=2",K=AZ("name",lZ,(V)=>{return AZ("code",SQ,(G)=>{return LZ(new LK(V,G,Z))})}),J=AZ("wards",cQ(K),(V)=>{return LZ(V)}),X=N8(J,(V)=>{return new P8(V)});return D8(Q,X)}function F7(Z,Q){let K="https://provinces.open-api.vn/api/v2/w/?"+dQ(F([["search",Z],["province",a(Q)]])),J=AZ("name",lZ,(V)=>{return AZ("code",SQ,(G)=>{return AZ("province_code",SQ,(W)=>{return LZ(new LK(V,G,W))})})}),X=N8(cQ(J),(V)=>{return new L8(V)});return D8(K,X)}function b5(Z){if(Z==="input")return!0;else if(Z==="change")return!0;else if(Z==="focus")return!0;else if(Z==="focusin")return!0;else if(Z==="focusout")return!0;else if(Z==="blur")return!0;else if(Z==="select")return!0;else return!1}function G0(Z,Q){return YX(Z,m0(Q,(K)=>{return new r0(!1,!1,K)}),g,q6,q6,b5(Z),0,0)}function u9(Z,Q){if(Z instanceof OZ)return new OZ(Z.kind,Z.name,Z.handler,Z.include,Z.prevent_default,Z.stop_propagation,Z.immediate,x8(0,Q),Z.throttle);else return Z}function c9(Z){return G0("click",LZ(Z))}function p9(Z){return G0("input",X6(F(["target","value"]),lZ,(Q)=>{return LZ(Z(Q))}))}function d9(Z){return G0("focus",LZ(Z))}function I7(Z,Q){if(Z)return Q();else return Z}function s9(Z,Q){return Array.from(Z.querySelectorAll(Q))}function n9(Z,Q){let K=Z.getBoundingClientRect(),J=Q.getBoundingClientRect(),X=K.top-J.top,V=Q.clientHeight<=X+K.height,G=X<0;return V||G}class vK extends I{constructor(Z,Q,K,J,X){super();this.text_input=Z,this.choice_click=Q,this.input_focus=K,this.clear_click=J,this.option_navigate=X}}function U7(Z){return d6(F([$("max-w-md mt-8")]),F([X8(F([$("font-semibold text-lg")]),F([qZ(Z.name)])),X8(F([$("flex")]),F([V8(F([$("block")]),F([qZ("Mã số:")])),V8(F([$("block flex-grow text-end")]),F([qZ(a(Z.code))]))]))]))}function R7(Z){return d6(F([$("max-w-md mt-8")]),F([X8(F([$("font-semibold text-lg")]),F([qZ(Z.name)])),X8(F([$("flex")]),F([V8(F([$("block")]),F([qZ("Mã số:")])),V8(F([$("block flex-grow text-end")]),F([qZ(a(Z.code))]))]))]))}function N7(Z,Q){return G0("keyup",AZ("key",lZ,(K)=>{let J;if(K==="ArrowUp")J=new z(Z.option_navigate(new V0));else if(K==="ArrowDown")J=new z(Z.option_navigate(new h9));else if(K==="Enter")J=SZ(Q,Z.choice_click);else J=new q;let G=SZ(J,(W)=>{return LZ(W)});return QJ(G,()=>{return J6(Z.option_navigate(new V0),"SlideDir")})}))}function l9(Z,Q){return EQ(Q<=0,o(),()=>{return UX((K,J)=>{let X=Q-1,V=E0(Z),G,Y=KQ(V,(H)=>{return s9(H,"li")});G=GZ(Y,(H)=>{return B9(H,X)});let M=G;if(V instanceof N&&M instanceof N){let H=V[0],R=M[0];I7(n9(R,H),()=>{return q9(R),!0})}return})})}var D7="border focus-visible:outline-none focus-visible:ring-1 ps-2 pe-6 py-1 w-full rounded",j7="w-full text-start px-2 py-1.5 rounded cursor-pointer",z7="hover:bg-neutral-200 dark:hover:bg-neutral-600",h5="vn-focus",O7="bg-slate-200 dark:bg-slate-600 "+h5,T7="absolute end-0 px-2 text-xl hover:text-red-400 focus:text-red-400 hover:dark:text-red-400 cursor-pointer",P7="absolute z-1 top-10 start-0 end-0 sm:-end-4 py-2 ps-2 bg-neutral-50 dark:bg-neutral-800 rounded shadow";function L7(Z,Q,K){let J,X,V,G,W;J=Q.is_shown,X=Q.filter_text,V=Q.filtered_items,G=Q.selected_item,W=Q.focused_index;let Y;Y=N6(V,(S,y)=>{let D=G0("click",LZ(K.choice_click(S))),w;if(G instanceof z){let m=G[0];if(i(m,S))w="✓ ";else w=""}else w="";let k=w,b,f=W;if(f>0&&f===y+1)b=!0;else b=!1;let x=b;return[a(S.code),s6(F([iQ("option")]),F([G8(F([a0(F([[j7,!0],[O7,x],[z7,!x]])),D]),F([qZ(k+S.name)]))]))]});let H=Y,R,j=p9(K.text_input);R=u9(j,200);let B=R,L,P=W-1;if(P>=0){let y=R6(V,P);L=gZ(y)}else L=new q;let A=N7(K,L);return oZ(F([w6(Z),$("relative")]),F([n6(F([E6("search"),$(D7),iQ("combobox"),x6(X),B,d9(K.input_focus),A])),G8(F([$(T7),y6("Close"),k6(!0),c9(K.clear_click)]),F([qZ("⨯")])),oZ(F([$(P7),a0(F([["hidden",!J]]))]),F([oZ(F([$("max-h-40 overflow-y-auto")]),F([U9(F([$("pe-2"),iQ("listbox")]),D6(H))]))]))]))}function A7(Z,Q,K){let J,X,V,G,W;J=Q.is_shown,X=Q.filter_text,V=Q.filtered_items,G=Q.selected_item,W=Q.focused_index;let Y;Y=N6(V,(S,y)=>{let D=G0("click",LZ(K.choice_click(S))),w;if(G instanceof z){let m=G[0];if(i(m,S))w="✓ ";else w=""}else w="";let k=w,b,f=W;if(f>0&&f===y+1)b=!0;else b=!1;let x=b;return[a(S.code),s6(F([iQ("option")]),F([G8(F([a0(F([[j7,!0],[O7,x],[z7,!x]])),D]),F([qZ(k+S.name)]))]))]});let H=Y,R,j=p9(K.text_input);R=u9(j,200);let B=R,L,P=W-1;if(P>=0){let y=R6(V,P);L=gZ(y)}else L=new q;let A=N7(K,L);return oZ(F([w6(Z),$("relative")]),F([n6(F([E6("search"),$(D7),iQ("combobox"),x6(X),B,d9(K.input_focus),A])),G8(F([$(T7),y6("Close"),k6(!0),c9(K.clear_click)]),F([qZ("⨯")])),oZ(F([$(P7),a0(F([["hidden",!J]]))]),F([oZ(F([$("max-h-40 overflow-y-auto")]),F([U9(F([$("pe-2"),iQ("listbox")]),D6(H))]))]))]))}var $5="src/vn_provinces_demo.gleam";class DZ extends I{constructor(Z,Q,K,J,X){super();this.route=Z,this.provinces=Q,this.wards=K,this.province_combobox_state=J,this.ward_combobox_state=X}}function m5(Z){let Q,K=Z.query,J=SZ(K,(W)=>{return gZ(u0(W))}),X=$K(J),V=eZ(X,F([]));return Q=v9(V),new fK(Q)}function u5(Z){let Q,K=L9(),J=gZ(K),X=y0(J,(R)=>{return R.query}),V=SZ(X,(R)=>{return gZ(u0(R))}),G=$K(V);Q=eZ(G,F([]));let Y=v9(Q),M=new DZ(Y,F([]),F([]),A8(),A8()),H=ZK(F([EV(m5),M7()]));return[M,H]}function c5(Z,Q){let K,J=Q.route;if(J instanceof fQ){let j=J[0],B=_0(Z,(L)=>{return L.code===j});if(B instanceof N){let L=B[0];K=[new z(L),m9(L.code)]}else K=[new q,o()]}else K=[new q,o()];let X=K,V,G;V=X[0],G=X[1];let W;if(V instanceof z){let j=V[0];W=[j.name,i0(j)]}else W=["",VQ(Z)];let Y=W,M,H;return M=Y[0],H=Y[1],[new DZ(Q.route,Z,F([]),(()=>{let j=Q.province_combobox_state;return new KZ(j.is_shown,M,H,V,j.focused_index)})(),Q.ward_combobox_state),G]}function p5(Z,Q){let K,J=Q.route;if(J instanceof fQ){let H=J[1];if(H instanceof z){let R=H[0],B=_0(Z,(L)=>{return L.code===R});K=gZ(B)}else K=new q}else K=new q;let X=K,V;if(X instanceof z){let H=X[0];V=[H.name,i0(H)]}else V=["",VQ(Z)];let G=V,W,Y;return W=G[0],Y=G[1],[new DZ(Q.route,Q.provinces,Z,Q.province_combobox_state,(()=>{let H=Q.ward_combobox_state;return new KZ(H.is_shown,W,Y,X,H.focused_index)})()),o()]}function d5(Z,Q,K,J){let X,V,G;X=J.route,V=J.provinces,G=J.wards;let W=_0(V,(x)=>{return x.code===Q}),Y;if(W instanceof N){let x=W[0];Y=i0(x)}else Y=VQ(V);let M=Y,H;if(K instanceof z){let x=K[0],CZ=_0(G,(BZ)=>{return BZ.code===x});H=gZ(CZ)}else H=new q;let R=H,j;if(R instanceof z){let x=R[0];j=i0(x)}else j=VQ(G);let B=j,L;if(X instanceof j8)L=[new q,new q];else{let x=X[0],m=X[1];L=[new z(x),m]}let C=L,P;P=C[0];let E;if(W instanceof N)if(P instanceof z){let x=W[0],m=P[0];if(x.code!==m)E=new z(x.code);else E=new q}else{let x=W[0];E=new z(x.code)}else E=new q;let A=E,S;if(A instanceof z){let x=A[0];S=m9(x)}else S=o();let y=S,D,k=SZ(R,(x)=>{return x.name});D=eZ(k,"");let b=D;return[new DZ(Z,J.provinces,J.wards,(()=>{let x=J.province_combobox_state;return new KZ(x.is_shown,x.filter_text,M,gZ(W),x.focused_index)})(),(()=>{let x=J.ward_combobox_state;return new KZ(x.is_shown,b,B,R,x.focused_index)})()),y]}var i9="province-combobox",r9="ward-combobox";function s5(Z){return GZ(bV(C9(Z)),(Q)=>{let K,J=E0(i9),X=KQ(J,(C)=>{return NK(Q,C)});K=c0(X,!0);let V=K,G,W=E0(r9),Y=KQ(W,(C)=>{return NK(Q,C)});G=c0(Y,!0);let M=G,H,R;if(V)if(M)R=new z(new z8);else R=new z(new AK);else if(M)R=new z(new BK);else R=new q;let B=SZ(R,(C)=>{return new _9(C)});return H=SZ(B,OV),new N(H)})}function n5(Z,Q){if(Q instanceof SK)return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let J=Z.province_combobox_state;return new KZ(!0,J.filter_text,J.filtered_items,J.selected_item,J.focused_index)})(),Z.ward_combobox_state),o()];else if(Q instanceof qK)return[Z,M8("",new z(""),new q)];else if(Q instanceof CK){let K=Q[0],J=Z.provinces,X=Z.province_combobox_state.filtered_items,V,G=BQ(K);if(G==="")V=[VQ(J),o()];else V=[X,H7(G)];let W=V,Y,M;return Y=W[0],M=W[1],[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let R=Z.province_combobox_state;return new KZ(R.is_shown,K,Y,R.selected_item,R.focused_index)})(),Z.ward_combobox_state),M]}else if(Q instanceof wK){let K=Q[0],J=Z.province_combobox_state.filtered_items,X=Z.province_combobox_state.focused_index,V;if(K instanceof V0)V=X-1;else V=X+1;let W=G6(V,0,U6(J));return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let M=Z.province_combobox_state;return new KZ(M.is_shown,M.filter_text,M.filtered_items,M.selected_item,W)})(),Z.ward_combobox_state),l9(i9,W)]}else if(Q instanceof EK){let K=Q[0],J=new DZ(Z.route,Z.provinces,Z.wards,(()=>{let V=Z.province_combobox_state;return new KZ(!1,K.name,V.filtered_items,new z(K),V.focused_index)})(),Z.ward_combobox_state),X=dQ(F([["p",a(K.code)]]));return[J,M8("",new z(X),new q)]}else if(Q instanceof xK)return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let J=Z.ward_combobox_state;return new KZ(!0,J.filter_text,J.filtered_items,J.selected_item,J.focused_index)})()),o()];else if(Q instanceof kK){let K,J=Z.province_combobox_state.selected_item;return K=SZ(J,(V)=>{return dQ(F([["p",a(V.code)]]))}),[Z,M8("",K,new q)]}else if(Q instanceof yK){let K=Q[0],J=Z.wards,X=Z.province_combobox_state.selected_item,V=Z.ward_combobox_state.filtered_items,G,W=BQ(K);if(W==="")G=[VQ(J),o()];else{let j=W,B,C=SZ(X,(E)=>{return E.code});B=eZ(C,0),G=[V,F7(j,B)]}let Y=G,M,H;return M=Y[0],H=Y[1],[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let j=Z.ward_combobox_state;return new KZ(j.is_shown,K,M,j.selected_item,j.focused_index)})()),H]}else if(Q instanceof bK){let K=Q[0],J=Z.ward_combobox_state.focused_index,X=Z.ward_combobox_state.filtered_items,V;if(K instanceof V0)V=J-1;else V=J+1;let W=G6(V,0,U6(X));return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let M=Z.ward_combobox_state;return new KZ(M.is_shown,M.filter_text,M.filtered_items,M.selected_item,W)})()),l9(r9,W)]}else if(Q instanceof gK){let K=Q[0],J=new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let Y=Z.ward_combobox_state;return new KZ(!1,K.name,Y.filtered_items,new z(K),Y.focused_index)})()),X=["w",a(K.code)],V,G=J.route;if(G instanceof fQ){let Y=G[0];V=F([["p",a(Y)],X])}else V=F([X]);return[J,M8("",new z(dQ(V)),new q)]}else if(Q instanceof O8){let K=Q[0];if(K instanceof N){let J=K[0];return c5(J,Z)}else return[Z,o()]}else if(Q instanceof T8){let K=Q[0];if(K instanceof N){let J=K[0];return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let V=Z.province_combobox_state;return new KZ(V.is_shown,V.filter_text,VQ(J),V.selected_item,V.focused_index)})(),Z.ward_combobox_state),o()]}else return[Z,o()]}else if(Q instanceof P8){let K=Q[0];if(K instanceof N){let J=K[0];return p5(J,Z)}else return[Z,o()]}else if(Q instanceof L8){let K=Q[0];if(K instanceof N){let J=K[0];return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let V=Z.ward_combobox_state;return new KZ(V.is_shown,V.filter_text,VQ(J),V.selected_item,V.focused_index)})()),o()]}else return[Z,o()]}else if(Q instanceof fK){let K=Q[0];if(K instanceof j8)return[new DZ(K,Z.provinces,F([]),(()=>{let X=A8();return new KZ(X.is_shown,X.filter_text,VQ(Z.provinces),X.selected_item,X.focused_index)})(),A8()),o()];else{let J=K[0],X=K[1];return d5(K,J,X,Z)}}else{let K=Q[0],J;if(K instanceof z8)J=!0;else if(K instanceof AK)J=!0;else J=!1;let X=J,V;if(K instanceof z8)V=!0;else if(K instanceof BK)V=!0;else V=!1;let G=V;return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let Y=Z.province_combobox_state;return new KZ(!X,Y.filter_text,Y.filtered_items,Y.selected_item,Y.focused_index)})(),(()=>{let Y=Z.ward_combobox_state;return new KZ(!G,Y.filter_text,Y.filtered_items,Y.selected_item,Y.focused_index)})()),o()]}}function l5(Z){let Q=Z.province_combobox_state.selected_item,K=Z.ward_combobox_state.selected_item,J=new vK((W)=>{return new CK(W)},(W)=>{return new EK(W)},new SK,new qK,(W)=>{return new wK(W)}),X=L7(i9,Z.province_combobox_state,J),V=new vK((W)=>{return new yK(W)},(W)=>{return new gK(W)},new xK,new kK,(W)=>{return new bK(W)}),G=A7(r9,Z.ward_combobox_state,V);return EX(F([$("grow")]),F([oZ(F([$("space-y-8 sm:flex sm:flex-row sm:space-x-8 sm:space-y-0")]),F([oZ(F([]),F([l6(F([$("text-lg")]),F([qZ("Tỉnh thành")])),X,(()=>{let Y=SZ(Q,U7);return eZ(Y,J8())})()])),oZ(F([]),F([l6(F([$("text-lg")]),F([qZ("Phường xã")])),G,(()=>{let Y=SZ(K,R7);return eZ(Y,J8())})()]))]))]))}function B7(){let Z=zV(u5,n5,l5),Q=TV(Z,"#app",void 0),K;if(Q instanceof N)K=Q[0];else throw H0("let_assert",$5,"vn_provinces_demo",49,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:1416,end:1471,pattern_start:1427,pattern_end:1438});return S9("click",(J)=>{let X=s5(J);if(X instanceof N){let V=X[0];if(V instanceof z){let G=V[0];return N9(K,G)}else return}else return})}B7();

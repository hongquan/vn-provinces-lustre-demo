class I{withFields(Z){let Q=Object.keys(this).map((K)=>(K in Z)?Z[K]:this[K]);return new this.constructor(...Q)}}class MZ{static fromArray(Z,Q){let K=Q||new O;for(let J=Z.length-1;J>=0;--J)K=new gZ(Z[J],K);return K}[Symbol.iterator](){return new t9(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof O}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function U(Z,Q){return new gZ(Z,Q)}function F(Z,Q){return MZ.fromArray(Z,Q)}class t9{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof O)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class O extends MZ{}class gZ extends MZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class x0{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,K){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=K??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return E0(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let K=this.bitSize%8;if(K){let J=8-K;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=E0(this.rawBuffer,this.bitOffset,J),V=E0(Z.rawBuffer,Z.bitOffset,J);if(X!==V)return!1}let K=this.bitSize%8;if(K){let J=E0(this.rawBuffer,this.bitOffset,Q),X=E0(Z.rawBuffer,Z.bitOffset,Q),V=8-K;if(J>>V!==X>>V)return!1}}return!0}get buffer(){if(a9("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(a9("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function E0(Z,Q,K){if(Q===0)return Z[K]??0;else{let J=Z[K]<<Q&255,X=Z[K+1]>>8-Q;return J|X}}class fK{constructor(Z){this.value=Z}}var r9={};function a9(Z,Q){if(r9[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),r9[Z]=!0}class H0 extends I{static isResult(Z){return Z instanceof H0}}class N extends H0{constructor(Z){super();this[0]=Z}isOk(){return!0}}class L extends H0{constructor(Z){super();this[0]=Z}isOk(){return!1}}function l(Z,Q){let K=[Z,Q];while(K.length){let J=K.pop(),X=K.pop();if(J===X)continue;if(!o9(J)||!o9(X))return!1;if(!b7(J,X)||w7(J,X)||E7(J,X)||x7(J,X)||k7(J,X)||y7(J,X)||g7(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[W,Y]=C7(J),M=W(J),H=W(X);if(M.length!==H.length)return!1;for(let R of M)K.push(Y(J,R),Y(X,R))}return!0}function C7(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,K)=>Q.get(K)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(K)=>[...Q,...Object.keys(K)],(K,J)=>K[J]]}}function w7(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function E7(Z,Q){return!(Z instanceof x0)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((K,J)=>K===Q[J]))}function x7(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function k7(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function y7(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((K)=>!Q.has(K)))}function g7(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function o9(Z){return typeof Z==="object"&&Z!==null}function b7(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function F0(Z,Q,K,J,X,V,G){let W=new globalThis.Error(V);W.gleam_error=Z,W.file=Q,W.module=K,W.line=J,W.function=X,W.fn=X;for(let Y in G)W[Y]=G[Y];return W}class XZ extends I{}class VZ extends I{}class WQ extends I{}class j extends I{constructor(Z){super();this[0]=Z}}class q extends I{}function vK(Z,Q){if(Z instanceof j){let K=Z[0];return new N(K)}else return new L(Q)}function bZ(Z){if(Z instanceof N){let Q=Z[0];return new j(Q)}else return new q}function eZ(Z,Q){if(Z instanceof j)return Z[0];else return Q}function e9(Z,Q){if(Z instanceof j)return Z[0];else return Q()}function SZ(Z,Q){if(Z instanceof j){let K=Z[0];return new j(Q(K))}else return Z}function hK(Z){if(Z instanceof j)return Z[0];else return Z}function k0(Z,Q){if(Z instanceof j){let K=Z[0];return Q(K)}else return Z}var ZJ=new WeakMap,_K=new DataView(new ArrayBuffer(8)),mK=0;function $K(Z){let Q=ZJ.get(Z);if(Q!==void 0)return Q;let K=mK++;if(mK===2147483647)mK=0;return ZJ.set(Z,K),K}function uK(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function pK(Z){let Q=0,K=Z.length;for(let J=0;J<K;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function KJ(Z){_K.setFloat64(0,Z);let Q=_K.getInt32(0),K=_K.getInt32(4);return Math.imul(73244475,Q>>16^Q)^K}function f7(Z){return pK(Z.toString())}function v7(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return $K(Z);if(Z instanceof Date)return KJ(Z.getTime());let K=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)K=Math.imul(31,K)+fZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{K=K+fZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{K=K+uK(fZ(J),fZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let V=J[X],G=Z[V];K=K+uK(fZ(G),pK(V))|0}}return K}function fZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return KJ(Z);case"string":return pK(Z);case"bigint":return f7(Z);case"object":return v7(Z);case"symbol":return $K(Z);case"function":return $K(Z);default:return 0}}var QQ=5,dK=Math.pow(2,QQ),h7=dK-1,_7=dK/2,m7=dK/4,TZ=0,ZQ=1,wZ=2,_Q=3,sK={type:wZ,bitmap:0,array:[]};function y0(Z,Q){return Z>>>Q&h7}function q8(Z,Q){return 1<<y0(Z,Q)}function $7(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function nK(Z,Q){return $7(Z&Q-1)}function vZ(Z,Q,K){let J=Z.length,X=Array(J);for(let V=0;V<J;++V)X[V]=Z[V];return X[Q]=K,X}function u7(Z,Q,K){let J=Z.length,X=Array(J+1),V=0,G=0;while(V<Q)X[G++]=Z[V++];X[G++]=K;while(V<J)X[G++]=Z[V++];return X}function cK(Z,Q){let K=Z.length,J=Array(K-1),X=0,V=0;while(X<Q)J[V++]=Z[X++];++X;while(X<K)J[V++]=Z[X++];return J}function JJ(Z,Q,K,J,X,V){let G=fZ(Q);if(G===J)return{type:_Q,hash:G,array:[{type:TZ,k:Q,v:K},{type:TZ,k:X,v:V}]};let W={val:!1};return g0(iK(sK,Z,G,Q,K,W),Z,J,X,V,W)}function g0(Z,Q,K,J,X,V){switch(Z.type){case ZQ:return c7(Z,Q,K,J,X,V);case wZ:return iK(Z,Q,K,J,X,V);case _Q:return p7(Z,Q,K,J,X,V)}}function c7(Z,Q,K,J,X,V){let G=y0(K,Q),W=Z.array[G];if(W===void 0)return V.val=!0,{type:ZQ,size:Z.size+1,array:vZ(Z.array,G,{type:TZ,k:J,v:X})};if(W.type===TZ){if(l(J,W.k)){if(X===W.v)return Z;return{type:ZQ,size:Z.size,array:vZ(Z.array,G,{type:TZ,k:J,v:X})}}return V.val=!0,{type:ZQ,size:Z.size,array:vZ(Z.array,G,JJ(Q+QQ,W.k,W.v,K,J,X))}}let Y=g0(W,Q+QQ,K,J,X,V);if(Y===W)return Z;return{type:ZQ,size:Z.size,array:vZ(Z.array,G,Y)}}function iK(Z,Q,K,J,X,V){let G=q8(K,Q),W=nK(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[W];if(Y.type!==TZ){let H=g0(Y,Q+QQ,K,J,X,V);if(H===Y)return Z;return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,H)}}let M=Y.k;if(l(J,M)){if(X===Y.v)return Z;return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,{type:TZ,k:J,v:X})}}return V.val=!0,{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,W,JJ(Q+QQ,M,Y.v,K,J,X))}}else{let Y=Z.array.length;if(Y>=_7){let M=Array(32),H=y0(K,Q);M[H]=iK(sK,Q+QQ,K,J,X,V);let R=0,z=Z.bitmap;for(let B=0;B<32;B++){if((z&1)!==0){let P=Z.array[R++];M[B]=P}z=z>>>1}return{type:ZQ,size:Y+1,array:M}}else{let M=u7(Z.array,W,{type:TZ,k:J,v:X});return V.val=!0,{type:wZ,bitmap:Z.bitmap|G,array:M}}}}function p7(Z,Q,K,J,X,V){if(K===Z.hash){let G=lK(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:_Q,hash:K,array:vZ(Z.array,G,{type:TZ,k:J,v:X})}}let W=Z.array.length;return V.val=!0,{type:_Q,hash:K,array:vZ(Z.array,W,{type:TZ,k:J,v:X})}}return g0({type:wZ,bitmap:q8(Z.hash,Q),array:[Z]},Q,K,J,X,V)}function lK(Z,Q){let K=Z.array.length;for(let J=0;J<K;J++)if(l(Q,Z.array[J].k))return J;return-1}function S8(Z,Q,K,J){switch(Z.type){case ZQ:return d7(Z,Q,K,J);case wZ:return s7(Z,Q,K,J);case _Q:return n7(Z,J)}}function d7(Z,Q,K,J){let X=y0(K,Q),V=Z.array[X];if(V===void 0)return;if(V.type!==TZ)return S8(V,Q+QQ,K,J);if(l(J,V.k))return V;return}function s7(Z,Q,K,J){let X=q8(K,Q);if((Z.bitmap&X)===0)return;let V=nK(Z.bitmap,X),G=Z.array[V];if(G.type!==TZ)return S8(G,Q+QQ,K,J);if(l(J,G.k))return G;return}function n7(Z,Q){let K=lK(Z,Q);if(K<0)return;return Z.array[K]}function rK(Z,Q,K,J){switch(Z.type){case ZQ:return i7(Z,Q,K,J);case wZ:return l7(Z,Q,K,J);case _Q:return r7(Z,J)}}function i7(Z,Q,K,J){let X=y0(K,Q),V=Z.array[X];if(V===void 0)return Z;let G=void 0;if(V.type===TZ){if(!l(V.k,J))return Z}else if(G=rK(V,Q+QQ,K,J),G===V)return Z;if(G===void 0){if(Z.size<=m7){let W=Z.array,Y=Array(Z.size-1),M=0,H=0,R=0;while(M<X){let z=W[M];if(z!==void 0)Y[H]=z,R|=1<<M,++H;++M}++M;while(M<W.length){let z=W[M];if(z!==void 0)Y[H]=z,R|=1<<M,++H;++M}return{type:wZ,bitmap:R,array:Y}}return{type:ZQ,size:Z.size-1,array:vZ(Z.array,X,G)}}return{type:ZQ,size:Z.size,array:vZ(Z.array,X,G)}}function l7(Z,Q,K,J){let X=q8(K,Q);if((Z.bitmap&X)===0)return Z;let V=nK(Z.bitmap,X),G=Z.array[V];if(G.type!==TZ){let W=rK(G,Q+QQ,K,J);if(W===G)return Z;if(W!==void 0)return{type:wZ,bitmap:Z.bitmap,array:vZ(Z.array,V,W)};if(Z.bitmap===X)return;return{type:wZ,bitmap:Z.bitmap^X,array:cK(Z.array,V)}}if(l(J,G.k)){if(Z.bitmap===X)return;return{type:wZ,bitmap:Z.bitmap^X,array:cK(Z.array,V)}}return Z}function r7(Z,Q){let K=lK(Z,Q);if(K<0)return Z;if(Z.array.length===1)return;return{type:_Q,hash:Z.hash,array:cK(Z.array,K)}}function XJ(Z,Q){if(Z===void 0)return;let K=Z.array,J=K.length;for(let X=0;X<J;X++){let V=K[X];if(V===void 0)continue;if(V.type===TZ){Q(V.v,V.k);continue}XJ(V,Q)}}class LZ{static fromObject(Z){let Q=Object.keys(Z),K=LZ.new();for(let J=0;J<Q.length;J++){let X=Q[J];K=K.set(X,Z[X])}return K}static fromMap(Z){let Q=LZ.new();return Z.forEach((K,J)=>{Q=Q.set(J,K)}),Q}static new(){return new LZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let K=S8(this.root,0,fZ(Z),Z);if(K===void 0)return Q;return K.v}set(Z,Q){let K={val:!1},J=this.root===void 0?sK:this.root,X=g0(J,0,fZ(Z),Z,Q,K);if(X===this.root)return this;return new LZ(X,K.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=rK(this.root,0,fZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return LZ.new();return new LZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return S8(this.root,0,fZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,K)=>Z.push([K,Q])),Z}forEach(Z){XJ(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,K)=>{Z=Z+uK(fZ(Q),fZ(K))|0}),Z}equals(Z){if(!(Z instanceof LZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,K)=>{if(!l(Z.get(K,!Q),Q))throw QJ}),!0}catch(Q){if(Q===QJ)return!1;throw Q}}}var QJ=Symbol();function b0(Z,Q,K){return WJ(Q,K,Z)}function a7(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=U(X,J)}}}function o7(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return a7(J,F([]));else{let X=K.tail,V=K.head[0];Z=X,Q=U(V,J)}}}function f0(Z){return o7(GJ(Z),F([]))}class FZ extends I{}class I0 extends I{}function v0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=U(X,J)}}}function u(Z){return v0(Z,F([]))}function ZG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.head;Z=J.tail,Q=X,K=U(X(G),V)}}}function KQ(Z,Q){return ZG(Z,Q,F([]))}function QG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=U(X,J)}}}function $Q(Z,Q){return QG(u(Z),Q)}function U0(Z,Q){return U(Q,Z)}function IZ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return X;else{let G=J.head;Z=J.tail,Q=V(X,G),K=V}}}function h0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return new L(void 0);else{let{head:X,tail:V}=K;if(J(X))return new N(X);else Z=V,Q=J}}}function _0(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return new L(void 0);else{let{head:X,tail:V}=K,G=J(X);if(G instanceof N)return G;else Z=V,Q=J}}}function KG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.head;Z=J.tail,Q=X,K=U(G,U(X,V))}}}function aK(Z,Q){if(Z instanceof O)return Z;else{let K=Z.tail;if(K instanceof O)return Z;else{let J=Z.head;return KG(K,Q,F([J]))}}}function JG(Z,Q,K,J,X,V){while(!0){let G=Z,W=Q,Y=K,M=J,H=X,R=V,z=U(H,Y);if(G instanceof O)if(M instanceof FZ)return U(u(z),R);else return U(z,R);else{let{head:B,tail:P}=G,C=W(H,B);if(M instanceof FZ)if(C instanceof XZ)Z=P,Q=W,K=z,J=M,X=B,V=R;else if(C instanceof VZ)Z=P,Q=W,K=z,J=M,X=B,V=R;else{let T;if(M instanceof FZ)T=U(u(z),R);else T=U(z,R);let E=T;if(P instanceof O)return U(F([B]),E);else{let{head:A,tail:S}=P,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new I0;let w=y;Z=S,Q=W,K=F([B]),J=w,X=A,V=E}}else if(C instanceof XZ){let T;if(M instanceof FZ)T=U(u(z),R);else T=U(z,R);let E=T;if(P instanceof O)return U(F([B]),E);else{let{head:A,tail:S}=P,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new I0;let w=y;Z=S,Q=W,K=F([B]),J=w,X=A,V=E}}else if(C instanceof VZ){let T;if(M instanceof FZ)T=U(u(z),R);else T=U(z,R);let E=T;if(P instanceof O)return U(F([B]),E);else{let{head:A,tail:S}=P,y,D=W(B,A);if(D instanceof XZ)y=new FZ;else if(D instanceof VZ)y=new FZ;else y=new I0;let w=y;Z=S,Q=W,K=F([B]),J=w,X=A,V=E}}else Z=P,Q=W,K=z,J=M,X=B,V=R}}}function XG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(X instanceof O)return v0(V,W);else if(V instanceof O)return v0(X,W);else{let{head:Y,tail:M}=X,H=V.head,R=V.tail,z=G(Y,H);if(z instanceof XZ)Z=M,Q=V,K=G,J=U(Y,W);else if(z instanceof VZ)Z=X,Q=R,K=G,J=U(H,W);else Z=X,Q=R,K=G,J=U(H,W)}}}function VG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.tail;if(G instanceof O){let W=J.head;return u(U(u(W),V))}else{let W=J.head,Y=G.head,M=G.tail,H=XG(W,Y,X,F([]));Z=M,Q=X,K=U(H,V)}}}}function GG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(X instanceof O)return v0(V,W);else if(V instanceof O)return v0(X,W);else{let{head:Y,tail:M}=X,H=V.head,R=V.tail,z=G(Y,H);if(z instanceof XZ)Z=X,Q=R,K=G,J=U(H,W);else if(z instanceof VZ)Z=M,Q=V,K=G,J=U(Y,W);else Z=M,Q=V,K=G,J=U(Y,W)}}}function WG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return u(V);else{let G=J.tail;if(G instanceof O){let W=J.head;return u(U(u(W),V))}else{let W=J.head,Y=G.head,M=G.tail,H=GG(W,Y,X,F([]));Z=M,Q=X,K=U(H,V)}}}}function YG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return J;else if(X instanceof FZ)if(J.tail instanceof O)return J.head;else Z=VG(J,V,F([])),Q=new I0,K=V;else if(J.tail instanceof O){let W=J.head;return u(W)}else Z=WG(J,V,F([])),Q=new FZ,K=V}}function oK(Z,Q){if(Z instanceof O)return Z;else{let K=Z.tail;if(K instanceof O)return Z;else{let J=Z.head,X=K.head,V=K.tail,G,W=Q(J,X);if(W instanceof XZ)G=new FZ;else if(W instanceof VZ)G=new FZ;else G=new I0;let Y=G,M=JG(V,Q,F([J]),Y,X,F([]));return YG(M,new FZ,Q)}}}function tK(Z,Q){return _0(Z,(K)=>{let J,X;if(J=K[0],X=K[1],l(J,Q))return new N(X);else return new L(void 0)})}function YJ(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return;else{let{head:X,tail:V}=K;J(X),Z=V,Q=J}}}function OG(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;Z=K.tail,Q=J+X}}}function m0(Z){return OG(Z,"")}function cQ(Z){let K=UJ(Z);return eK(K)}class sZ extends I{constructor(Z,Q,K){super();this.expected=Z,this.found=Q,this.path=K}}class MQ extends I{constructor(Z){super();this.function=Z}}function HQ(Z,Q){let K=Q.function(Z),J,X;if(J=K[0],X=K[1],X instanceof O)return new N(J);else return new L(X)}function PZ(Z){return new MQ((Q)=>{return[Z,F([])]})}function $0(Z,Q){return new MQ((K)=>{let J=Z.function(K),X,V;return X=J[0],V=J[1],[Q(X),V]})}function CG(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(V instanceof O)return X;else{let{head:G,tail:W}=V,Y=G.function(J),M,H;if(M=Y,H=Y[1],H instanceof O)return M;else Z=J,Q=X,K=W}}}function jJ(Z,Q){return new MQ((K)=>{let J=Z.function(K),X,V;if(X=J,V=J[1],V instanceof O)return X;else return CG(K,X,Q)})}function wG(Z,Q){return F([new sZ(Z,dZ(Q),F([]))])}function OJ(Z,Q,K){let J=K(Z);if(J instanceof N)return[J[0],F([])];else return[J[0],F([new sZ(Q,dZ(Z),F([]))])]}function EG(Z){return OJ(Z,"Int",PJ)}function Q6(Z,Q){return new MQ((K)=>{return[Z,wG(Q,K)]})}var SQ=new MQ(EG);function xG(Z){return OJ(Z,"String",AJ)}var nZ=new MQ(xG);function pQ(Z){return new MQ((Q)=>{return TJ(Q,Z.function,(K,J)=>{return C8(K,F([J]))},0,F([]))})}function C8(Z,Q){let K=jJ(nZ,F([(()=>{return $0(SQ,a)})()])),J=KQ(Q,(V)=>{let G=r(V),W=HQ(G,K);if(W instanceof N)return W[0];else return"<"+dZ(G)+">"}),X=KQ(Z[1],(V)=>{return new sZ(V.expected,V.found,$Q(J,V.path))});return[Z[0],X]}function kG(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(V instanceof O){let R=W(Y);return C8(R,u(G))}else{let{head:H,tail:R}=V,z=LJ(Y,H);if(z instanceof N){let B=z[0];if(B instanceof j){let P=B[0];Z=R,Q=U(H,G),K=W,J=P,X=M}else return M(Y,U(H,G))}else{let B=z[0],P=W(Y),C;C=P[0];let T=[C,F([new sZ(B,dZ(Y),F([]))])];return C8(T,u(G))}}}}function K6(Z,Q,K){return new MQ((J)=>{let X=kG(Z,F([]),Q.function,J,(H,R)=>{let z=Q.function(H),B;B=z[0];let P=[B,F([new sZ("Field","Nothing",F([]))])];return C8(P,u(R))}),V,G;V=X[0],G=X[1];let W=K(V).function(J),Y,M;return Y=W[0],M=W[1],[Y,$Q(G,M)]})}function AZ(Z,Q,K){return K6(F([Z]),Q,K)}var J6=void 0,BJ={};function r(Z){return Z}function w8(Z){if(/^[-+]?(\d+)$/.test(Z))return new N(parseInt(Z));else return new L(J6)}function a(Z){return Z.toString()}function dQ(Z){return[Z.charCodeAt(0)|0,Z.slice(1)]}function hZ(Z){return Z.toLowerCase()}function uQ(Z){let Q="";for(let K of Z)Q=Q+K;return Q}function RZ(Z,Q,K){return Z.slice(Q,Q+K)}function N0(Z,Q){return Z.startsWith(Q)}var CJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),gG=new RegExp(`^[${CJ}]*`),bG=new RegExp(`[${CJ}]*$`);function UJ(Z){return Z.replace(gG,"")}function eK(Z){return Z.replace(bG,"")}function mQ(){return LZ.new()}function GJ(Z){return MZ.fromArray(Z.entries())}function BQ(Z,Q){let K=Z.get(Q,BJ);if(K===BJ)return new L(J6);return new N(K)}function WJ(Z,Q,K){return K.set(Z,Q)}function SJ(Z){return decodeURIComponent((Z||"").replace("+"," "))}function E8(Z){return encodeURIComponent(Z).replace("%2B","+")}function u0(Z){try{let Q=[];for(let K of Z.split("&")){let[J,X]=K.split("=");if(!J)continue;let V=SJ(J),G=SJ(X);Q.push([V,G])}return new N(MZ.fromArray(Q))}catch{return new L(J6)}}function dZ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof H0)return"Result";else if(Z instanceof MZ)return"List";else if(Z instanceof x0)return"BitArray";else if(Z instanceof LZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function wJ(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let K=Q.indexOf("e");if(K>=0)return Q.slice(0,K)+".0"+Q.slice(K);else return Q+".0"}}class fG{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#V(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return wJ(Z);if(Z instanceof fK)return this.#W(Z);if(Z instanceof x0)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let K;if(Array.isArray(Z))K=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof MZ)K=this.#Q(Z);else if(Z instanceof I)K=this.#K(Z);else if(Z instanceof LZ)K=this.#J(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else K=this.#X(Z);return this.#Z.delete(Z),K}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",K=[];for(let V of Object.keys(Z))K.push(`${this.inspect(V)}: ${this.inspect(Z[V])}`);let J=K.length?" "+K.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#J(Z){let Q="dict.from_list([",K=!0;return Z.forEach((J,X)=>{if(!K)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",K=!1}),Q+"])"}#K(Z){let Q=Object.keys(Z).map((K)=>{let J=this.inspect(Z[K]);return isNaN(parseInt(K))?`${K}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof O)return"[]";let Q='charlist.from_string("',K="[",J=Z;while(J instanceof gZ){let X=J.head;if(J=J.tail,K!=="[")K+=", ";if(K+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return K+"]"}#V(Z){let Q='"';for(let K=0;K<Z.length;K++){let J=Z[K];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#W(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let K=0;K<Z.byteSize-1;K++)Q+=Z.byteAt(K).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let K=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-K,Q+=`:size(${K})`}return Q+=">>",Q}}function LJ(Z,Q){if(Z instanceof LZ||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new N(new q);return new N(new j(X))}let K=Number.isInteger(Q);if(K&&Q>=0&&Q<8&&Z instanceof MZ){let J=0;for(let X of Z){if(J===Q)return new N(new j(X));J++}return new L("Indexable")}if(K&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new N(new j(Z[Q]));return new N(new q)}return new L(K?"Indexable":"Dict")}function TJ(Z,Q,K,J,X){if(!(Z instanceof MZ||Array.isArray(Z))){let G=new sZ("List",dZ(Z),X);return[X,MZ.fromArray([G])]}let V=[];for(let G of Z){let W=Q(G),[Y,M]=W;if(M instanceof gZ){let[H,R]=K(W,J.toString());return[X,R]}V.push(Y),J++}return[MZ.fromArray(V),X]}function PJ(Z){if(Number.isInteger(Z))return new N(Z);return new L(0)}function AJ(Z){if(typeof Z==="string")return new N(Z);return new L("")}function EJ(Z,Q){if(Z<Q)return Z;else return Q}function x8(Z,Q){if(Z>Q)return Z;else return Q}function X6(Z,Q,K){let X=EJ(Z,K);return x8(X,Q)}function FQ(Z,Q){if(Z instanceof N){let K=Z[0];return new N(Q(K))}else return Z}function D0(Z,Q){if(Z instanceof N)return Z;else{let K=Z[0];return new L(Q(K))}}function GZ(Z,Q){if(Z instanceof N){let K=Z[0];return Q(K)}else return Z}function c0(Z,Q){if(Z instanceof N)return Z[0];else return Q}function V6(Z){if(Z instanceof N)return Z[0];else return Z[0]}function p0(Z,Q){if(Z instanceof N)return Z;else return new L(Q)}class v extends I{constructor(Z,Q,K,J,X,V,G){super();this.scheme=Z,this.userinfo=Q,this.host=K,this.port=J,this.path=X,this.query=V,this.fragment=G}}function vG(Z){return 48>=Z&&Z<=57||65>=Z&&Z<=90||97>=Z&&Z<=122||Z===58||Z===46}function iZ(Z,Q){return new N(new v(Q.scheme,Q.userinfo,Q.host,Q.port,Q.path,Q.query,new j(Z)))}function hG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return iZ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,G.path,new j(M),G.fragment);return iZ(Y,H)}else if(V==="")return new N(new v(G.scheme,G.userinfo,G.host,G.port,G.path,new j(X),G.fragment));else{let Y=dQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function IQ(Z,Q){return hG(Z,Z,Q,0)}function _G(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("?")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,M,G.query,G.fragment);return IQ(Y,H)}else if(V.startsWith("#")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,G.host,G.port,M,G.query,G.fragment);return iZ(Y,H)}else if(V==="")return new N(new v(G.scheme,G.userinfo,G.host,G.port,X,G.query,G.fragment));else{let Y=dQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function sQ(Z,Q){return _G(Z,Z,Q,0)}function JQ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J.startsWith("0"))Z=J.slice(1),Q=X,K=V*10;else if(J.startsWith("1"))Z=J.slice(1),Q=X,K=V*10+1;else if(J.startsWith("2"))Z=J.slice(1),Q=X,K=V*10+2;else if(J.startsWith("3"))Z=J.slice(1),Q=X,K=V*10+3;else if(J.startsWith("4"))Z=J.slice(1),Q=X,K=V*10+4;else if(J.startsWith("5"))Z=J.slice(1),Q=X,K=V*10+5;else if(J.startsWith("6"))Z=J.slice(1),Q=X,K=V*10+6;else if(J.startsWith("7"))Z=J.slice(1),Q=X,K=V*10+7;else if(J.startsWith("8"))Z=J.slice(1),Q=X,K=V*10+8;else if(J.startsWith("9"))Z=J.slice(1),Q=X,K=V*10+9;else if(J.startsWith("?")){let G=J.slice(1),W=new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment);return IQ(G,W)}else if(J.startsWith("#")){let G=J.slice(1),W=new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment);return iZ(G,W)}else if(J.startsWith("/")){let G=new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment);return sQ(J,G)}else if(J==="")return new N(new v(X.scheme,X.userinfo,X.host,new j(V),X.path,X.query,X.fragment));else return new L(void 0)}}function k8(Z,Q){if(Z.startsWith(":0")){let K=Z.slice(2);return JQ(K,Q,0)}else if(Z.startsWith(":1")){let K=Z.slice(2);return JQ(K,Q,1)}else if(Z.startsWith(":2")){let K=Z.slice(2);return JQ(K,Q,2)}else if(Z.startsWith(":3")){let K=Z.slice(2);return JQ(K,Q,3)}else if(Z.startsWith(":4")){let K=Z.slice(2);return JQ(K,Q,4)}else if(Z.startsWith(":5")){let K=Z.slice(2);return JQ(K,Q,5)}else if(Z.startsWith(":6")){let K=Z.slice(2);return JQ(K,Q,6)}else if(Z.startsWith(":7")){let K=Z.slice(2);return JQ(K,Q,7)}else if(Z.startsWith(":8")){let K=Z.slice(2);return JQ(K,Q,8)}else if(Z.startsWith(":9")){let K=Z.slice(2);return JQ(K,Q,9)}else if(Z===":")return new N(Q);else if(Z==="")return new N(Q);else if(Z.startsWith("?")){let K=Z.slice(1);return IQ(K,Q)}else if(Z.startsWith(":?")){let K=Z.slice(2);return IQ(K,Q)}else if(Z.startsWith("#")){let K=Z.slice(1);return iZ(K,Q)}else if(Z.startsWith(":#")){let K=Z.slice(2);return iZ(K,Q)}else if(Z.startsWith("/"))return sQ(Z,Q);else if(Z.startsWith(":")){let K=Z.slice(1);if(K.startsWith("/"))return sQ(K,Q);else return new L(void 0)}else return new L(void 0)}function yJ(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V==="")return new N(new v(G.scheme,G.userinfo,new j(X),G.port,G.path,G.query,G.fragment));else if(V.startsWith(":")){let Y=RZ(X,0,W),M=new v(G.scheme,G.userinfo,new j(Y),G.port,G.path,G.query,G.fragment);return k8(V,M)}else if(V.startsWith("/")){let Y=RZ(X,0,W),M=new v(G.scheme,G.userinfo,new j(Y),G.port,G.path,G.query,G.fragment);return sQ(V,M)}else if(V.startsWith("?")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return IQ(Y,H)}else if(V.startsWith("#")){let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return iZ(Y,H)}else{let Y=dQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function mG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V==="")return new N(new v(G.scheme,G.userinfo,new j(V),G.port,G.path,G.query,G.fragment));else if(V.startsWith("]"))if(W===0){let Y=V.slice(1);return k8(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W+1),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return k8(Y,H)}else if(V.startsWith("/"))if(W===0)return sQ(V,G);else{let Y=RZ(X,0,W),M=new v(G.scheme,G.userinfo,new j(Y),G.port,G.path,G.query,G.fragment);return sQ(V,M)}else if(V.startsWith("?"))if(W===0){let Y=V.slice(1);return IQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return IQ(Y,H)}else if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return iZ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,G.userinfo,new j(M),G.port,G.path,G.query,G.fragment);return iZ(Y,H)}else{let Y=dQ(V),M,H;if(M=Y[0],H=Y[1],vG(M))Z=X,Q=H,K=G,J=W+1;else return yJ(X,X,G,0)}}}function $G(Z,Q){return mG(Z,Z,Q,0)}function uG(Z,Q){return yJ(Z,Z,Q,0)}function z0(Z,Q){if(Z.startsWith("["))return $G(Z,Q);else if(Z.startsWith(":")){let K=new v(Q.scheme,Q.userinfo,new j(""),Q.port,Q.path,Q.query,Q.fragment);return k8(Z,K)}else if(Z==="")return new N(new v(Q.scheme,Q.userinfo,new j(""),Q.port,Q.path,Q.query,Q.fragment));else return uG(Z,Q)}function cG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("@"))if(W===0){let Y=V.slice(1);return z0(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(G.scheme,new j(M),G.host,G.port,G.path,G.query,G.fragment);return z0(Y,H)}else if(V==="")return z0(X,G);else if(V.startsWith("/"))return z0(X,G);else if(V.startsWith("?"))return z0(X,G);else if(V.startsWith("#"))return z0(X,G);else{let Y=dQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function pG(Z,Q){return cG(Z,Z,Q,0)}function G6(Z,Q){if(Z==="//")return new N(new v(Q.scheme,Q.userinfo,new j(""),Q.port,Q.path,Q.query,Q.fragment));else if(Z.startsWith("//")){let K=Z.slice(2);return pG(K,Q)}else return sQ(Z,Q)}function dG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(V.startsWith("/"))if(W===0)return G6(V,G);else{let Y=RZ(X,0,W),M=new v(new j(hZ(Y)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return G6(V,M)}else if(V.startsWith("?"))if(W===0){let Y=V.slice(1);return IQ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(new j(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return IQ(Y,H)}else if(V.startsWith("#"))if(W===0){let Y=V.slice(1);return iZ(Y,G)}else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(new j(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return iZ(Y,H)}else if(V.startsWith(":"))if(W===0)return new L(void 0);else{let Y=V.slice(1),M=RZ(X,0,W),H=new v(new j(hZ(M)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return G6(Y,H)}else if(V==="")return new N(new v(G.scheme,G.userinfo,G.host,G.port,X,G.query,G.fragment));else{let Y=dQ(V),M;M=Y[1],Z=X,Q=M,K=G,J=W+1}}}function sG(Z){return uQ(F([E8(Z[0]),"=",E8(Z[1])]))}function nQ(Z){let K=KQ(Z,sG),J=aK(K,r("&")),X=uQ(J);return r(X)}function g8(Z){let Q,K=Z.fragment;if(K instanceof j){let D=K[0];Q=F(["#",D])}else Q=F([]);let J=Q,X,V=Z.query;if(V instanceof j){let D=V[0];X=U("?",U(D,J))}else X=J;let G=X,W=U(Z.path,G),Y,M=Z.host,H=N0(Z.path,"/");if(M instanceof j&&!H)if(M[0]!=="")Y=U("/",W);else Y=W;else Y=W;let R=Y,z,B=Z.host,P=Z.port;if(B instanceof j&&P instanceof j){let D=P[0];z=U(":",U(a(D),R))}else z=R;let C=z,T,E=Z.scheme,A=Z.userinfo,S=Z.host;if(E instanceof j)if(A instanceof j)if(S instanceof j){let D=E[0],w=A[0],k=S[0];T=U(D,U("://",U(w,U("@",U(k,C)))))}else{let D=E[0];T=U(D,U(":",C))}else if(S instanceof j){let D=E[0],w=S[0];T=U(D,U("://",U(w,C)))}else{let D=E[0];T=U(D,U(":",C))}else if(A instanceof q&&S instanceof j){let D=S[0];T=U("//",U(D,C))}else T=C;return m0(T)}var nG=new v(new q,new q,new q,new q,"",new q,new q);function b8(Z){return dG(Z,Z,nG,0)}var s0=()=>[],UQ=(Z)=>[Z];var iQ=(Z,Q)=>[...Z,Q];var WZ=(Z,Q)=>Q[Z-1];var NZ=(Z)=>Z.length;var n0=(Z,Q)=>Z<<Q,W6=(Z,Q)=>Z>>Q;function tG(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(W<=Y)Z=V,Q=M(G,WZ(W,V)),K=W+1,J=Y,X=M;else return G}}function vJ(Z,Q,K){let J=NZ(Z);return tG(Z,Q,2,J,K)}function eG(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(G>0)Z=X,Q=W(V,WZ(G,X)),K=G-1,J=W;else return V}}function f8(Z,Q,K){let J=NZ(Z);return eG(Z,Q,J,K)}function ZW(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(W<=Y)Z=V,Q=M(G,WZ(W,V),W),K=W+1,J=Y,X=M;else return G}}function hJ(Z,Q,K){let J=NZ(Z);return ZW(Z,Q,1,J,K)}function v8(Z,Q){return hJ(Z,s0(),(K,J,X)=>{return iQ(K,Q(J,X))})}class RQ extends I{constructor(Z,Q){super();this.size=Z,this.children=Q}}class qQ extends I{constructor(Z,Q){super();this.sizes=Z,this.children=Q}}class $8 extends I{constructor(Z){super();this.children=Z}}function i0(Z){return new $8(Z)}function j0(Z){if(Z instanceof RQ)return Z.size;else if(Z instanceof qQ){let Q=Z.sizes;return WZ(NZ(Q),Q)}else{let Q=Z.children;return NZ(Q)}}function QW(Z){let Q=j0(WZ(1,Z));return vJ(Z,UQ(Q),(K,J)=>{let X=WZ(NZ(K),K)+j0(J);return iQ(K,X)})}function KW(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(WZ(X,J)>V)return X-1;else Z=J,Q=X+1,K=V}}function _8(Z,Q,K){if(Z instanceof RQ){let J=Z.children;return f8(J,Q,(X,V)=>{return _8(V,X,K)})}else if(Z instanceof qQ){let J=Z.children;return f8(J,Q,(X,V)=>{return _8(V,X,K)})}else{let J=Z.children;return f8(J,Q,K)}}function _J(Z,Q){let K=NZ(Q),J=WZ(K,Q),V=n0(1,Z)*(K-1)+j0(J);return new RQ(V,Q)}function u8(Z,Q){let K=NZ(Q),J=n0(1,Z),X=QW(Q),V;if(K===1)V=0;else V=WZ(K-1,X);if(V===J*(K-1)){let Y=WZ(K,X);return new RQ(Y,Q)}else return new qQ(X,Q)}var CQ=5;function mJ(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof RQ){let G=J.children,W=W6(V,X),Y=V-n0(W,X);Z=WZ(W+1,G),Q=X-CQ,K=Y}else if(J instanceof qQ){let{sizes:G,children:W}=J,Y=W6(V,X),M=KW(G,Y+1,V),H;if(M===0)H=V;else H=V-WZ(M,G);let R=H;Z=WZ(M+1,W),Q=X-CQ,K=R}else{let G=J.children;return WZ(V+1,G)}}}function m8(Z,Q,K,J){let X=Z-CQ;if(K instanceof RQ){let{size:V,children:G}=K,W=n0(1,Z),Y=v8(G,(M,H)=>{let R=Q+(H-1)*W;return m8(X,R,M,J)});return new RQ(V,Y)}else if(K instanceof qQ){let{sizes:V,children:G}=K,W=v8(G,(Y,M)=>{let H;if(M===1)H=0;else H=WZ(M-1,V);return m8(X,Q+H,Y,J)});return new qQ(V,W)}else{let V=K.children,G=v8(V,(W,Y)=>{return J(W,Y+Q-1)});return new $8(G)}}var Y6=32;class c8 extends I{constructor(Z,Q,K,J){super();this.nodes=Z,this.items=Q,this.push_node=K,this.push_item=J}}function $J(Z,Q,K){if(Z instanceof O)return F([UQ(Q)]);else{let{head:J,tail:X}=Z;if(NZ(J)<Y6)return U(iQ(J,Q),X);else{let G=K+CQ,W=_J(G,J);return U(UQ(Q),$J(X,W,G))}}}function uJ(){return new c8(F([]),s0(),$J,iQ)}function cJ(Z,Q){let K,J,X,V;if(K=Z.nodes,J=Z.items,X=Z.push_node,V=Z.push_item,NZ(J)===Y6){let W=i0(J);return new c8(X(K,W,0),UQ(Q),X,V)}else return new c8(K,V(J,Q),X,V)}function JW(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return new L(void 0);else{let G=J.tail;if(G instanceof O){let W=J.head;return new N([V,W])}else{let W=J.head,Y=G,M=V+CQ;Z=X(Y,u8(M,W),M),Q=X,K=M}}}}function pJ(Z){let Q,K,J;Q=Z.nodes,K=Z.items,J=Z.push_node;let X=NZ(K),V;if(X>0)V=J(Q,i0(K),0);else V=Q;return JW(V,J,0)}class wQ extends I{}class l0 extends I{constructor(Z,Q){super();this.shift=Z,this.root=Q}}function GW(Z,Q){let K=NZ(Q);if(K===0)return new wQ;else if(K===1)return new l0(Z,WZ(1,Q));else{let J=Z+CQ;return new l0(J,u8(J,Q))}}function dJ(){return new wQ}function r0(Z){return new l0(0,i0(UQ(Z)))}function XQ(Z){let Q=(()=>{let J=IZ(Z,uJ(),cJ);return pJ(J)})();if(Q instanceof N){let K=Q[0][0],J=Q[0][1];return GW(K,J)}else return new wQ}function H6(Z){if(Z instanceof wQ)return 0;else{let Q=Z.root;return j0(Q)}}function F6(Z,Q){if(Z instanceof wQ)return new L(void 0);else{let{shift:K,root:J}=Z;if(0<=Q&&Q<j0(J))return new N(mJ(J,K,Q));else return new L(void 0)}}function I6(Z,Q){if(Z instanceof wQ)return Z;else{let{shift:K,root:J}=Z;return new l0(K,m8(K,0,J,Q))}}function WW(Z,Q,K){if(Z instanceof wQ)return Q;else{let J=Z.root;return _8(J,Q,K)}}function U6(Z){return WW(Z,F([]),U0)}function EQ(Z,Q,K){if(Z)return Q;else return K()}function QZ(Z){return Z}function iJ(Z){try{let Q=JSON.parse(Z);return new N(Q)}catch(Q){return new L(HW(Q,Z))}}function HW(Z,Q){if(FW(Z))return new N6;return IW(Z,Q)}function FW(Z){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(Z.message)}function IW(Z,Q){let K=[UW,RW,DW,NW];for(let J of K){let X=J(Z,Q);if(X)return X}return new lQ("",0)}function UW(Z){let K=/unexpected token '(.)', ".+" is not valid JSON/i.exec(Z.message);if(!K)return null;let J=s8(K[1]);return new lQ(J,-1)}function RW(Z){let K=/unexpected token (.) in JSON at position (\d+)/i.exec(Z.message);if(!K)return null;let J=s8(K[1]),X=Number(K[2]);return new lQ(J,X)}function NW(Z,Q){let J=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(Z.message);if(!J)return null;let X=Number(J[2]),V=Number(J[3]),G=zW(X,V,Q),W=s8(Q[G]);return new lQ(W,G)}function DW(Z){let K=/unexpected (identifier|token) "(.)"/i.exec(Z.message);if(!K)return null;let J=s8(K[2]);return new lQ(J,0)}function s8(Z){return"0x"+Z.charCodeAt(0).toString(16).toUpperCase()}function zW(Z,Q,K){if(Z===1)return Q-1;let J=1,X=0;return K.split("").find((V,G)=>{if(V===`
`)J+=1;if(J===Z)return X=G+Q,!0;return!1}),X}class N6 extends I{}class lQ extends I{constructor(Z){super();this[0]=Z}}class lJ extends I{constructor(Z){super();this[0]=Z}}function OW(Z,Q){return GZ(iJ(Z),(K)=>{let J=HQ(K,Q);return D0(J,(X)=>{return new lJ(X)})})}function z6(Z,Q){return OW(Z,Q)}var _Z=()=>globalThis?.document,n8="http://www.w3.org/1999/xhtml",i8=1,j6=3;var oJ=!!globalThis.HTMLElement?.prototype?.moveBefore;var b=F([]),l8=new q;var PW=new WQ,AW=new XZ,BW=new VZ;function a8(Z,Q){if(Z.name===Q.name)return BW;else if(Z.name<Q.name)return AW;else return PW}class mZ extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class o8 extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class OZ extends I{constructor(Z,Q,K,J,X,V,G,W,Y){super();this.kind=Z,this.name=Q,this.handler=K,this.include=J,this.prevent_default=X,this.stop_propagation=V,this.immediate=G,this.debounce=W,this.throttle=Y}}class a0 extends I{constructor(Z,Q,K){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=K}}class XX extends I{constructor(Z){super();this.kind=Z}}function xW(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else{let X=K.head;if(X instanceof mZ){let V=X.name;if(V==="")Z=K.tail,Q=J;else if(V==="class"){let G=X.value;if(G==="")Z=K.tail,Q=J;else{let W=K.tail;if(W instanceof O){let Y=X;Z=W,Q=U(Y,J)}else{let Y=W.head;if(Y instanceof mZ)if(Y.name==="class"){let H=X.kind,R=G,z=W.tail,B=Y.value,P=R+" "+B,C=new mZ(H,"class",P);Z=U(C,z),Q=J}else{let H=X;Z=W,Q=U(H,J)}else{let M=X;Z=W,Q=U(M,J)}}}}else if(V==="style"){let G=X.value;if(G==="")Z=K.tail,Q=J;else{let W=K.tail;if(W instanceof O){let Y=X;Z=W,Q=U(Y,J)}else{let Y=W.head;if(Y instanceof mZ)if(Y.name==="style"){let H=X.kind,R=G,z=W.tail,B=Y.value,P=R+";"+B,C=new mZ(H,"style",P);Z=U(C,z),Q=J}else{let H=X;Z=W,Q=U(H,J)}else{let M=X;Z=W,Q=U(M,J)}}}}else{let G=X;Z=K.tail,Q=U(G,J)}}else{let V=X;Z=K.tail,Q=U(V,J)}}}}function VX(Z){if(Z instanceof O)return Z;else if(Z.tail instanceof O)return Z;else{let J=oK(Z,(X,V)=>{return a8(V,X)});return xW(J,b)}}var L6=0;function GX(Z,Q){return new mZ(L6,Z,Q)}var WX=1;var T6=2;function YX(Z,Q,K,J,X,V,G,W){return new OZ(T6,Z,Q,K,J,X,V,G,W)}var P6=0;var A6=new XX(P6);var B6=2;function VQ(Z,Q){return GX(Z,Q)}function m(Z){return VQ("class",Z)}function MX(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof O)return J;else if(K.head[1]){let V=K.tail,G=K.head[0];return J+G+" "+MX(V,J)}else Z=K.tail,Q=J}}function o0(Z){return m(MX(Z,""))}function S6(Z){return VQ("id",Z)}function q6(Z){return VQ("type",Z)}function C6(Z){return VQ("value",Z)}function HX(Z,Q){return VQ("aria-"+Z,Q)}function rQ(Z){return VQ("role",Z)}function w6(Z){return HX("hidden",(()=>{if(Z)return"true";else return"false"})())}function E6(Z){return HX("label",Z)}class t0 extends I{constructor(Z,Q,K){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=K}}class FX extends I{constructor(Z,Q,K,J,X){super();this.dispatch=Z,this.emit=Q,this.select=K,this.root=J,this.provide=X}}function IX(Z,Q,K,J,X,V){let G=new FX(Q,K,J,X,V);return YJ(Z.synchronous,(W)=>{return W(G)})}var L0=new t0(F([]),F([]),F([]));function o(){return L0}function T0(Z){return new t0(F([(K)=>{let J=K.dispatch;return Z(J)}]),L0.before_paint,L0.after_paint)}function UX(Z){let Q=(K)=>{let J=K.root(),X=K.dispatch;return Z(X,J)};return new t0(L0.synchronous,L0.before_paint,F([Q]))}function t8(Z){return IZ(Z,L0,(Q,K)=>{return new t0(IZ(K.synchronous,Q.synchronous,U0),IZ(K.before_paint,Q.before_paint,U0),IZ(K.after_paint,Q.after_paint,U0))})}function kZ(){return null}function e0(Z,Q){let K=Z?.get(Q);if(K!=null)return new N(K);else return new L(void 0)}function Z8(Z,Q){return Z&&Z.has(Q)}function aQ(Z,Q,K){return Z??=new Map,Z.set(Q,K),Z}function x6(Z,Q){return Z?.delete(Q),Z}class k6 extends I{}class y6 extends I{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class RX extends I{constructor(Z,Q){super();this.index=Z,this.parent=Q}}function yW(Z,Q){while(!0){let K=Z,J=Q;if(J instanceof O)return!1;else{let{head:X,tail:V}=J,G=N0(K,X);if(G)return G;else Z=K,Q=V}}}function $Z(Z,Q,K){if(K==="")return new RX(Q,Z);else return new y6(K,Z)}var P0=new k6,K8="\t";function NX(Z,Q){while(!0){let K=Z,J=Q;if(K instanceof k6)if(J instanceof O)return"";else{let X=J.tail;return m0(X)}else if(K instanceof y6){let X=K.key;Z=K.parent,Q=U(K8,U(X,J))}else{let X=K.index;Z=K.parent,Q=U(K8,U(a(X),J))}}}function DX(Z){return NX(Z,F([]))}function zX(Z,Q){if(Q instanceof O)return!1;else return yW(DX(Z),Q)}var g6=`
`;function b6(Z,Q){return NX(Z,F([g6,Q]))}class uZ extends I{constructor(Z,Q,K,J,X){super();this.kind=Z,this.key=Q,this.mapper=K,this.children=J,this.keyed_children=X}}class yZ extends I{constructor(Z,Q,K,J,X,V,G,W,Y,M){super();this.kind=Z,this.key=Q,this.mapper=K,this.namespace=J,this.tag=X,this.attributes=V,this.children=G,this.keyed_children=W,this.self_closing=Y,this.void=M}}class cZ extends I{constructor(Z,Q,K,J){super();this.kind=Z,this.key=Q,this.mapper=K,this.content=J}}class oQ extends I{constructor(Z,Q,K,J,X,V,G){super();this.kind=Z,this.key=Q,this.mapper=K,this.namespace=J,this.tag=X,this.attributes=V,this.inner_html=G}}function fW(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function jX(Z,Q){if(Q instanceof uZ)return new uZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof yZ)return new yZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof cZ)return new cZ(Q.kind,Z,Q.mapper,Q.content);else return new oQ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}var rZ=0;function f6(Z,Q,K,J){return new uZ(rZ,Z,Q,K,J)}var tQ=1;function J8(Z,Q,K,J,X,V,G,W,Y){return new yZ(tQ,Z,Q,K,J,VX(X),V,G,W,Y||fW(J,K))}var A0=2;function v6(Z,Q,K){return new cZ(A0,Z,Q,K)}var OX=3;var h6=(Z,Q)=>Z===Q,eQ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let K=typeof Z;if(K!==typeof Q)return!1;if(K!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return vW(Z,Q);return hW(Z,Q)},vW=(Z,Q)=>{let K=Z.length;if(K!==Q.length)return!1;while(K--)if(!eQ(Z[K],Q[K]))return!1;return!0},hW=(Z,Q)=>{let K=Object.keys(Z),J=K.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=K[J];if(!Object.hasOwn(Q,X))return!1;if(!eQ(Z[X],Q[X]))return!1}return!0};class zQ extends I{constructor(Z,Q,K){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=K}}function m6(){return new zQ(kZ(),b,b)}function AX(Z){return new zQ(Z.handlers,Z.next_dispatched_paths,b)}function BX(Z,Q,K){return x6(Z,b6(Q,K))}function ZK(Z,Q,K){let J=BX(Z.handlers,Q,K);return new zQ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function LX(Z,Q,K){return IZ(K,Z,(J,X)=>{if(X instanceof OZ){let V=X.name;return BX(J,Q,V)}else return J})}function B0(Z,Q,K,J){let X=U(Q,Z.next_dispatched_paths),V=new zQ(Z.handlers,Z.dispatched_paths,X),G=e0(V.handlers,Q+g6+K);if(G instanceof N){let W=G[0];return[V,HQ(J,W)]}else return[V,new L(F([]))]}function QK(Z,Q){return zX(Q,Z.dispatched_paths)}function SX(Z,Q,K,J,X){return aQ(Z,b6(K,J),$0(X,(V)=>{return new a0(V.prevent_default,V.stop_propagation,QZ(Q)(V.message))}))}function S0(Z,Q,K,J,X){let V=SX(Z.handlers,Q,K,J,X);return new zQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function TX(Z,Q,K,J){return IZ(J,Z,(X,V)=>{if(V instanceof OZ){let{name:G,handler:W}=V;return SX(X,Q,K,G,W)}else return X})}function yQ(Z,Q){let K=h6(Z,QZ);if(h6(Q,QZ))return Z;else if(K)return Q;else return(X)=>{return Z(Q(X))}}function PX(Z,Q,K,J){while(!0){let X=Z,V=Q,G=K,W=J;if(W instanceof O)return X;else{let{head:Y,tail:M}=W;Z=qX(X,V,G,Y),Q=V,K=G+1,J=M}}}function qX(Z,Q,K,J){if(J instanceof uZ){let X=J.children,V=$Z(Q,K,J.key);return PX(Z,V,0,X)}else if(J instanceof yZ){let{attributes:X,children:V}=J,G=$Z(Q,K,J.key),Y=LX(Z,G,X);return PX(Y,G,0,V)}else if(J instanceof cZ)return Z;else{let X=J.attributes,V=$Z(Q,K,J.key);return LX(Z,V,X)}}function jQ(Z,Q,K,J){let X=qX(Z.handlers,Q,K,J);return new zQ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function _6(Z,Q,K,J,X){while(!0){let V=Z,G=Q,W=K,Y=J,M=X;if(M instanceof O)return V;else{let{head:H,tail:R}=M;Z=CX(V,G,W,Y,H),Q=G,K=W,J=Y+1,X=R}}}function CX(Z,Q,K,J,X){if(X instanceof uZ){let V=X.children,G=$Z(K,J,X.key),W=yQ(Q,X.mapper);return _6(Z,W,G,0,V)}else if(X instanceof yZ){let{attributes:V,children:G}=X,W=$Z(K,J,X.key),Y=yQ(Q,X.mapper),H=TX(Z,Y,W,V);return _6(H,Y,W,0,G)}else if(X instanceof cZ)return Z;else{let V=X.attributes,G=$Z(K,J,X.key),W=yQ(Q,X.mapper);return TX(Z,W,G,V)}}function OQ(Z,Q,K,J,X){let V=CX(Z.handlers,Q,K,J,X);return new zQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function $6(Z){return OQ(m6(),QZ,P0,0,Z)}function wX(Z,Q,K,J,X){let V=_6(Z.handlers,Q,K,J,X);return new zQ(V,Z.dispatched_paths,Z.next_dispatched_paths)}function aZ(Z,Q,K){return J8("",QZ,"",Z,Q,K,kZ(),!1,!1)}function KK(Z){return v6("",QZ,Z)}function X8(){return v6("",QZ,"")}function qZ(Z){return KK(Z)}function EX(Z,Q){return aZ("section",Z,Q)}function oZ(Z,Q){return aZ("div",Z,Q)}function u6(Z,Q){return aZ("dl",Z,Q)}function V8(Z,Q){return aZ("dt",Z,Q)}function c6(Z,Q){return aZ("li",Z,Q)}function G8(Z,Q){return aZ("span",Z,Q)}function W8(Z,Q){return aZ("button",Z,Q)}function p6(Z){return aZ("input",Z,b)}function d6(Z,Q){return aZ("label",Z,Q)}class Y8 extends I{constructor(Z,Q,K,J){super();this.index=Z,this.removed=Q,this.changes=K,this.children=J}}class xX extends I{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class kX extends I{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class yX extends I{constructor(Z,Q,K){super();this.kind=Z,this.added=Q,this.removed=K}}class gX extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.before=K}}class bX extends I{constructor(Z,Q,K){super();this.kind=Z,this.index=Q,this.with=K}}class fX extends I{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class vX extends I{constructor(Z,Q,K){super();this.kind=Z,this.children=Q,this.before=K}}function n6(Z,Q,K,J){return new Y8(Z,Q,K,J)}var i6=0;function hX(Z){return new xX(i6,Z)}var l6=1;function _X(Z){return new kX(l6,Z)}var r6=2;function a6(Z,Q){return new yX(r6,Z,Q)}var o6=3;function mX(Z,Q){return new gX(o6,Z,Q)}var t6=4;function $X(Z){return new fX(t6,Z)}var e6=5;function Q0(Z,Q){return new bX(e6,Z,Q)}var Z9=6;function Q9(Z,Q){return new vX(Z9,Z,Q)}class cX extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=K,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=V,this.provided_contexts=G,this.vdom=W}}class pX extends I{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class dX extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.data=K}}class sX extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.value=K}}class JK extends I{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class XK extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class VK extends I{constructor(Z,Q,K){super();this.kind=Z,this.name=Q,this.value=K}}class GK extends I{constructor(Z,Q,K,J){super();this.kind=Z,this.path=Q,this.name=K,this.event=J}}class K9 extends I{constructor(Z,Q,K){super();this.kind=Z,this.key=Q,this.value=K}}var $W=0;function nX(Z,Q,K,J,X,V,G){return new cX($W,Z,Q,K,J,X,V,G)}var uW=1;function J9(Z){return new pX(uW,Z)}var cW=2;function iX(Z,Q){return new dX(cW,Z,Q)}var pW=3;function lX(Z,Q){return new sX(pW,Z,Q)}class WK extends I{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class oX extends I{constructor(Z,Q,K){super();this.added=Z,this.removed=Q,this.events=K}}function dW(Z,Q,K,J){if(K==="input"&&Q==="")return QK(Z,J);else if(K==="select"&&Q==="")return QK(Z,J);else if(K==="textarea"&&Q==="")return QK(Z,J);else return!1}function aX(Z,Q,K,J,X,V,G,W){while(!0){let Y=Z,M=Q,H=K,R=J,z=X,B=V,P=G,C=W;if(z instanceof O)if(B instanceof O)return new oX(P,C,R);else{let T=B.head;if(T instanceof OZ){let E=T,A=B.tail,S=T.name,y=T.handler,D=U(E,P),w=S0(R,H,M,S,y);Z=Y,Q=M,K=H,J=w,X=z,V=A,G=D,W=C}else{let E=T,A=B.tail,S=U(E,P);Z=Y,Q=M,K=H,J=R,X=z,V=A,G=S,W=C}}else if(B instanceof O){let T=z.head;if(T instanceof OZ){let E=T,A=z.tail,S=T.name,y=U(E,C),D=ZK(R,M,S);Z=Y,Q=M,K=H,J=D,X=A,V=B,G=P,W=y}else{let E=T,A=z.tail,S=U(E,C);Z=Y,Q=M,K=H,J=R,X=A,V=B,G=P,W=S}}else{let{head:T,tail:E}=z,A=B.head,S=B.tail,y=a8(T,A);if(y instanceof XZ)if(T instanceof OZ){let D=T.name,w=U(T,C),k=ZK(R,M,D);Z=Y,Q=M,K=H,J=k,X=E,V=B,G=P,W=w}else{let D=U(T,C);Z=Y,Q=M,K=H,J=R,X=E,V=B,G=P,W=D}else if(y instanceof VZ)if(T instanceof mZ)if(A instanceof mZ){let D,w=A.name;if(w==="value")D=Y||T.value!==A.value;else if(w==="checked")D=Y||T.value!==A.value;else if(w==="selected")D=Y||T.value!==A.value;else D=T.value!==A.value;let k=D,g;if(k)g=U(A,P);else g=P;let f=g;Z=Y,Q=M,K=H,J=R,X=E,V=S,G=f,W=C}else if(A instanceof OZ){let{name:D,handler:w}=A,k=U(A,P),g=U(T,C),f=S0(R,H,M,D,w);Z=Y,Q=M,K=H,J=f,X=E,V=S,G=k,W=g}else{let D=U(A,P),w=U(T,C);Z=Y,Q=M,K=H,J=R,X=E,V=S,G=D,W=w}else if(T instanceof o8)if(A instanceof o8){let D,w=A.name;if(w==="scrollLeft")D=!0;else if(w==="scrollRight")D=!0;else if(w==="value")D=Y||!eQ(T.value,A.value);else if(w==="checked")D=Y||!eQ(T.value,A.value);else if(w==="selected")D=Y||!eQ(T.value,A.value);else D=!eQ(T.value,A.value);let k=D,g;if(k)g=U(A,P);else g=P;let f=g;Z=Y,Q=M,K=H,J=R,X=E,V=S,G=f,W=C}else if(A instanceof OZ){let{name:D,handler:w}=A,k=U(A,P),g=U(T,C),f=S0(R,H,M,D,w);Z=Y,Q=M,K=H,J=f,X=E,V=S,G=k,W=g}else{let D=U(A,P),w=U(T,C);Z=Y,Q=M,K=H,J=R,X=E,V=S,G=D,W=w}else if(A instanceof OZ){let{name:D,handler:w}=A,k=T.prevent_default.kind!==A.prevent_default.kind||T.stop_propagation.kind!==A.stop_propagation.kind||T.immediate!==A.immediate||T.debounce!==A.debounce||T.throttle!==A.throttle,g;if(k)g=U(A,P);else g=P;let f=g,x=S0(R,H,M,D,w);Z=Y,Q=M,K=H,J=x,X=E,V=S,G=f,W=C}else{let D=T.name,w=U(A,P),k=U(T,C),g=ZK(R,M,D);Z=Y,Q=M,K=H,J=g,X=E,V=S,G=w,W=k}else if(A instanceof OZ){let{name:D,handler:w}=A,k=U(A,P),g=S0(R,H,M,D,w);Z=Y,Q=M,K=H,J=g,X=z,V=S,G=k,W=C}else{let D=U(A,P);Z=Y,Q=M,K=H,J=R,X=z,V=S,G=D,W=C}}}}function X9(Z,Q,K,J,X,V,G,W,Y,M,H,R,z,B){while(!0){let P=Z,C=Q,T=K,E=J,A=X,S=V,y=G,D=W,w=Y,k=M,g=H,f=R,x=z,$=B;if(P instanceof O)if(T instanceof O)return new WK(new Y8(w,y,g,f),$);else{let CZ=wX($,x,k,D,T),BZ=Q9(T,D-S),t=U(BZ,g);return new WK(new Y8(w,y,t,f),CZ)}else if(T instanceof O){let{head:CZ,tail:BZ}=P,t;if(CZ.key===""||!Z8(A,CZ.key))t=y+1;else t=y;let c=t,d=jQ($,k,D,CZ);Z=BZ,Q=C,K=T,J=E,X=A,V=S,G=c,W=D,Y=w,M=k,H=g,R=f,z=x,B=d}else{let CZ=P.head,BZ=T.head;if(CZ.key!==BZ.key){let t=P.tail,e=T.tail,c=e0(C,BZ.key);if(Z8(E,CZ.key))if(c instanceof N){let h=c[0];if(Z8(A,CZ.key))Z=t,Q=C,K=T,J=E,X=A,V=S-1,G=y,W=D,Y=w,M=k,H=g,R=f,z=x,B=$;else{let s=D-S,_=U(mX(BZ.key,s),g),ZZ=aQ(A,BZ.key,void 0),n=S+1;Z=U(h,P),Q=C,K=T,J=E,X=ZZ,V=n,G=y,W=D,Y=w,M=k,H=_,R=f,z=x,B=$}}else{let h=D-S,p=OQ($,x,k,D,BZ),s=Q9(F([BZ]),h),_=U(s,g);Z=P,Q=C,K=e,J=E,X=A,V=S+1,G=y,W=D+1,Y=w,M=k,H=_,R=f,z=x,B=p}else if(c instanceof N){let h=D-S,p=U($X(h),g),s=jQ($,k,D,CZ),_=S-1;Z=t,Q=C,K=T,J=E,X=A,V=_,G=y,W=D,Y=w,M=k,H=p,R=f,z=x,B=s}else{let h=Q0(D-S,BZ),p,_=jQ($,k,D,CZ);p=OQ(_,x,k,D,BZ);let ZZ=p;Z=t,Q=C,K=e,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(h,g),R=f,z=x,B=ZZ}}else{let t=P.head;if(t instanceof uZ){let e=T.head;if(e instanceof uZ){let c=t,d=P.tail,h=e,p=T.tail,s=yQ(x,h.mapper),_=$Z(k,D,h.key),ZZ=X9(c.children,c.keyed_children,h.children,h.keyed_children,kZ(),0,0,0,D,_,b,b,s,$),n,JZ=ZZ.patch;if(JZ.changes instanceof O)if(JZ.children instanceof O)if(JZ.removed===0)n=f;else n=U(ZZ.patch,f);else n=U(ZZ.patch,f);else n=U(ZZ.patch,f);let tZ=n;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=g,R=tZ,z=x,B=ZZ.events}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=jQ($,k,D,c);_=OQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,g),R=f,z=x,B=JZ}}else if(t instanceof yZ){let e=T.head;if(e instanceof yZ){let c=t,d=e;if(c.namespace===d.namespace&&c.tag===d.tag){let h=P.tail,p=T.tail,s=yQ(x,d.mapper),_=$Z(k,D,d.key),ZZ=dW($,d.namespace,d.tag,_),n=aX(ZZ,_,s,$,c.attributes,d.attributes,b,b),JZ,GQ,tZ;JZ=n.added,GQ=n.removed,tZ=n.events;let vQ;if(JZ instanceof O&&GQ instanceof O)vQ=b;else vQ=F([a6(JZ,GQ)]);let Y0=vQ,M0=X9(c.children,c.keyed_children,d.children,d.keyed_children,kZ(),0,0,0,D,_,Y0,b,s,tZ),AQ,hQ=M0.patch;if(hQ.changes instanceof O)if(hQ.children instanceof O)if(hQ.removed===0)AQ=f;else AQ=U(M0.patch,f);else AQ=U(M0.patch,f);else AQ=U(M0.patch,f);let q7=AQ;Z=h,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=g,R=q7,z=x,B=M0.events}else{let h=t,p=P.tail,s=e,_=T.tail,ZZ=Q0(D-S,s),n,GQ=jQ($,k,D,h);n=OQ(GQ,x,k,D,s);let tZ=n;Z=p,Q=C,K=_,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(ZZ,g),R=f,z=x,B=tZ}}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=jQ($,k,D,c);_=OQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,g),R=f,z=x,B=JZ}}else if(t instanceof cZ){let e=T.head;if(e instanceof cZ){let c=t,d=e;if(c.content===d.content){let h=P.tail,p=T.tail;Z=h,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=g,R=f,z=x,B=$}else{let h=P.tail,p=e,s=T.tail,_=n6(D,0,F([hX(p.content)]),b);Z=h,Q=C,K=s,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=g,R=U(_,f),z=x,B=$}}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=jQ($,k,D,c);_=OQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,g),R=f,z=x,B=JZ}}else{let e=T.head;if(e instanceof oQ){let c=t,d=P.tail,h=e,p=T.tail,s=yQ(x,h.mapper),_=$Z(k,D,h.key),ZZ=aX(!1,_,s,$,c.attributes,h.attributes,b,b),n,JZ,GQ;n=ZZ.added,JZ=ZZ.removed,GQ=ZZ.events;let tZ;if(n instanceof O&&JZ instanceof O)tZ=b;else tZ=F([a6(n,JZ)]);let vQ=tZ,Y0;if(c.inner_html===h.inner_html)Y0=vQ;else Y0=U(_X(h.inner_html),vQ);let AQ=Y0,hQ;if(AQ instanceof O)hQ=f;else hQ=U(n6(D,0,AQ,F([])),f);let l9=hQ;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=g,R=l9,z=x,B=GQ}else{let c=t,d=P.tail,h=e,p=T.tail,s=Q0(D-S,h),_,n=jQ($,k,D,c);_=OQ(n,x,k,D,h);let JZ=_;Z=d,Q=C,K=p,J=E,X=A,V=S,G=y,W=D+1,Y=w,M=k,H=U(s,g),R=f,z=x,B=JZ}}}}}}function q0(Z,Q,K){return X9(F([Q]),kZ(),F([K]),kZ(),kZ(),0,0,0,0,P0,b,b,QZ,AX(Z))}var{setTimeout:sW,clearTimeout:V9}=globalThis,nW=(Z,Q)=>_Z().createElementNS(Z,Q),iW=(Z)=>_Z().createTextNode(Z),lW=()=>_Z().createDocumentFragment(),C0=(Z,Q,K)=>Z.insertBefore(Q,K),eX=oJ?(Z,Q,K)=>Z.moveBefore(Q,K):C0,rW=(Z,Q)=>Z.removeChild(Q),aW=(Z,Q)=>Z.getAttribute(Q),ZV=(Z,Q,K)=>Z.setAttribute(Q,K),oW=(Z,Q)=>Z.removeAttribute(Q),tW=(Z,Q,K,J)=>Z.addEventListener(Q,K,J),QV=(Z,Q,K)=>Z.removeEventListener(Q,K),eW=(Z,Q)=>Z.innerHTML=Q,Z5=(Z,Q)=>Z.data=Q,LQ=Symbol("lustre");class XV{constructor(Z,Q,K,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=K,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===rZ?this.node.parentNode:this.node}}var TQ=(Z,Q,K,J,X)=>{let V=new XV(Z,Q,K,X);return K[LQ]=V,Q?.children.splice(J,0,V),V},Q5=(Z)=>{let Q="";for(let K=Z[LQ];K.parent;K=K.parent)if(K.key)Q=`${K8}${K.key}${Q}`;else{let J=K.parent.children.indexOf(K);Q=`${K8}${J}${Q}`}return Q.slice(1)};class W9{#Z=null;#X=()=>{};#J=!1;#K=!1;constructor(Z,Q,{useServerEvents:K=!1,exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#J=K,this.#K=J}mount(Z){TQ(tQ,null,this.#Z,0,null),this.#j(this.#Z,null,this.#Z[LQ],0,Z)}push(Z){this.#Q.push({node:this.#Z[LQ],patch:Z}),this.#V()}#Q=[];#V(){let Z=this.#Q;while(Z.length){let{node:Q,patch:K}=Z.pop(),{children:J}=Q,{changes:X,removed:V,children:G}=K;if(K0(X,(W)=>this.#W(Q,W)),V)this.#R(Q,J.length-V,V);K0(G,(W)=>{let Y=J[W.index|0];this.#Q.push({node:Y,patch:W})})}}#W(Z,Q){switch(Q.kind){case i6:this.#A(Z,Q);break;case l6:this.#O(Z,Q);break;case r6:this.#N(Z,Q);break;case o6:this.#H(Z,Q);break;case t6:this.#I(Z,Q);break;case e6:this.#F(Z,Q);break;case Z9:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:K}){let J=lW(),X=this.#M(Z,K);this.#z(J,null,Z,K|0,Q),C0(Z.parentNode,J,X)}#F(Z,{index:Q,with:K}){this.#R(Z,Q|0,1);let J=this.#M(Z,Q);this.#j(Z.parentNode,J,Z,Q|0,K)}#M(Z,Q){Q=Q|0;let{children:K}=Z,J=K.length;if(Q<J)return K[Q].node;let X=K[J-1];if(!X&&Z.kind!==rZ)return null;if(!X)X=Z;while(X.kind===rZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#H(Z,{key:Q,before:K}){K=K|0;let{children:J,parentNode:X}=Z,V=J[K].node,G=J[K];for(let H=K+1;H<J.length;++H){let R=J[H];if(J[H]=G,G=R,R.key===Q){J[K]=R;break}}let{kind:W,node:Y,children:M}=G;if(eX(X,Y,V),W===rZ)this.#G(X,M,V)}#G(Z,Q,K){for(let J=0;J<Q.length;++J){let{kind:X,node:V,children:G}=Q[J];if(eX(Z,V,K),X===rZ)this.#G(Z,G,K)}}#I(Z,{index:Q}){this.#R(Z,Q,1)}#R(Z,Q,K){let{children:J,parentNode:X}=Z,V=J.splice(Q,K);for(let G=0;G<V.length;++G){let{kind:W,node:Y,children:M}=V[G];if(rW(X,Y),this.#U(V[G]),W===rZ)V.push(...M)}}#U(Z){let{debouncers:Q,children:K}=Z;for(let{timeout:J}of Q.values())if(J)V9(J);Q.clear(),K0(K,(J)=>this.#U(J))}#N({node:Z,handlers:Q,throttles:K,debouncers:J},{added:X,removed:V}){K0(V,({name:G})=>{if(Q.delete(G))QV(Z,G,G9),this.#D(K,G,0),this.#D(J,G,0);else oW(Z,G),JV[G]?.removed?.(Z,G)}),K0(X,(G)=>this.#P(Z,G))}#A({node:Z},{content:Q}){Z5(Z,Q??"")}#O({node:Z},{inner_html:Q}){eW(Z,Q??"")}#z(Z,Q,K,J,X){K0(X,(V)=>this.#j(Z,Q,K,J++,V))}#j(Z,Q,K,J,X){switch(X.kind){case tQ:{let V=this.#L(K,J,X);this.#z(V,null,V[LQ],0,X.children),C0(Z,V,Q);break}case A0:{let V=this.#T(K,J,X);C0(Z,V,Q);break}case rZ:{let V=this.#T(K,J,X);C0(Z,V,Q),this.#z(Z,Q,V[LQ],0,X.children);break}case OX:{let V=this.#L(K,J,X);this.#O({node:V},X),C0(Z,V,Q);break}}}#L(Z,Q,{kind:K,key:J,tag:X,namespace:V,attributes:G}){let W=nW(V||n8,X);if(TQ(K,Z,W,Q,J),this.#K&&J)ZV(W,"data-lustre-key",J);return K0(G,(Y)=>this.#P(W,Y)),W}#T(Z,Q,{kind:K,key:J,content:X}){let V=iW(X??"");return TQ(K,Z,V,Q,J),V}#P(Z,Q){let{debouncers:K,handlers:J,throttles:X}=Z[LQ],{kind:V,name:G,value:W,prevent_default:Y,debounce:M,throttle:H}=Q;switch(V){case L6:{let R=W??"";if(G==="virtual:defaultValue"){Z.defaultValue=R;return}if(R!==aW(Z,G))ZV(Z,G,R);JV[G]?.added?.(Z,R);break}case WX:Z[G]=W;break;case T6:{if(J.has(G))QV(Z,G,G9);let R=Y.kind===P6;tW(Z,G,G9,{passive:R}),this.#D(X,G,H),this.#D(K,G,M),J.set(G,(z)=>this.#B(Q,z));break}}}#D(Z,Q,K){let J=Z.get(Q);if(K>0)if(J)J.delay=K;else Z.set(Q,{delay:K});else if(J){let{timeout:X}=J;if(X)V9(X);Z.delete(Q)}}#B(Z,Q){let{currentTarget:K,type:J}=Q,{debouncers:X,throttles:V}=K[LQ],G=Q5(K),{prevent_default:W,stop_propagation:Y,include:M,immediate:H}=Z;if(W.kind===B6)Q.preventDefault();if(Y.kind===B6)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let R=this.#J?K5(Q,M??[]):Q,z=V.get(J);if(z){let P=Date.now(),C=z.last||0;if(P>C+z.delay)z.last=P,z.lastEvent=Q,this.#X(R,G,J,H)}let B=X.get(J);if(B)V9(B.timeout),B.timeout=sW(()=>{if(Q===V.get(J)?.lastEvent)return;this.#X(R,G,J,H)},B.delay);if(!z&&!B)this.#X(R,G,J,H)}}var K0=(Z,Q)=>{if(Array.isArray(Z))for(let K=0;K<Z.length;K++)Q(Z[K]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},G9=(Z)=>{let{currentTarget:Q,type:K}=Z;Q[LQ].handlers.get(K)(Z)},K5=(Z,Q=[])=>{let K={};if(Z.type==="input"||Z.type==="change")Q.push("target.value");if(Z.type==="submit")Q.push("detail.formData");for(let J of Q){let X=J.split(".");for(let V=0,G=Z,W=K;V<X.length;V++){if(V===X.length-1){W[X[V]]=G[X[V]];break}W=W[X[V]]??={},G=G[X[V]]}}return K},KV=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},J5=(Z)=>{return{added(Q,K){Q[Z]=K}}},JV={checked:KV("checked"),selected:KV("selected"),value:J5("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function X5(Z,Q,K){while(!0){let J=Z,X=Q,V=K;if(J instanceof O)return[X,u(V)];else{let G=J.tail,W=J.head[0],Y=J.head[1],M=jX(W,Y),H;if(W==="")H=X;else H=aQ(X,W,M);let R=H,z=U(M,V);Z=G,Q=R,K=z}}}function Y9(Z){return X5(Z,kZ(),b)}function M9(Z,Q,K){let J=Y9(K),X,V;return X=J[0],V=J[1],J8("",QZ,"",Z,Q,V,X,!1,!1)}function VV(Z,Q,K,J){let X=Y9(J),V,G;return V=X[0],G=X[1],J8("",QZ,Z,Q,K,G,V,!1,!1)}function GV(Z){let Q=Y9(Z),K,J;return K=Q[0],J=Q[1],f6("",QZ,J,K)}function H9(Z,Q){return M9("ul",Z,Q)}var WV=(Z)=>{let Q=TQ(tQ,null,Z,0,null),K=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(YV(G))K+=1;if(K===0){let G=_Z().createTextNode("");return TQ(A0,Q,G,0,null),Z.replaceChildren(G),X8()}if(K===1)return F9(Q,Z).head[1];let J=_Z().createTextNode(""),X=TQ(rZ,Q,J,0,null),V=F9(X,Z);return Z.insertBefore(J,Z.firstChild),GV(V)},YV=(Z)=>{switch(Z.nodeType){case i8:return!0;case j6:return!!Z.data;default:return!1}},G5=(Z,Q,K,J)=>{if(!YV(Q))return null;switch(Q.nodeType){case i8:{let X=TQ(tQ,Z,Q,J,K),V=Q.localName,G=Q.namespaceURI,W=!G||G===n8;if(W&&W5.includes(V))Y5(V,Q);let Y=M5(Q),M=F9(X,Q);return W?M9(V,Y,M):VV(G,V,Y,M)}case j6:return TQ(A0,Z,Q,J,null),KK(Q.data);default:return null}},W5=["input","select","textarea"],Y5=(Z,Q)=>{let{value:K,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!K)return;queueMicrotask(()=>{if(Q.value=K,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),_Z().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},F9=(Z,Q)=>{let K=null,J=Q.firstChild,X=null,V=0;while(J){let G=J.nodeType===i8?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let W=G5(Z,J,G,V),Y=J.nextSibling;if(W){let M=new gZ([G??"",W],null);if(X)X=X.tail=M;else X=K=M;V+=1}else Q.removeChild(J);J=Y}if(!X)return b;return X.tail=b,K},M5=(Z)=>{let Q=Z.attributes.length,K=b;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;K=new gZ(H5(J),K)}return K},H5=(Z)=>{let{localName:Q,value:K}=Z;return VQ(Q,K)};var bQ=()=>!!_Z();class YK{constructor(Z,[Q,K],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#J=X,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#W.has(V.context))return;V.stopImmediatePropagation();let G=this.#W.get(V.context);if(V.subscribe){let W=()=>{G.subscribers=G.subscribers.filter((Y)=>Y!==V.callback)};G.subscribers.push([V.callback,W]),V.callback(G.value,W)}else V.callback(G.value)}),this.#V=new W9(this.root,(V,G,W)=>{let[Y,M]=B0(this.#Q,G,W,V);if(this.#Q=Y,M.isOk()){let H=M[0];if(H.stop_propagation)V.stopPropagation();if(H.prevent_default)V.preventDefault();this.dispatch(H.message,!1)}}),this.#K=WV(this.root),this.#Q=m6(),this.#I=!0,this.#U(K)}root=null;dispatch(Z,Q=!1){if(this.#I||=Q,this.#Y)this.#F.push(Z);else{let[K,J]=this.#J(this.#Z,Z);this.#Z=K,this.#U(J)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#W.has(Z))this.#W.set(Z,{value:Q,subscribers:[]});else{let K=this.#W.get(Z);K.value=Q;for(let J=K.subscribers.length-1;J>=0;J--){let[X,V]=K.subscribers[J];if(!X){K.subscribers.splice(J,1);continue}X(Q,V)}}}#Z;#X;#J;#K;#Q;#V;#W=new Map;#Y=!1;#F=[];#M=b;#H=b;#G=null;#I=!1;#R={dispatch:(Z,Q)=>this.dispatch(Z,Q),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#U(Z){this.#Y=!0;while(!0){for(let Q=Z.synchronous;Q.tail;Q=Q.tail)Q.head(this.#R);if(this.#M=HV(this.#M,Z.before_paint),this.#H=HV(this.#H,Z.after_paint),!this.#F.length)break;[this.#Z,Z]=this.#J(this.#Z,this.#F.shift())}if(this.#Y=!1,this.#I)cancelAnimationFrame(this.#G),this.#N();else if(!this.#G)this.#G=requestAnimationFrame(()=>{this.#N()})}#N(){this.#I=!1,this.#G=null;let Z=this.#X(this.#Z),{patch:Q,events:K}=q0(this.#Q,this.#K,Z);if(this.#Q=K,this.#K=Z,this.#V.push(Q),this.#M instanceof gZ){let J=MV(this.#M);this.#M=b,queueMicrotask(()=>{this.#I=!0,this.#U(J)})}if(this.#H instanceof gZ){let J=MV(this.#H);this.#H=b,requestAnimationFrame(()=>{this.#I=!0,this.#U(J)})}}}var I9=(Z,Q)=>{Z.send(Q)};function MV(Z){return{synchronous:Z,after_paint:b,before_paint:b}}function HV(Z,Q){if(Z instanceof O)return Q;else if(Q instanceof O)return Z;else return $Q(Z,Q)}class R9 extends I{constructor(Z){super();this.message=Z}}class N9 extends I{constructor(Z){super();this.callback=Z}}class D9 extends I{constructor(Z){super();this.callback=Z}}class PQ extends I{constructor(Z){super();this.message=Z}}class J0 extends I{constructor(Z,Q){super();this.name=Z,this.data=Q}}class MK extends I{constructor(Z,Q){super();this.key=Z,this.value=Q}}class X0 extends I{}class IV extends I{constructor(Z,Q,K,J,X,V,G,W,Y,M){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=K,this.attributes=J,this.properties=X,this.contexts=V,this.is_form_associated=G,this.on_form_autofill=W,this.on_form_reset=Y,this.on_form_restore=M}}function UV(Z){let Q=new IV(!0,!0,!1,b,b,b,!1,l8,l8,l8);return IZ(Z,Q,(K,J)=>{return J.apply(K)})}class NV{#Z;constructor(Z,[Q,K],J,X){this.#Z=new YK(Z,[Q,K],X,J)}send(Z){switch(Z.constructor){case PQ:{this.dispatch(Z.message,!1);break}case J0:{this.emit(Z.name,Z.data);break}case X0:break}}dispatch(Z,Q){this.#Z.dispatch(Z,Q)}emit(Z,Q){this.#Z.emit(Z,Q)}}var DV=({init:Z,update:Q,view:K},J,X)=>{if(!bQ())return new L(new M8);let V=J instanceof HTMLElement?J:_Z().querySelector(J);if(!V)return new L(new z9(J));return new N(new NV(V,Z(X),Q,K))};class F5{#Z;#X;#J;#K;#Q;#V;#W=mQ();#Y=new Set;constructor([Z,Q],K,J,X){this.#Z=Z,this.#X=K,this.#J=J,this.#K=X,this.#Q=this.#J(this.#Z),this.#V=$6(this.#Q),this.#G(Q)}send(Z){switch(Z.constructor){case R9:{let{message:Q}=Z,K=this.#F(Q),J=q0(this.#V,this.#Q,K);this.#Q=K,this.#V=J.events,this.broadcast(J9(J.patch));return}case N9:{let{callback:Q}=Z;this.#Y.add(Q),Q(nX(this.#K.open_shadow_root,this.#K.adopt_styles,f0(this.#K.attributes),f0(this.#K.properties),f0(this.#K.contexts),this.#W,this.#Q));return}case D9:{let{callback:Q}=Z;this.#Y.delete(Q);return}case PQ:{let{message:Q}=Z,[K,J]=this.#X(this.#Z,Q),X=this.#J(K),V=q0(this.#V,this.#Q,X);this.#G(J),this.#Z=K,this.#Q=X,this.#V=V.events,this.broadcast(J9(V.patch));return}case J0:{let{name:Q,data:K}=Z;this.broadcast(iX(Q,K));return}case MK:{let{key:Q,value:K}=Z;this.#W=b0(this.#W,Q,K),this.broadcast(lX(Q,K));return}case X0:{this.#Z=null,this.#X=null,this.#J=null,this.#K=null,this.#Q=null,this.#V=null,this.#W=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#F(Z){switch(Z.constructor){case JK:{let{messages:Q}=Z,K=this.#Z,J=o();for(let X=Q;X.head;X=X.tail){let V=this.#F(X.head);if(V instanceof N){K=V[0][0],J=t8(MZ.fromArray([J,V[0][1]]));break}}return this.#G(J),this.#Z=K,this.#J(this.#Z)}case XK:{let{name:Q,value:K}=Z,J=this.#M(Q,K);if(J instanceof L)return this.#Q;else{let[X,V]=this.#X(this.#Z,J[0]);return this.#G(V),this.#Z=X,this.#J(this.#Z)}}case VK:{let{name:Q,value:K}=Z,J=this.#H(Q,K);if(J instanceof L)return this.#Q;else{let[X,V]=this.#X(this.#Z,J[0]);return this.#G(V),this.#Z=X,this.#J(this.#Z)}}case GK:{let{path:Q,name:K,event:J}=Z,[X,V]=B0(this.#V,Q,K,J);if(this.#V=X,V instanceof L)return this.#Q;else{let[G,W]=this.#X(this.#Z,V[0].message);return this.#G(W),this.#Z=G,this.#J(this.#Z)}}case K9:{let{key:Q,value:K}=Z,J=BQ(this.#K.contexts,Q);if(J instanceof L)return this.#Q;if(J=HQ(K,J[0]),J instanceof L)return this.#Q;let[X,V]=this.#X(this.#Z,J[0]);return this.#G(V),this.#Z=X,this.#J(this.#Z)}}}#M(Z,Q){let K=BQ(this.#K.attributes,Z);switch(K.constructor){case N:return K[0](Q);case L:return new L(void 0)}}#H(Z,Q){let K=BQ(this.#K.properties,Z);switch(K.constructor){case N:return K[0](Q);case L:return new L(void 0)}}#G(Z){let Q=(G)=>this.send(new PQ(G)),K=(G,W)=>this.send(new J0(G,W)),J=()=>{return},X=()=>{return},V=(G,W)=>this.send(new MK(G,W));globalThis.queueMicrotask(()=>{IX(Z,Q,K,J,X,V)})}}class zV extends I{constructor(Z,Q,K,J){super();this.init=Z,this.update=Q,this.view=K,this.config=J}}class z9 extends I{constructor(Z){super();this.selector=Z}}class M8 extends I{}function jV(Z,Q,K){return new zV(Z,Q,K,UV(b))}function OV(Z){return new PQ(Z)}function LV(Z,Q,K){return EQ(!bQ(),new L(new M8),()=>{return DV(Z,Q,K)})}var R5={handle_external_links:!1,handle_internal_links:!0},SV=globalThis?.window?.location?.href,L9=()=>{if(!SV)return new L(void 0);else return new N(O9(new URL(SV)))},T9=(Z,Q=R5)=>{document.addEventListener("click",(K)=>{let J=CV(K.target);if(!J)return;try{let X=new URL(J.href),V=O9(X),G=X.host!==window.location.host||J.target==="_blank";if(!Q.handle_external_links&&G)return;if(!Q.handle_internal_links&&!G)return;if(K.preventDefault(),!G)window.history.pushState({},"",J.href),window.requestAnimationFrame(()=>{if(X.hash)document.getElementById(X.hash.slice(1))?.scrollIntoView();else window.scrollTo(0,0)});return Z(V)}catch{return}}),window.addEventListener("popstate",(K)=>{K.preventDefault();let J=new URL(window.location.href),X=O9(J);window.requestAnimationFrame(()=>{if(J.hash)document.getElementById(J.hash.slice(1))?.scrollIntoView();else window.scrollTo(0,0)}),Z(X)}),window.addEventListener("modem-push",({detail:K})=>{Z(K)}),window.addEventListener("modem-replace",({detail:K})=>{Z(K)})},qV=(Z)=>{window.history.pushState({},"",wV(g8(Z))),window.requestAnimationFrame(()=>{if(Z.fragment[0])document.getElementById(Z.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:Z}))};var CV=(Z)=>{if(!Z||Z.tagName==="BODY")return null;else if(Z.tagName==="A")return Z;else return CV(Z.parentElement)},O9=(Z)=>{return new v(Z.protocol?new j(Z.protocol.slice(0,-1)):new q,new q,Z.hostname?new j(Z.hostname):new q,Z.port?new j(Number(Z.port)):new q,Z.pathname,Z.search?new j(Z.search.slice(1)):new q,Z.hash?new j(Z.hash.slice(1)):new q)},wV=(Z)=>{if(!Z.endsWith("?")&&!Z.endsWith("#"))return Z;return wV(Z.slice(0,-1))};function xV(Z){return T0((Q)=>{return EQ(!bQ(),void 0,()=>{return T9((K)=>{let X=Z(K);return Q(X)})})})}function EV(Z){if(Z==="")return new q;else return new j(Z)}var HK=new v(new q,new q,new q,new q,"",new q,new q);function H8(Z,Q,K){return T0((J)=>{return EQ(!bQ(),void 0,()=>{return qV(new v(HK.scheme,HK.userinfo,HK.host,HK.port,Z,k0(Q,EV),k0(K,EV)))})})}function P9(Z,Q){return Q in Z?new N(Z[Q]):new L(void 0)}class V0{constructor(Z){this.promise=Z}static wrap(Z){return Z instanceof Promise?new V0(Z):Z}static unwrap(Z){return Z instanceof V0?Z.promise:Z}}function FK(Z){return Promise.resolve(V0.wrap(Z))}function kV(Z,Q){return Z.then((K)=>Q(V0.unwrap(K)))}function F8(Z,Q){return Z.then((K)=>V0.wrap(Q(V0.unwrap(K))))}function yV(Z,Q){return F8(Z,(J)=>{return Q(J),J})}function IK(Z,Q){return kV(Z,(J)=>{if(J instanceof N){let X=J[0];return Q(X)}else{let X=J[0];return FK(new L(X))}})}function A9(Z,Q){return document.addEventListener(Z,Q)}function w0(Z){let Q=document.getElementById(Z);if(!Q)return new L;return new N(Q)}function gV(Z){if(Z instanceof Element)return new N(Z);else return new L}function B9(Z){Z.scrollIntoView({behavior:"smooth",block:"nearest"})}function UK(Z,Q){return Z.contains(Q)}function S9(Z){return Z.target}function bV(Z){let Q=gV(Z);if(Q instanceof N)return Q;else return new L(new sZ("Element",dZ(Z),F([])))}class NK extends I{}class C9 extends I{}class vV extends I{}class hV extends I{}class _V extends I{}class mV extends I{}class $V extends I{}class uV extends I{}class cV extends I{}class w9 extends I{}class DK extends I{}function pV(Z){if(Z instanceof NK)return"GET";else if(Z instanceof C9)return"POST";else if(Z instanceof vV)return"HEAD";else if(Z instanceof hV)return"PUT";else if(Z instanceof _V)return"DELETE";else if(Z instanceof mV)return"TRACE";else if(Z instanceof $V)return"CONNECT";else if(Z instanceof uV)return"OPTIONS";else if(Z instanceof cV)return"PATCH";else return Z[0]}function dV(Z){if(Z instanceof w9)return"http";else return"https"}function sV(Z){let Q=hZ(Z);if(Q==="http")return new N(new w9);else if(Q==="https")return new N(new DK);else return new L(void 0)}class iV extends I{constructor(Z,Q,K,J,X,V,G,W){super();this.method=Z,this.headers=Q,this.body=K,this.scheme=J,this.host=X,this.port=V,this.path=G,this.query=W}}function lV(Z){return new v(new j(dV(Z.scheme)),new q,new j(Z.host),Z.port,Z.path,Z.query,new q)}function rV(Z){return GZ((()=>{let Q=Z.scheme,K=eZ(Q,"");return sV(K)})(),(Q)=>{return GZ((()=>{let K=Z.host;return vK(K,void 0)})(),(K)=>{let J=new iV(new NK,F([]),"",Q,K,Z.port,Z.path,Z.query);return new N(J)})})}class E9 extends I{constructor(Z,Q,K){super();this.status=Z,this.headers=Q,this.body=K}}function oV(Z,Q){return tK(Z.headers,hZ(Q))}async function eV(Z){try{return new N(await fetch(Z))}catch(Q){return new L(new R8(Q.toString()))}}function Z7(Z){return new E9(Z.status,MZ.fromArray([...Z.headers]),Z)}function P5(Z){let Q=g8(lV(Z)),K=pV(Z.method).toUpperCase(),J={headers:A5(Z.headers),method:K};return[Q,J]}function Q7(Z){let[Q,K]=P5(Z);if(K.method!=="GET"&&K.method!=="HEAD")K.body=Z.body;return new globalThis.Request(Q,K)}function A5(Z){let Q=new globalThis.Headers;for(let[K,J]of Z)Q.append(K.toLowerCase(),J);return Q}async function x9(Z){let Q;try{Q=await Z.body.text()}catch(K){return new L(new N8)}return new N(Z.withFields({body:Q}))}class R8 extends I{constructor(Z){super();this[0]=Z}}class N8 extends I{}function K7(Z){let K=Q7(Z),J=eV(K);return IK(J,(X)=>{return FK(new N(Z7(X)))})}var k9=(Z)=>{if(!globalThis.location)return new L(void 0);let Q=new URL(Z,globalThis.location.href),K=q5(Q);return new N(K)},q5=(Z)=>{let Q=(K)=>K?new j(K):new q;return new v(Q(Z.protocol?.slice(0,-1)),new q,Q(Z.hostname),Q(Z.port&&Number(Z.port)),Z.pathname,Q(Z.search?.slice(1)),Q(Z.hash?.slice(1)))};class y9 extends I{}class g9 extends I{constructor(Z){super();this[0]=Z}}class X7 extends I{constructor(Z){super();this[0]=Z}}class V7 extends I{constructor(Z){super();this[0]=Z}}class G7 extends I{}class jK extends I{constructor(Z){super();this[0]=Z}}class W7 extends I{constructor(Z){super();this.run=Z}}function C5(Z){return new W7((Q)=>{return Z(GZ(Q,(K)=>{let J=K.status,X=J;if(X>=200&&X<300)return new N(K);else{let V=J;if(V>=400&&V<600)return new L(new X7(K));else return new L(new jK(K))}}))})}function w5(Z){return C5((Q)=>{return Z(GZ(Q,(K)=>{let J=oV(K,"content-type");if(J instanceof N){let X=J[0];if(X==="application/json")return new N(K);else if(X.startsWith("application/json;"))return new N(K);else return new L(new jK(K))}else return new L(new jK(K))}))})}function E5(Z,Q){return T0((K)=>{let J=K7(Z),X=IK(J,x9),V=F8(X,(W)=>{return D0(W,(Y)=>{if(Y instanceof R8)return new G7;else if(Y instanceof N8)return new y9;else return new y9})}),G=F8(V,Q.run);yV(G,K);return})}function x5(Z,Q){return E5(Z,Q)}function J7(Z,Q){return T0((K)=>{let J=new L(Z),X=Q.run(J);return K(X)})}function k5(Z,Q){let K=Z.body,J=z6(K,Q);return D0(J,(X)=>{return new V7(X)})}function D8(Z,Q){return w5((K)=>{let X=GZ(K,(V)=>{return k5(V,Z)});return Q(X)})}function y5(Z){let Q;if(Z.startsWith("./"))Q=k9(Z);else if(Z.startsWith("/"))Q=k9(Z);else Q=b8(Z);return p0(Q,new g9(Z))}function z8(Z,Q){let K=y5(Z);if(K instanceof N){let J=K[0],X=rV(J),V=FQ(X,(W)=>{return x5(W,Q)}),G=D0(V,(W)=>{return J7(new g9(Z),Q)});return V6(G)}else{let J=K[0];return J7(J,Q)}}class j8 extends I{}class fQ extends I{constructor(Z,Q){super();this[0]=Z,this[1]=Q}}function b9(Z){let Q=u(Z),K;K=_0(Q,(V)=>{if(V[0]==="p"){let W=V[1];return GZ(w8(cQ(W)),(Y)=>{return new N(new fQ(Y,new q))})}else return new L(void 0)});let X=K;if(X instanceof N){let V=X[0];if(V instanceof fQ)if(V[1]instanceof q){let W=V[0],Y,H=_0(Q,(z)=>{if(z[0]==="w"){let P=z[1];return w8(cQ(P))}else return new L(void 0)});return Y=bZ(H),new fQ(W,Y)}else return V;else return V}else return new j8}class OK extends I{constructor(Z,Q){super();this.name=Z,this.code=Q}}class LK extends I{constructor(Z,Q,K){super();this.name=Z,this.code=Q,this.province_code=K}}class O8 extends I{}class TK extends I{}class PK extends I{}class G0 extends I{}class f9 extends I{}class AK extends I{}class BK extends I{}class SK extends I{constructor(Z){super();this[0]=Z}}class qK extends I{constructor(Z){super();this[0]=Z}}class CK extends I{constructor(Z){super();this[0]=Z}}class wK extends I{}class EK extends I{}class xK extends I{constructor(Z){super();this[0]=Z}}class kK extends I{constructor(Z){super();this[0]=Z}}class yK extends I{constructor(Z){super();this[0]=Z}}class L8 extends I{constructor(Z){super();this[0]=Z}}class T8 extends I{constructor(Z){super();this[0]=Z}}class P8 extends I{constructor(Z){super();this[0]=Z}}class A8 extends I{constructor(Z){super();this[0]=Z}}class gK extends I{constructor(Z){super();this[0]=Z}}class v9 extends I{constructor(Z){super();this[0]=Z}}class KZ extends I{constructor(Z,Q,K,J,X){super();this.is_shown=Z,this.filter_text=Q,this.filtered_items=K,this.selected_item=J,this.focused_index=X}}function B8(){return new KZ(!1,"",dJ(),new q,0)}function H7(){let Z="https://provinces.open-api.vn/api/v2/p/",Q=AZ("name",nZ,(J)=>{return AZ("code",SQ,(X)=>{return PZ(new OK(J,X))})}),K=D8(pQ(Q),(J)=>{return new L8(J)});return z8(Z,K)}function F7(Z){let Q="https://provinces.open-api.vn/api/v2/p/?"+nQ(F([["search",Z]])),K=AZ("name",nZ,(X)=>{return AZ("code",SQ,(V)=>{return PZ(new OK(X,V))})}),J=D8(pQ(K),(X)=>{return new T8(X)});return z8(Q,J)}function _9(Z){let Q="https://provinces.open-api.vn/api/v2/p/"+a(Z)+"?depth=2",K=AZ("name",nZ,(V)=>{return AZ("code",SQ,(G)=>{return PZ(new LK(V,G,Z))})}),J=AZ("wards",pQ(K),(V)=>{return PZ(V)}),X=D8(J,(V)=>{return new P8(V)});return z8(Q,X)}function I7(Z,Q){let K="https://provinces.open-api.vn/api/v2/w/?"+nQ(F([["search",Z],["province",a(Q)]])),J=AZ("name",nZ,(V)=>{return AZ("code",SQ,(G)=>{return AZ("province_code",SQ,(W)=>{return PZ(new LK(V,G,W))})})}),X=D8(pQ(J),(V)=>{return new A8(V)});return z8(K,X)}function b5(Z){if(Z==="input")return!0;else if(Z==="change")return!0;else if(Z==="focus")return!0;else if(Z==="focusin")return!0;else if(Z==="focusout")return!0;else if(Z==="blur")return!0;else if(Z==="select")return!0;else return!1}function W0(Z,Q){return YX(Z,$0(Q,(K)=>{return new a0(!1,!1,K)}),b,A6,A6,b5(Z),0,0)}function m9(Z,Q){if(Z instanceof OZ)return new OZ(Z.kind,Z.name,Z.handler,Z.include,Z.prevent_default,Z.stop_propagation,Z.immediate,x8(0,Q),Z.throttle);else return Z}function $9(Z){return W0("click",PZ(Z))}function u9(Z){return W0("input",K6(F(["target","value"]),nZ,(Q)=>{return PZ(Z(Q))}))}function c9(Z){return W0("focus",PZ(Z))}function U7(Z,Q){if(Z)return Q();else return Z}function p9(Z,Q){return Array.from(Z.querySelectorAll(Q))}function d9(Z,Q){let K=Z.getBoundingClientRect(),J=Q.getBoundingClientRect(),X=K.top-J.top,V=Q.clientHeight<=X+K.height,G=X<0;return V||G}class bK extends I{constructor(Z,Q,K,J,X){super();this.text_input=Z,this.choice_click=Q,this.input_focus=K,this.clear_click=J,this.option_navigate=X}}function R7(Z){return u6(F([m("max-w-md mt-8")]),F([V8(F([m("font-semibold text-lg")]),F([qZ(Z.name)])),V8(F([m("flex")]),F([G8(F([m("block")]),F([qZ("Mã số:")])),G8(F([m("block flex-grow text-end")]),F([qZ(a(Z.code))]))]))]))}function N7(Z){return u6(F([m("max-w-md mt-8")]),F([V8(F([m("font-semibold text-lg")]),F([qZ(Z.name)])),V8(F([m("flex")]),F([G8(F([m("block")]),F([qZ("Mã số:")])),G8(F([m("block flex-grow text-end")]),F([qZ(a(Z.code))]))]))]))}function D7(Z,Q){return W0("keyup",AZ("key",nZ,(K)=>{let J;if(K==="ArrowUp")J=new j(Z.option_navigate(new G0));else if(K==="ArrowDown")J=new j(Z.option_navigate(new f9));else if(K==="Enter")J=SZ(Q,Z.choice_click);else J=new q;let G=SZ(J,(W)=>{return PZ(W)});return e9(G,()=>{return Q6(Z.option_navigate(new G0),"SlideDir")})}))}function s9(Z,Q){return EQ(Q<=0,o(),()=>{return UX((K,J)=>{let X=Q-1,V=w0(Z),G,Y=FQ(V,(H)=>{return p9(H,"li")});G=GZ(Y,(H)=>{return P9(H,X)});let M=G;if(V instanceof N&&M instanceof N){let H=V[0],R=M[0];U7(d9(R,H),()=>{return B9(R),!0})}return})})}var z7="border focus-visible:outline-none focus-visible:ring-1 ps-2 pe-6 py-1 w-full rounded",j7="w-full text-start px-2 py-1.5 rounded cursor-pointer",O7="hover:bg-neutral-200 dark:hover:bg-neutral-600",_5="vn-focus",L7="bg-slate-200 dark:bg-slate-600 "+_5,T7="absolute end-0 px-2 text-xl hover:text-red-400 focus:text-red-400 hover:dark:text-red-400 cursor-pointer",P7="absolute z-1 top-10 start-0 end-0 sm:-end-4 py-2 ps-2 bg-neutral-50 dark:bg-neutral-800 rounded shadow";function A7(Z,Q,K){let J,X,V,G,W;J=Q.is_shown,X=Q.filter_text,V=Q.filtered_items,G=Q.selected_item,W=Q.focused_index;let Y;Y=I6(V,(S,y)=>{let D=W0("click",PZ(K.choice_click(S))),w;if(G instanceof j){let $=G[0];if(l($,S))w="✓ ";else w=""}else w="";let k=w,g,f=W;if(f>0&&f===y+1)g=!0;else g=!1;let x=g;return[a(S.code),c6(F([rQ("option")]),F([W8(F([o0(F([[j7,!0],[L7,x],[O7,!x]])),D]),F([qZ(k+S.name)]))]))]});let H=Y,R,z=u9(K.text_input);R=m9(z,200);let B=R,P,T=W-1;if(T>=0){let y=F6(V,T);P=bZ(y)}else P=new q;let A=D7(K,P);return oZ(F([S6(Z),m("relative")]),F([p6(F([q6("search"),m(z7),rQ("combobox"),C6(X),B,c9(K.input_focus),A])),W8(F([m(T7),E6("Close"),w6(!0),$9(K.clear_click)]),F([qZ("⨯")])),oZ(F([m(P7),o0(F([["hidden",!J]]))]),F([oZ(F([m("max-h-40 overflow-y-auto")]),F([H9(F([m("pe-2"),rQ("listbox")]),U6(H))]))]))]))}function B7(Z,Q,K){let J,X,V,G,W;J=Q.is_shown,X=Q.filter_text,V=Q.filtered_items,G=Q.selected_item,W=Q.focused_index;let Y;Y=I6(V,(S,y)=>{let D=W0("click",PZ(K.choice_click(S))),w;if(G instanceof j){let $=G[0];if(l($,S))w="✓ ";else w=""}else w="";let k=w,g,f=W;if(f>0&&f===y+1)g=!0;else g=!1;let x=g;return[a(S.code),c6(F([rQ("option")]),F([W8(F([o0(F([[j7,!0],[L7,x],[O7,!x]])),D]),F([qZ(k+S.name)]))]))]});let H=Y,R,z=u9(K.text_input);R=m9(z,200);let B=R,P,T=W-1;if(T>=0){let y=F6(V,T);P=bZ(y)}else P=new q;let A=D7(K,P);return oZ(F([S6(Z),m("relative")]),F([p6(F([q6("search"),m(z7),rQ("combobox"),C6(X),B,c9(K.input_focus),A])),W8(F([m(T7),E6("Close"),w6(!0),$9(K.clear_click)]),F([qZ("⨯")])),oZ(F([m(P7),o0(F([["hidden",!J]]))]),F([oZ(F([m("max-h-40 overflow-y-auto")]),F([H9(F([m("pe-2"),rQ("listbox")]),U6(H))]))]))]))}var $5="src/vn_provinces_demo.gleam";class DZ extends I{constructor(Z,Q,K,J,X){super();this.route=Z,this.provinces=Q,this.wards=K,this.province_combobox_state=J,this.ward_combobox_state=X}}function u5(Z){let Q,K=Z.query,J=SZ(K,(W)=>{return bZ(u0(W))}),X=hK(J),V=eZ(X,F([]));return Q=b9(V),new gK(Q)}function c5(Z){let Q,K=L9(),J=bZ(K),X=k0(J,(R)=>{return R.query}),V=SZ(X,(R)=>{return bZ(u0(R))}),G=hK(V);Q=eZ(G,F([]));let Y=b9(Q),M=new DZ(Y,F([]),F([]),B8(),B8()),H=t8(F([xV(u5),H7()]));return[M,H]}function p5(Z,Q){let K,J=Q.route;if(J instanceof fQ){let z=J[0],B=h0(Z,(P)=>{return P.code===z});if(B instanceof N){let P=B[0];K=[new j(P),_9(P.code)]}else K=[new q,o()]}else K=[new q,o()];let X=K,V,G;V=X[0],G=X[1];let W;if(V instanceof j){let z=V[0];W=[z.name,r0(z)]}else W=["",XQ(Z)];let Y=W,M,H;return M=Y[0],H=Y[1],[new DZ(Q.route,Z,F([]),(()=>{let z=Q.province_combobox_state;return new KZ(z.is_shown,M,H,V,z.focused_index)})(),Q.ward_combobox_state),G]}function d5(Z,Q){let K,J=Q.route;if(J instanceof fQ){let H=J[1];if(H instanceof j){let R=H[0],B=h0(Z,(P)=>{return P.code===R});K=bZ(B)}else K=new q}else K=new q;let X=K,V;if(X instanceof j){let H=X[0];V=[H.name,r0(H)]}else V=["",XQ(Z)];let G=V,W,Y;return W=G[0],Y=G[1],[new DZ(Q.route,Q.provinces,Z,Q.province_combobox_state,(()=>{let H=Q.ward_combobox_state;return new KZ(H.is_shown,W,Y,X,H.focused_index)})()),o()]}function s5(Z,Q,K,J){let X,V,G;X=J.route,V=J.provinces,G=J.wards;let W=h0(V,(x)=>{return x.code===Q}),Y;if(W instanceof N){let x=W[0];Y=r0(x)}else Y=XQ(V);let M=Y,H;if(K instanceof j){let x=K[0],CZ=h0(G,(BZ)=>{return BZ.code===x});H=bZ(CZ)}else H=new q;let R=H,z;if(R instanceof j){let x=R[0];z=r0(x)}else z=XQ(G);let B=z,P;if(X instanceof j8)P=[new q,new q];else{let x=X[0],$=X[1];P=[new j(x),$]}let C=P,T;T=C[0];let E;if(W instanceof N)if(T instanceof j){let x=W[0],$=T[0];if(x.code!==$)E=new j(x.code);else E=new q}else{let x=W[0];E=new j(x.code)}else E=new q;let A=E,S;if(A instanceof j){let x=A[0];S=_9(x)}else S=o();let y=S,D,k=SZ(R,(x)=>{return x.name});D=eZ(k,"");let g=D;return[new DZ(Z,J.provinces,J.wards,(()=>{let x=J.province_combobox_state;return new KZ(x.is_shown,x.filter_text,M,bZ(W),x.focused_index)})(),(()=>{let x=J.ward_combobox_state;return new KZ(x.is_shown,g,B,R,x.focused_index)})()),y]}var n9="province-combobox",i9="ward-combobox";function n5(Z){return GZ(bV(S9(Z)),(Q)=>{let K,J=w0(n9),X=FQ(J,(C)=>{return UK(Q,C)});K=c0(X,!0);let V=K,G,W=w0(i9),Y=FQ(W,(C)=>{return UK(Q,C)});G=c0(Y,!0);let M=G,H,R;if(V)if(M)R=new j(new O8);else R=new j(new TK);else if(M)R=new j(new PK);else R=new q;let B=SZ(R,(C)=>{return new v9(C)});return H=SZ(B,OV),new N(H)})}function i5(Z,Q){if(Q instanceof AK)return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let J=Z.province_combobox_state;return new KZ(!0,J.filter_text,J.filtered_items,J.selected_item,J.focused_index)})(),Z.ward_combobox_state),o()];else if(Q instanceof BK)return[Z,H8("",new j(""),new q)];else if(Q instanceof SK){let K=Q[0],J=Z.provinces,X=Z.province_combobox_state.filtered_items,V,G=cQ(K);if(G==="")V=[XQ(J),o()];else V=[X,F7(G)];let W=V,Y,M;return Y=W[0],M=W[1],[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let R=Z.province_combobox_state;return new KZ(R.is_shown,K,Y,R.selected_item,R.focused_index)})(),Z.ward_combobox_state),M]}else if(Q instanceof qK){let K=Q[0],J=Z.province_combobox_state.filtered_items,X=Z.province_combobox_state.focused_index,V;if(K instanceof G0)V=X-1;else V=X+1;let W=X6(V,0,H6(J));return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let M=Z.province_combobox_state;return new KZ(M.is_shown,M.filter_text,M.filtered_items,M.selected_item,W)})(),Z.ward_combobox_state),s9(n9,W)]}else if(Q instanceof CK){let K=Q[0],J=new DZ(Z.route,Z.provinces,Z.wards,(()=>{let V=Z.province_combobox_state;return new KZ(!1,K.name,V.filtered_items,new j(K),V.focused_index)})(),Z.ward_combobox_state),X=nQ(F([["p",a(K.code)]]));return[J,H8("",new j(X),new q)]}else if(Q instanceof wK)return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let J=Z.ward_combobox_state;return new KZ(!0,J.filter_text,J.filtered_items,J.selected_item,J.focused_index)})()),o()];else if(Q instanceof EK){let K,J=Z.province_combobox_state.selected_item;return K=SZ(J,(V)=>{return nQ(F([["p",a(V.code)]]))}),[Z,H8("",K,new q)]}else if(Q instanceof xK){let K=Q[0],J=Z.wards,X=Z.province_combobox_state.selected_item,V=Z.ward_combobox_state.filtered_items,G,W=cQ(K);if(W==="")G=[XQ(J),o()];else{let z=W,B,C=SZ(X,(E)=>{return E.code});B=eZ(C,0),G=[V,I7(z,B)]}let Y=G,M,H;return M=Y[0],H=Y[1],[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let z=Z.ward_combobox_state;return new KZ(z.is_shown,K,M,z.selected_item,z.focused_index)})()),H]}else if(Q instanceof kK){let K=Q[0],J=Z.ward_combobox_state.focused_index,X=Z.ward_combobox_state.filtered_items,V;if(K instanceof G0)V=J-1;else V=J+1;let W=X6(V,0,H6(X));return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let M=Z.ward_combobox_state;return new KZ(M.is_shown,M.filter_text,M.filtered_items,M.selected_item,W)})()),s9(i9,W)]}else if(Q instanceof yK){let K=Q[0],J=new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let Y=Z.ward_combobox_state;return new KZ(!1,K.name,Y.filtered_items,new j(K),Y.focused_index)})()),X=["w",a(K.code)],V,G=J.route;if(G instanceof fQ){let Y=G[0];V=F([["p",a(Y)],X])}else V=F([X]);return[J,H8("",new j(nQ(V)),new q)]}else if(Q instanceof L8){let K=Q[0];if(K instanceof N){let J=K[0];return p5(J,Z)}else return[Z,o()]}else if(Q instanceof T8){let K=Q[0];if(K instanceof N){let J=K[0];return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let V=Z.province_combobox_state;return new KZ(V.is_shown,V.filter_text,XQ(J),V.selected_item,V.focused_index)})(),Z.ward_combobox_state),o()]}else return[Z,o()]}else if(Q instanceof P8){let K=Q[0];if(K instanceof N){let J=K[0];return d5(J,Z)}else return[Z,o()]}else if(Q instanceof A8){let K=Q[0];if(K instanceof N){let J=K[0];return[new DZ(Z.route,Z.provinces,Z.wards,Z.province_combobox_state,(()=>{let V=Z.ward_combobox_state;return new KZ(V.is_shown,V.filter_text,XQ(J),V.selected_item,V.focused_index)})()),o()]}else return[Z,o()]}else if(Q instanceof gK){let K=Q[0];if(K instanceof j8)return[new DZ(K,Z.provinces,F([]),(()=>{let X=B8();return new KZ(X.is_shown,X.filter_text,XQ(Z.provinces),X.selected_item,X.focused_index)})(),B8()),o()];else{let J=K[0],X=K[1];return s5(K,J,X,Z)}}else{let K=Q[0],J;if(K instanceof O8)J=!0;else if(K instanceof TK)J=!0;else J=!1;let X=J,V;if(K instanceof O8)V=!0;else if(K instanceof PK)V=!0;else V=!1;let G=V;return[new DZ(Z.route,Z.provinces,Z.wards,(()=>{let Y=Z.province_combobox_state;return new KZ(!X,Y.filter_text,Y.filtered_items,Y.selected_item,Y.focused_index)})(),(()=>{let Y=Z.ward_combobox_state;return new KZ(!G,Y.filter_text,Y.filtered_items,Y.selected_item,Y.focused_index)})()),o()]}}function l5(Z){let Q=Z.province_combobox_state.selected_item,K=Z.ward_combobox_state.selected_item,J=new bK((W)=>{return new SK(W)},(W)=>{return new CK(W)},new AK,new BK,(W)=>{return new qK(W)}),X=A7(n9,Z.province_combobox_state,J),V=new bK((W)=>{return new xK(W)},(W)=>{return new yK(W)},new wK,new EK,(W)=>{return new kK(W)}),G=B7(i9,Z.ward_combobox_state,V);return EX(F([m("grow")]),F([oZ(F([m("space-y-8 sm:flex sm:flex-row sm:space-x-8 sm:space-y-0")]),F([oZ(F([]),F([d6(F([m("text-lg")]),F([qZ("Tỉnh thành")])),X,(()=>{let Y=SZ(Q,R7);return eZ(Y,X8())})()])),oZ(F([]),F([d6(F([m("text-lg")]),F([qZ("Phường xã")])),G,(()=>{let Y=SZ(K,N7);return eZ(Y,X8())})()]))]))]))}function S7(){let Z=jV(c5,i5,l5),Q=LV(Z,"#app",void 0),K;if(Q instanceof N)K=Q[0];else throw F0("let_assert",$5,"vn_provinces_demo",50,"main","Pattern match failed, no pattern matched the value.",{value:Q,start:1433,end:1488,pattern_start:1444,pattern_end:1455});return A9("click",(J)=>{let X=n5(J);if(X instanceof N){let V=X[0];if(V instanceof j){let G=V[0];return I9(K,G)}else return}else return})}S7();
